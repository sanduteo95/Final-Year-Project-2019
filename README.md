# Application of Futamura projections on a toy language

JavaScript interpreter implemented with the help of [Jison](https://github.com/zaach/jison) and [Lex](https://github.com/aaditmshah/lexer). 

Aims to become a compiler-compiler by applying the three [Futamura projections](https://en.wikipedia.org/wiki/Partial_evaluation) with the help of [Prepack](https://github.com/facebook/prepack).

## Permitted language syntax
For now the language allows the following:
* Constants (integers, booleans and strings)
* Arrays (initialisation, indexing and length calculation)
* Local and global variable declarations (`const`, `let`, `var`, but they are all syntactic sugar for `var` and the global variables cannot be interspersed inbetween function definitions)
* Variable assignment
* Arithmetic and logical operations (no `++` or `--`, or bit vector manipulation)
* If statements (for now `else if` statements are not recognised)
* For loops
* Return statements
* Functions (including recursion, but not including inline function definitions)
* `console.log(...)`
* `throw new Error(...)`
* `Object.keys()`
* Switch statements (for now they do not allow multiliple cases per line)
* Breaks
* `module.export = { ... }` (for now the expectation is that the exported function is exported under its defined name)
* multiline/single-line comments (for now it does not allow commented out code)

## What it does
It ontains a lexer, parser, interpreter and a first application of the first Futamura projection on the interpreter. 
* The lexer tokenises and checks for incorrect syntax.
* The parser takes a string of code representing a program and produces an abstract syntax tree.
* The interpreter takes two strings, one representing a program and one representing a function call, and runs through the parse tree generated by the parser to evaluate the value returned by the provided function call.
* The first Futamura projection works based on the interpreter above (TODO: improve langauge and interpreter so that an extra function call is not required)

## How to run it
`node index.js -p <fileName.js>` - prints out a parse tree

`node index.js -i <fileName.js>` - returns result of interpreter

`node index.js -f1` - returns the result of applying the first Futamura projection