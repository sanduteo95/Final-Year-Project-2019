(function () {
  var __get_scope_binding_0_get_95scope_95binding = function (__selector) {
    var __captured;

    switch (__selector) {
      case 0:
        __captured = [0];
        break;

      case 1:
        __captured = [_Kf__95get, _Kf__95get];
        break;

      case 2:
        __captured = [_Mi__95typeof, _Mi__95typeof, _Kq__95get, _Kq__95get];
        break;

      case 3:
        __captured = [_Md__95typeof, _Md__95typeof];
        break;

      case 4:
        __captured = [_Me__95typeof, _Me__95typeof];
        break;

      case 5:
        __captured = [_P7__95typeof, _P7__95typeof, _OQ__95getPrototypeOf, _OQ__95getPrototypeOf];
        break;

      case 6:
        __captured = [_PA__95typeof, _PA__95typeof, _OT__95getPrototypeOf, _OT__95getPrototypeOf];
        break;

      case 7:
        __captured = [_PC__95typeof, _PC__95typeof, _OV__95getPrototypeOf, _OV__95getPrototypeOf];
        break;

      case 8:
        __captured = [_PE__95typeof, _PE__95typeof, _OX__95getPrototypeOf, _OX__95getPrototypeOf];
        break;

      case 9:
        __captured = [_PG__95typeof, _PG__95typeof, _OZ__95getPrototypeOf, _OZ__95getPrototypeOf];
        break;

      case 10:
        __captured = [_PI__95typeof, _PI__95typeof, _Ob__95getPrototypeOf, _Ob__95getPrototypeOf];
        break;

      case 11:
        __captured = [_PK__95typeof, _PK__95typeof, _Od__95getPrototypeOf, _Od__95getPrototypeOf];
        break;

      case 12:
        __captured = [_PM__95typeof, _PM__95typeof, _Of__95getPrototypeOf, _Of__95getPrototypeOf];
        break;

      case 13:
        __captured = [_PO__95typeof, _PO__95typeof, _Oh__95getPrototypeOf, _Oh__95getPrototypeOf];
        break;

      case 14:
        __captured = [_NG__95typeof, _NG__95typeof];
        break;

      case 15:
        __captured = [_NH__95typeof, _NH__95typeof];
        break;

      case 16:
        __captured = [_NO__95typeof, _NO__95typeof];
        break;

      case 17:
        __captured = [_NP__95typeof, _NP__95typeof];
        break;

      case 18:
        __captured = [_NQ__95typeof, _NQ__95typeof];
        break;

      case 19:
        __captured = [_NS__95typeof, _NS__95typeof];
        break;

      case 20:
        __captured = [_NV__95typeof, _NV__95typeof];
        break;

      case 21:
        __captured = [_NW__95typeof, _NW__95typeof];
        break;

      case 22:
        __captured = [_NZ__95typeof, _NZ__95typeof];
        break;

      case 23:
        __captured = [_Na__95typeof, _Na__95typeof];
        break;

      case 24:
        __captured = [_Nb__95typeof, _Nb__95typeof];
        break;

      case 25:
        __captured = [_Nc__95typeof, _Nc__95typeof];
        break;

      case 26:
        __captured = [_Ne__95typeof, _Ne__95typeof];
        break;

      case 27:
        __captured = [_P9__95typeof, _P9__95typeof];
        break;
    }

    __scope_0_main[__selector] = __captured;
    return __captured;
  };

  var __scope_0_main = new Array(28);

  var $$0_enumerable_58false_44configurable_58true_44writable_58true = {
    enumerable: false,
    configurable: true,
    writable: true
  };

  var _$0_global = this;

  var _$1_Object = _$0_global.Object;
  var _$2_Object_46getPrototypeOf = _$1_Object.getPrototypeOf;
  var _$3_Map = _$0_global.Map;
  var _$4_Object_46defineProperty = _$1_Object.defineProperty;
  var _$5_Object_46setPrototypeOf = _$1_Object.setPrototypeOf;
  var _$6_Reflect = _$0_global.Reflect;
  var _$7_Reflect_46get = _$6_Reflect.get;

  var _Lc__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Mn__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Kz_Abstraction = function (pattern, body) {
    _Mn__95classCallCheck(this, _Kz_Abstraction);

    this.pattern = pattern;
    this.body = body;
  };

  var _Mo__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _L0_Application = function (lhs, rhs) {
    _Mo__95classCallCheck(this, _L0_Application);

    this.lhs = lhs;
    this.rhs = rhs;
  };

  var _Mm__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ky_Identifier = function (value, name) {
    _Mm__95classCallCheck(this, _Ky_Identifier);

    this.value = value;
    this.name = name;
  };

  var _Mp__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _L1_Constant = function (value) {
    _Mp__95classCallCheck(this, _L1_Constant);

    this.value = value;
  };

  var _P9__95typeof = function (obj) {
    var __captured__scope_S_ = __scope_0_main[27] || __get_scope_binding_0_get_95scope_95binding(27);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_S_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_S_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_S_[1](obj);
  };

  var _Ms__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OR__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_S_ = __scope_0_main[27] || __get_scope_binding_0_get_95scope_95binding(27);

    if (call && (__captured__scope_S_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PR__95assertThisInitialized(self);
  };

  var _PR__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _ON__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _MD_Operation = function (type, name) {
    _ON__95classCallCheck(this, _MD_Operation);

    this.type = type;
    this.name = name;
  };

  var _L5_ = _MD_Operation.prototype;

  var _L8_UnaryOp = function (type, name, v1) {
    var _this;

    _Ms__95classCallCheck(this, _L8_UnaryOp);

    _this = _OR__95possibleConstructorReturn(this, _KM_(_L8_UnaryOp).call(this, type, name));
    _this.v1 = v1;
    return _this;
  };

  var _Mq__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OO__95possibleConstructorReturn = function (self, call) {
    if (call && (_P6_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PQ__95assertThisInitialized(self);
  };

  var _PQ__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _L2_BinaryOp = function (type, name, v1, v2) {
    var _this;

    _Mq__95classCallCheck(this, _L2_BinaryOp);

    _this = _OO__95possibleConstructorReturn(this, _KM_(_L2_BinaryOp).call(this, type, name, v1));
    _this.v2 = v2;
    return _this;
  };

  var _P7__95typeof = function (obj) {
    var __captured__scope_6_ = __scope_0_main[5] || __get_scope_binding_0_get_95scope_95binding(5);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_6_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_6_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_6_[1](obj);
  };

  var _Mr__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OP__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_6_ = __scope_0_main[5] || __get_scope_binding_0_get_95scope_95binding(5);

    if (call && (__captured__scope_6_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _P8__95assertThisInitialized(self);
  };

  var _P8__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _OQ__95getPrototypeOf = function (o) {
    var __captured__scope_6_ = __scope_0_main[5] || __get_scope_binding_0_get_95scope_95binding(5);

    __captured__scope_6_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_6_[3](o);
  };

  var _L6_SymmetricBinaryOp = function () {
    var __captured__scope_6_ = __scope_0_main[5] || __get_scope_binding_0_get_95scope_95binding(5);

    _Mr__95classCallCheck(this, _L6_SymmetricBinaryOp);

    return _OP__95possibleConstructorReturn(this, __captured__scope_6_[3](_L6_SymmetricBinaryOp).apply(this, arguments));
  };

  var _Mw__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LB_IfThenElse = function (cond, t1, t2) {
    _Mw__95classCallCheck(this, _LB_IfThenElse);

    this.cond = cond;
    this.t1 = t1;
    this.t2 = t2;
  };

  var _My__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LE_Recursion = function (param, body) {
    _My__95classCallCheck(this, _LE_Recursion);

    this.param = param;
    this.body = body;
  };

  var _N0__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LH_Tuple = function (lhs, rhs) {
    _N0__95classCallCheck(this, _LH_Tuple);

    this.lhs = lhs;
    this.rhs = rhs;
  };

  var _N1__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LI_Cell = function (term) {
    _N1__95classCallCheck(this, _LI_Cell);

    this.term = term;
  };

  var _NC__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LX_ProvisionalConstant = function (term) {
    _NC__95classCallCheck(this, _LX_ProvisionalConstant);

    this.term = term;
  };

  var _N6__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LP_Change = function (param, body) {
    _N6__95classCallCheck(this, _LP_Change);

    this.param = param;
    this.body = body;
  };

  var _N7__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LQ_Assign = function (param, body) {
    _N7__95classCallCheck(this, _LQ_Assign);

    this.param = param;
    this.body = body;
  };

  var _N9__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LT_AssignParam = function (param, body) {
    _N9__95classCallCheck(this, _LT_AssignParam);

    this.param = param;
    this.body = body;
  };

  var _NB__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LW_Propagation = function () {
    _NB__95classCallCheck(this, _LW_Propagation);
  };

  var _N2__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LJ_Deprecation = function (term) {
    _N2__95classCallCheck(this, _LJ_Deprecation);

    this.term = term;
  };

  var _N4__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LM_Dereference = function (term) {
    _N4__95classCallCheck(this, _LM_Dereference);

    this.term = term;
  };

  var _ND__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LY_GraphAbstraction = function (term) {
    _ND__95classCallCheck(this, _LY_GraphAbstraction);

    this.term = term;
  };

  var _NE__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _LZ_Folding = function (t1, t2) {
    _NE__95classCallCheck(this, _LZ_Folding);

    this.t1 = t1;
    this.t2 = t2;
  };

  var _Mk__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _P4__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Nh_Token = function (type, value, pred) {
    _P4__95classCallCheck(this, _Nh_Token);

    this.type = type;
    this.value = value;
    this.pred = pred;
  };

  var _Ku_Lexer = function (input) {
    _Mk__95classCallCheck(this, _Ku_Lexer);

    this._input = input;
    this._index = 0;
    this._token = undefined;

    this._nextToken();
  };

  var _Kv_ = _Ku_Lexer.prototype;

  var _Lz_ = function () {
    if (this._index >= this._input.length) {
      return '\0';
    }

    return this._input[this._index++];
  };

  var _M0_ = function () {
    var c;

    do {
      c = this._nextChar();
    } while (/\s/.test(c));

    switch (c) {
      case 'λ':
      case '\\':
        this._token = new _Nh_Token(_Nh_Token.LAMBDA);
        break;

      case '.':
        this._token = new _Nh_Token(_Nh_Token.DOT);
        break;

      case ',':
        this._token = new _Nh_Token(_Nh_Token.COMMA, null, 1);
        break;

      case ';':
        this._token = new _Nh_Token(_Nh_Token.SEQ);
        break;

      case '(':
        this._token = new _Nh_Token(_Nh_Token.LPAREN);
        break;

      case ')':
        this._token = new _Nh_Token(_Nh_Token.RPAREN);
        break;

      case '\0':
        this._token = new _Nh_Token(_Nh_Token.EOF);
        break;

      case '~':
        this._token = new _Nh_Token(_Nh_Token.NOT);
        break;

      case '&':
        if (this._nextChar() == '&') this._token = new _Nh_Token(_Nh_Token.AND, null, 5);else {
          this._index--;
          this.fail();
        }
        break;

      case '|':
        var c2 = this._nextChar();

        if (c2 == '|') this._token = new _Nh_Token(_Nh_Token.OR, null, 4);else {
          this._index--;
          this.fail();
        }
        break;

      case '+':
        this._token = new _Nh_Token(_Nh_Token.PLUS, null, 12);
        break;

      case '-':
        this._token = new _Nh_Token(_Nh_Token.SUB, null, 12);
        break;

      case '*':
        this._token = new _Nh_Token(_Nh_Token.MULT, null, 13);
        break;

      case '/':
        this._token = new _Nh_Token(_Nh_Token.DIV, null, 13);
        break;

      case '<':
        if (this._nextChar() == '=') this._token = new _Nh_Token(_Nh_Token.LTE, null, 10);else {
          this._index--;
          this.fail();
        }
        break;

      case '=':
        this._token = new _Nh_Token(_Nh_Token.DEFINE);
        break;

      case '⊞':
        this._token = new _Nh_Token(_Nh_Token.SYMPLUS, null, 12);
        break;

      case '⊠':
        this._token = new _Nh_Token(_Nh_Token.SYMMULT, null, 13);
        break;

      case '⊡':
        this._token = new _Nh_Token(_Nh_Token.SYMDOT, null, 13);
        break;

      default:
        // text for string
        if (/[a-z]|_|'/.test(c)) {
          var str = '';

          do {
            str += c;
            c = this._nextChar();
          } while (/[a-zA-Z]|'|_|[0-9]/.test(c)); // put back the last char which is not part of the identifier


          this._index--;
          if (str == "let") this._token = new _Nh_Token(_Nh_Token.LET);else if (str == "in") this._token = new _Nh_Token(_Nh_Token.IN);else if (str == "rec") this._token = new _Nh_Token(_Nh_Token.REC);else if (str == "true") this._token = new _Nh_Token(_Nh_Token.TRUE);else if (str == "false") this._token = new _Nh_Token(_Nh_Token.FALSE);else if (str == "if") this._token = new _Nh_Token(_Nh_Token.IF);else if (str == "then") this._token = new _Nh_Token(_Nh_Token.THEN);else if (str == "else") this._token = new _Nh_Token(_Nh_Token.ELSE);else if (str == "link") this._token = new _Nh_Token(_Nh_Token.CHANGE);else if (str == "set") this._token = new _Nh_Token(_Nh_Token.SET);else if (str == "setp") this._token = new _Nh_Token(_Nh_Token.SET_P);else if (str == "to") this._token = new _Nh_Token(_Nh_Token.TO);else if (str == "step") this._token = new _Nh_Token(_Nh_Token.PROP);else if (str == "peek") this._token = new _Nh_Token(_Nh_Token.DEP);else if (str == "deref") this._token = new _Nh_Token(_Nh_Token.DEREF);else if (str == "abs") this._token = new _Nh_Token(_Nh_Token.ABS);else if (str == "cell") this._token = new _Nh_Token(_Nh_Token.CELL);else if (str == "pc") this._token = new _Nh_Token(_Nh_Token.PC);else if (str == "fold") this._token = new _Nh_Token(_Nh_Token.FOLD);else this._token = new _Nh_Token(_Nh_Token.LCID, str);
        } // text for numbers
        else if (/[0-9]/.test(c)) {
            var _str = '';

            do {
              _str += c;
              c = this._nextChar();
            } while (/[0-9]/.test(c));

            if (c == '.') {
              do {
                _str += c;
                c = this._nextChar();
              } while (/[0-9]/.test(c));
            } // put back the last char which is not part of the identifier


            this._index--;
            this._token = new _Nh_Token(_Nh_Token.INT, parseFloat(_str));
          } else {
            this.fail();
          }

    }
  };

  var _M1_ = function (type) {
    if (!type) {
      return this._token.value;
    }

    var token = this._token;
    this.match(type);
    return token.value;
  };

  var _M2_ = function () {
    return this._token;
  };

  var _M3_ = function () {
    throw new Error("Unexpected token at offset ".concat(this._index));
  };

  var _M4_ = function (type) {
    return this._token.type == type;
  };

  var _M5_ = function (type) {
    if (this.next(type)) {
      this._nextToken();

      return;
    }

    console.error("".concat(this._index, ": Invalid token: Expected '").concat(type, "' found '").concat(this._token.type, "'"));
    throw new Error('Parse Error');
  };

  var _M6_ = function (type) {
    if (this.next(type)) {
      this._nextToken();

      return true;
    }

    return false;
  };

  var _Ml__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _P5__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OM_Pattern = function (type, id1, id2) {
    _P5__95classCallCheck(this, _OM_Pattern);

    this.type = type;
    this.id1 = id1;
    this.id2 = id2;
  };

  var _Kw_Parser = function (lexer) {
    _Ml__95classCallCheck(this, _Kw_Parser);

    this.lexer = lexer;
  };

  var _Kx_ = _Kw_Parser.prototype;

  var _M7_ = function () {
    var result = this.term([]); // make sure we consumed all the program, otherwise there was a syntax error

    this.lexer.match(_Nh_Token.EOF);
    return result;
  };

  var _M8_ = function (ctx) {
    if (this.lexer.skip(_Nh_Token.LAMBDA)) {
      var _id = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.DOT);
      var term = this.term([_id].concat(ctx));
      return new _Kz_Abstraction(new _OM_Pattern(_KB_PatternType.Id, _id), term);
    } else if (this.lexer.skip(_Nh_Token.LET)) {
      if (this.lexer.skip(_Nh_Token.LPAREN)) {
        var id1 = this.lexer.token(_Nh_Token.LCID);
        this.lexer.match(_Nh_Token.COMMA);
        var id2 = this.lexer.token(_Nh_Token.LCID);
        this.lexer.match(_Nh_Token.RPAREN);
        var pattern = new _OM_Pattern(_KB_PatternType.Tuple, id1, id2);
        this.lexer.match(_Nh_Token.DEFINE);
        var N = this.term(ctx);
        this.lexer.match(_Nh_Token.IN);
        var M = this.term([id1, id2].concat(ctx));
        return new _L0_Application(new _Kz_Abstraction(pattern, M), N);
      } else {
        var id = this.lexer.token(_Nh_Token.LCID);
        var pattern = new _OM_Pattern(_KB_PatternType.Id, id);
        this.lexer.match(_Nh_Token.DEFINE);
        var N = this.term(ctx);
        this.lexer.match(_Nh_Token.IN);

        var _M = this.term([id].concat(ctx));

        return new _L0_Application(new _Kz_Abstraction(pattern, _M), N);
      }
    } else if (this.lexer.skip(_Nh_Token.REC)) {
      var _id2 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.DOT);

      var _term = this.term([_id2].concat(ctx));

      return new _LE_Recursion(_id2, _term);
    } else if (this.lexer.skip(_Nh_Token.IF)) {
      var cond = this.term(ctx);
      this.lexer.match(_Nh_Token.THEN);
      var t1 = this.term(ctx);
      this.lexer.match(_Nh_Token.ELSE);
      var t2 = this.term(ctx);
      return new _LB_IfThenElse(cond, t1, t2);
    } else if (this.lexer.skip(_Nh_Token.FOLD)) {
      var term1 = this.atom(ctx);
      var term2 = this.atom(ctx);
      return new _LZ_Folding(term1, term2);
    } else {
      return this.application(ctx);
    }
  };

  var _M9_ = function (token) {
    return token.type == _Nh_Token.AND || token.type == _Nh_Token.OR || token.type == _Nh_Token.PLUS || token.type == _Nh_Token.SUB || token.type == _Nh_Token.MULT || token.type == _Nh_Token.DIV || token.type == _Nh_Token.LTE || token.type == _Nh_Token.COMMA || token.type == _Nh_Token.SYMPLUS || token.type == _Nh_Token.SYMMULT || token.type == _Nh_Token.SYMDOT;
  };

  var _MA_ = function (ctx, lhs, pred) {
    var nextToken = this.lexer.lookahead();

    while (this.isBinaryOp(nextToken) && nextToken.pred >= pred) {
      var op = nextToken;

      this.lexer._nextToken();

      var rhs = this.atom(ctx); //var rhs = this.term(ctx);

      nextToken = this.lexer.lookahead();

      while (this.isBinaryOp(nextToken) && nextToken.pred > op.pred) {
        rhs = this.parseBinop(ctx, rhs, nextToken.pred);
        nextToken = this.lexer.lookahead();
      }

      if (op.type == _Nh_Token.AND) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.And, "&&", lhs, rhs);
      } else if (op.type == _Nh_Token.OR) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Or, "||", lhs, rhs);
      } else if (op.type == _Nh_Token.PLUS) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Plus, "+", lhs, rhs);
      } else if (op.type == _Nh_Token.SUB) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Sub, "-", lhs, rhs);
      } else if (op.type == _Nh_Token.MULT) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Mult, "*", lhs, rhs);
      } else if (op.type == _Nh_Token.DIV) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Div, "/", lhs, rhs);
      } else if (op.type == _Nh_Token.LTE) {
        lhs = new _L2_BinaryOp(_Ju_BinOpType.Lte, "<=", lhs, rhs);
      } else if (op.type == _Nh_Token.COMMA) {
        lhs = new _LH_Tuple(lhs, rhs);
      } else if (op.type == _Nh_Token.SYMPLUS) {
        lhs = new _L6_SymmetricBinaryOp(_Ju_BinOpType.SymPlus, "⊞", lhs, rhs);
      } else if (op.type == _Nh_Token.SYMMULT) {
        lhs = new _L6_SymmetricBinaryOp(_Ju_BinOpType.SymMult, "⊠", lhs, rhs);
      } else if (op.type == _Nh_Token.SYMDOT) {
        lhs = new _L6_SymmetricBinaryOp(_Ju_BinOpType.SymDot, "⊡", lhs, rhs);
      }
    }

    return lhs;
  };

  var _MB_ = function (ctx) {
    var lhs = this.atom(ctx);

    while (true) {
      var rhs;

      if (this.isBinaryOp(this.lexer.lookahead())) {
        lhs = this.parseBinop(ctx, lhs, 0);
      } else {
        rhs = this.atom(ctx);

        if (!rhs) {
          return lhs;
        } else {
          lhs = new _L0_Application(lhs, rhs);
        }
      }
    }
  };

  var _MC_ = function (ctx) {
    if (this.lexer.skip(_Nh_Token.LPAREN)) {
      var _term2 = this.term(ctx);

      this.lexer.match(_Nh_Token.RPAREN);
      return _term2;
    } else if (this.lexer.next(_Nh_Token.LCID)) {
      var id = this.lexer.token(_Nh_Token.LCID);
      return new _Ky_Identifier(ctx.indexOf(id), id);
    } else if (this.lexer.next(_Nh_Token.INT)) {
      var n = this.lexer.token(_Nh_Token.INT);
      return new _L1_Constant(n);
    } else if (this.lexer.skip(_Nh_Token.TRUE)) {
      return new _L1_Constant(true);
    } else if (this.lexer.skip(_Nh_Token.FALSE)) {
      return new _L1_Constant(false);
    } else if (this.lexer.skip(_Nh_Token.NOT)) {
      var _term3 = this.term(ctx);

      return new _L8_UnaryOp(_Mt_UnOpType.Not, "~", _term3);
    } else if (this.lexer.skip(_Nh_Token.PROP)) {
      return new _LW_Propagation();
    } else if (this.lexer.skip(_Nh_Token.DEP)) {
      var term = this.term(ctx);
      return new _LJ_Deprecation(term);
    } else if (this.lexer.skip(_Nh_Token.DEREF)) {
      var term = this.term(ctx);
      return new _LM_Dereference(term);
    } else if (this.lexer.skip(_Nh_Token.CELL)) {
      var term = this.term(ctx);
      return new _LI_Cell(term);
    } else if (this.lexer.skip(_Nh_Token.PC)) {
      var term = this.term(ctx);
      return new _LX_ProvisionalConstant(term);
    } else if (this.lexer.skip(_Nh_Token.CHANGE)) {
      var _id3 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.TO);

      var _term4 = this.term(ctx);

      return new _LP_Change(_id3, _term4);
    } else if (this.lexer.skip(_Nh_Token.SET)) {
      var _id4 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.TO);

      var _term5 = this.term(ctx);

      return new _LQ_Assign(_id4, _term5);
    } else if (this.lexer.skip(_Nh_Token.SET_P)) {
      var _id5 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.TO);

      var _term6 = this.term(ctx);

      return new _LT_AssignParam(_id5, _term6);
    } else if (this.lexer.skip(_Nh_Token.SET_P)) {
      var _id6 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.TO);

      var _term7 = this.term(ctx);

      return new _LT_AssignParam(_id6, _term7);
    } else if (this.lexer.skip(_Nh_Token.SET_P)) {
      var _id7 = this.lexer.token(_Nh_Token.LCID);

      this.lexer.match(_Nh_Token.TO);

      var _term8 = this.term(ctx);

      return new _LT_AssignParam(_id7, _term8);
    } else if (this.lexer.skip(_Nh_Token.ABS)) {
      var _term9 = this.term(ctx);

      return new _LY_GraphAbstraction(_term9);
    } else {
      return undefined;
    }
  };

  var _Ks__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _J4_MachineToken = function (machine) {
    _Ks__95classCallCheck(this, _J4_MachineToken);

    this.machine = machine;
    this.reset();
  };

  var _Gj_ = _J4_MachineToken.prototype;

  var _K9_ = function () {
    return _JS_CompData;
  };

  var _KA_ = function () {
    return _Jb_RewriteFlag;
  };

  var _J1_ = function (link) {
    if (this.link != null) {
      //this.link.tokens.splice(this.link.tokens.indexOf(this), 1);
      this.link.clearFocus();
    }

    this.link = link;

    if (this.link != null) {
      //this.link.tokens.push(this);
      if (this.isMain) this.link.focus("red");else this.link.focus("green");
    }
  };

  var _J2_ = function () {
    this.forward = true;
    this.rewrite = false;
    this.transited = false;
    this.link = null;
    this.rewriteFlag = _Jb_RewriteFlag.EMPTY;
    this.dataStack = [_JS_CompData.PROMPT];
    this.boxStack = [];
  };

  var _J3_ = function () {
    this.setLink(null);
    this.machine.evalTokens.splice(this.machine.evalTokens.indexOf(this), 1);
  };

  var _KE__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _KF_isNumber = function (n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
  };

  var _H2_Link = function (from, to, fromPort, toPort, reverse) {
    _KE__95classCallCheck(this, _H2_Link);

    this.from = from;
    this.to = to;
    this.fromPort = fromPort;
    this.toPort = toPort;
    this.reverse = reverse;
    this.colour = null;
    this.penWidth = null;
    this.addToGraph(_JR_.graph); // cheating

    this.addToNode(); // cheating
  };

  var _K_ = _H2_Link.prototype;

  var _Gs_ = function () {
    var fromNode = this.graph.findNodeByKey(this.from);
    fromNode.links.push(this);
    var toNode = this.graph.findNodeByKey(this.to);
    toNode.links.push(this);
  };

  var _Gt_ = function (graph) {
    if (graph != null) graph.addLink(this);
    this.graph = graph;
    return this; // to provide chain operation
  };

  var _Gu_ = function (group) {
    group.addLink(this);
    this.group = group;
    return this; // to provide chain operation
  };

  var _Gv_ = function (group) {
    this.group.removeLink(this);
    this.addToGroup(group);
    return this;
  };

  var _Gw_ = function (key, port) {
    var fromNode = this.graph.findNodeByKey(this.from);
    fromNode.links.splice(fromNode.links.indexOf(this), 1);
    this.from = key;
    this.fromPort = port;
    fromNode = this.graph.findNodeByKey(this.from);
    fromNode.links.push(this);
  };

  var _Gx_ = function (key, port) {
    var toNode = this.graph.findNodeByKey(this.to);
    toNode.links.splice(toNode.links.indexOf(this), 1);
    this.to = key;
    this.toPort = port;
    toNode = this.graph.findNodeByKey(this.to);
    toNode.links.push(this);
  };

  var _Gy_ = function (colour) {
    this.colour = colour;
    this.penWidth = "20";
  };

  var _Gz_ = function () {
    this.colour = null;
    this.penWidth = null;
  };

  var _H0_ = function () {
    var fromNode = this.graph.findNodeByKey(this.from);
    fromNode.links.splice(fromNode.links.indexOf(this), 1);
    var toNode = this.graph.findNodeByKey(this.to);
    toNode.links.splice(toNode.links.indexOf(this), 1);
    this.group.removeLink(this);
    this.graph.removeLink(this);
  };

  var _H1_ = function () {
    return this.from + "->" + this.to;
  };

  var _Kr__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Md__95typeof = function (obj) {
    var __captured__scope_4_ = __scope_0_main[3] || __get_scope_binding_0_get_95scope_95binding(3);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_4_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_4_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_4_[1](obj);
  };

  var _KK__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _KL__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_4_ = __scope_0_main[3] || __get_scope_binding_0_get_95scope_95binding(3);

    if (call && (__captured__scope_4_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _NJ__95assertThisInitialized(self);
  };

  var _NJ__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _KH__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _HG_Node = function (shape, text, colour, name) {
    _KH__95classCallCheck(this, _HG_Node);

    this.key = null;
    this.shape = shape;
    this.text = text;
    this.colour = colour;
    this.name = name; // identifier name or constant name if any

    this.graph = null;
    this.group = null;
    this.width = null;
    this.height = null;
    this.links = [];
    this.addToGraph(_JR_.graph); // cheating!
  };

  var _29_ = _HG_Node.prototype;

  var _H6_ = function (graph) {
    if (graph != null) graph.addNode(this);
    this.graph = graph;
    return this; // to provide chain operation
  };

  var _H7_ = function (group) {
    group.addNode(this);
    this.group = group;
    return this; // to provide chain operation
  };

  var _H8_ = function (group) {
    this.group.removeNode(this);
    this.addToGroup(group);
    return this;
  };

  var _H9_ = function () {
    return this.links;
  };

  var _HA_ = function (toPort) {
    var links = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = this.links[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var link = _step.value;
        if (link.to == this.key && (toPort == null ? true : link.toPort == toPort)) links.push(link);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    return links;
  };

  var _HB_ = function (fromPort) {
    var links = [];
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = this.links[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var link = _step2.value;
        if (link.from == this.key && (fromPort == null ? true : link.fromPort == fromPort)) links.push(link);
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }

    return links;
  };

  var _HC_ = function (graph) {
    var newNode = new _HG_Node(this.shape, this.text, this.name).addToGraph(graph);
    newNode.width = this.width;
    newNode.height = this.height;
  };

  var _HD_ = function () {
    this.group.removeNode(this);
    this.graph.removeNode(this);
  };

  var _HE_ = function (token, link) {
    return link;
  };

  var _HF_ = function (token, nextLink) {
    token.rewrite = false;
    return nextLink;
  };

  var _HM_Group = function () {
    var _this;

    _KK__95classCallCheck(this, _HM_Group);

    _this = _KL__95possibleConstructorReturn(this, _KM_(_HM_Group).call(this, null, null, null)); // shape, text, name

    _this.nodes = [];
    _this.links = []; // for copying

    return _this;
  };

  var _HN_ = function (node) {
    this.nodes.push(node);
  };

  var _HO_ = function (node) {
    return this.nodes.splice(this.nodes.indexOf(node), 1);
  };

  var _HP_ = function (link) {
    this.links.push(link);
  };

  var _HQ_ = function (link) {
    var i = this.links.indexOf(link);
    if (i != -1) this.links.splice(i, 1);
  };

  var _HR_ = function () {
    var _arr = Array.from(this.nodes);

    for (var _i = 0; _i < _arr.length; _i++) {
      var node = _arr[_i];
      node.delete();
    }

    _KN_(_KM_(_HM_Group.prototype), "delete", this).call(this);
  };

  var _J0_Graph = function (machine) {
    _Kr__95classCallCheck(this, _J0_Graph);

    this.machine = machine;
    this.clear();
  };

  var _GV_ = _J0_Graph.prototype;

  var _Iu_ = function () {
    this.key = 0;
    this.linkKey = 0;
    this.allNodes = new Map(); // for efficiency searching

    this.allLinks = []; // for printing ONLY

    this.child = new _HM_Group();
  };

  var _Iv_ = function (node) {
    node.key = 'nd' + this.key;
    this.allNodes.set(node.key, node);
    this.key++;
  };

  var _Iw_ = function (node) {
    var _arr = Array.from(node.findLinksConnected());

    for (var _i = 0; _i < _arr.length; _i++) {
      var link = _arr[_i];
      link.delete();
    }

    return this.allNodes.delete(node.key);
  };

  var _Ix_ = function (key) {
    return this.allNodes.get(key);
  };

  var _Iy_ = function (link) {
    this.allLinks.push(link);
  };

  var _Iz_ = function (link) {
    this.allLinks.splice(this.allLinks.indexOf(link), 1);
  };

  var _KT__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lh__95possibleConstructorReturn = function (self, call) {
    if (call && (_NN_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Om__95assertThisInitialized(self);
  };

  var _Om__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Kd__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ke__95possibleConstructorReturn = function (self, call) {
    if (call && (_Mg_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Mh__95assertThisInitialized(self);
  };

  var _Mh__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Kf__95get = function (target, property, receiver) {
    var __captured__scope_2_ = __scope_0_main[1] || __get_scope_binding_0_get_95scope_95binding(1);

    if (typeof Reflect !== "undefined" && Reflect.get) {
      __captured__scope_2_[1] = Reflect.get;
    } else {
      __captured__scope_2_[1] = function _get(target, property, receiver) {
        var base = _NX__95superPropBase(target, property);

        if (!base) return;
        var desc = Object.getOwnPropertyDescriptor(base, property);

        if (desc.get) {
          return desc.get.call(receiver);
        }

        return desc.value;
      };
    }

    return __captured__scope_2_[1](target, property, receiver || target);
  };

  var _NX__95superPropBase = function (object, property) {
    while (!Object.prototype.hasOwnProperty.call(object, property)) {
      object = _KM_(object);
      if (object === null) break;
    }

    return object;
  };

  var _Me__95typeof = function (obj) {
    var __captured__scope_5_ = __scope_0_main[4] || __get_scope_binding_0_get_95scope_95binding(4);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_5_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_5_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_5_[1](obj);
  };

  var _KP__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _KQ__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_5_ = __scope_0_main[4] || __get_scope_binding_0_get_95scope_95binding(4);

    if (call && (__captured__scope_5_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _NL__95assertThisInitialized(self);
  };

  var _NL__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _HW_Expo = function (shape, text, name) {
    var _this;

    _KP__95classCallCheck(this, _HW_Expo);

    _this = _KQ__95possibleConstructorReturn(this, _KM_(_HW_Expo).call(this, shape, text, "cyan", name));
    _this.width = ".3";
    _this.height = ".3";
    return _this;
  };

  var _HX_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      return nextLink;
    } else if (link.from == this.key) {
      var nextLink = this.findLinksInto(null)[0];
      return nextLink;
    }
  };

  var _HY_ = function () {
    var inLink = this.findLinksInto(null)[0];
    var outLink = this.findLinksOutOf(null)[0];

    if (outLink != null && inLink != null) {
      inLink.changeTo(outLink.to, outLink.toPort);
    }

    _KN_(_KM_(_HW_Expo.prototype), "delete", this).call(this);
  };

  var _HZ_ = function () {
    var inLink = this.findLinksInto(null)[0];
    var outLink = this.findLinksOutOf(null)[0];

    if (inLink != null && outLink != null) {
      outLink.changeFrom(inLink.from, inLink.fromPort);
    }

    _KN_(_KM_(_HW_Expo.prototype), "delete", this).call(this);
  };

  var _II_Pax = function (name) {
    _Kd__95classCallCheck(this, _II_Pax);

    return _Ke__95possibleConstructorReturn(this, _KM_(_II_Pax).call(this, null, "?", name));
  };

  var _IJ_ = function () {
    return new _II_Pax(this.name);
  };

  var _IK_ = function () {
    var __captured__scope_2_ = __scope_0_main[1] || __get_scope_binding_0_get_95scope_95binding(1);

    this.group.auxs.splice(this.group.auxs.indexOf(this), 1);

    __captured__scope_2_[1](_KM_(_II_Pax.prototype), "delete", this).call(this);
  };

  var _KX__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ll__95possibleConstructorReturn = function (self, call) {
    if (call && (_NR_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oq__95assertThisInitialized(self);
  };

  var _Oq__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Hy_Contract = function (name) {
    _KX__95classCallCheck(this, _Hy_Contract);

    return _Ll__95possibleConstructorReturn(this, _KM_(_Hy_Contract).call(this, null, "C", name));
  };

  var _Hz_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.boxStack.push(link);
      token.rewriteFlag = _Jb_RewriteFlag.F_C;
      return nextLink;
    } else if (link.from == this.key && token.boxStack.length > 0) {
      var nextLink = token.boxStack.pop();
      return nextLink;
    }
  };

  var _I0_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_C && nextLink.from == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;

      if (this.findLinksInto(null).length == 1) {
        token.boxStack.pop();
        /*
                    for (let _token of nextLink.tokens)
                    	_token.boxStack.pop();
                    */

        var inLink = this.findLinksInto(null)[0];
        /*
                    for (let _token of inLink.tokens)
                    	_token.setLink(nextLink);
                    */

        nextLink.changeFrom(inLink.from, inLink.fromPort);
        this.delete();
      } else {
        var i = token.boxStack[token.boxStack.length - 1];
        var prev = this.graph.findNodeByKey(i.from);

        if (prev instanceof _Hy_Contract) {
          token.boxStack.pop();
          /*
                        for (let _token of Array.from(nextLink.tokens)) {
                        	if (_token.boxStack[token.boxStack.length - 1] == i)
                        		_token.boxStack.pop();
                        }
                        for (let _token of Array.from(i.tokens)) {
                        	_token.setLink(nextLink);
                        	_token.rewriteFlag = RewriteFlag.F_C;
                        }
                        */

          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = prev.findLinksInto(null)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var link = _step.value;
              link.changeTo(this.key, "s");
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return != null) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          prev.delete();
          token.rewriteFlag = _Jb_RewriteFlag.F_C;
        }
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _I1_ = function () {
    var con = new _Hy_Contract(this.name);
    con.text = this.text;
    return con;
  };

  var _Hi_Term = function (prin, auxs) {
    var _this;

    _KT__95classCallCheck(this, _Hi_Term);

    _this = _Lh__95possibleConstructorReturn(this, _KM_(_Hi_Term).call(this));

    _this.set(prin, auxs);

    return _this;
  };

  var _Hj_ = function (prin, auxs) {
    this.prin = prin;
    this.auxs = auxs;
    return this;
  };

  var _Hk_ = function (auxs) {
    var newPaxs = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = auxs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var pax = _step.value;
        var newPax = new _II_Pax(pax.name).addToGroup(this);
        if (pax.findLinksOutOf(null).length == 0) new _H2_Link(pax.key, newPax.key, "n", "s").addToGroup(this);else {
          var outLink = pax.findLinksOutOf(null)[0];
          new _H2_Link(newPax.key, outLink.to, "n", outLink.toPort).addToGroup(this.group);
          outLink.changeTo(newPax.key, "s");
          outLink.changeToGroup(this);
        }
        newPaxs.push(newPax);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    return newPaxs;
  };

  var _Jr_ = function (leftAuxs, rightAuxs, group) {
    var newAuxs = leftAuxs.concat(rightAuxs);
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      outter: for (var _iterator2 = leftAuxs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var leftAux = _step2.value;
        var _iteratorNormalCompletion3 = true;
        var _didIteratorError3 = false;
        var _iteratorError3 = undefined;

        try {
          for (var _iterator3 = rightAuxs[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
            var rightAux = _step3.value;

            if (leftAux.name == rightAux.name) {
              var con = new _Hy_Contract(leftAux.name).addToGroup(group);
              var outLink = leftAux.findLinksOutOf(null)[0];

              if (typeof outLink != 'undefined') {
                outLink.changeFrom(con.key, outLink.fromPort);
              }

              new _H2_Link(rightAux.key, con.key, "n", "s").addToGroup(group);
              new _H2_Link(leftAux.key, con.key, "n", "s").addToGroup(group);
              newAuxs.splice(newAuxs.indexOf(leftAux), 1);
              newAuxs.splice(newAuxs.indexOf(rightAux), 1);
              newAuxs.push(con);
              continue outter;
            }
          }
        } catch (err) {
          _didIteratorError3 = true;
          _iteratorError3 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
              _iterator3.return();
            }
          } finally {
            if (_didIteratorError3) {
              throw _iteratorError3;
            }
          }
        }
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }

    return newAuxs;
  };

  var _KR__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _KS__95possibleConstructorReturn = function (self, call) {
    if (call && (_Mf_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _NM__95assertThisInitialized(self);
  };

  var _NM__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _KJ__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lf__95possibleConstructorReturn = function (self, call) {
    if (call && (_NI_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ok__95assertThisInitialized(self);
  };

  var _Ok__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _HK_Box = function () {
    var _this;

    _KJ__95classCallCheck(this, _HK_Box);

    _this = _Lf__95possibleConstructorReturn(this, _KM_(_HK_Box).call(this));
    _this.nodes = [];
    _this.links = [];
    return _this;
  };

  var _HL_ = function (graph) {// this shouldnt be call, since every box should be inside a wrapper
  };

  var _KO__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lg__95possibleConstructorReturn = function (self, call) {
    if (call && (_NK_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ol__95assertThisInitialized(self);
  };

  var _Ol__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Kg__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lr__95possibleConstructorReturn = function (self, call) {
    if (call && (_NY_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ow__95assertThisInitialized(self);
  };

  var _Ow__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _IL_Der = function (name) {
    _Kg__95classCallCheck(this, _IL_Der);

    return _Lr__95possibleConstructorReturn(this, _KM_(_IL_Der).call(this, null, "D", name));
  };

  var _IM_ = function () {
    var der = new _IL_Der(this.name);
    return der;
  };

  var _NW__95typeof = function (obj) {
    var __captured__scope_M_ = __scope_0_main[21] || __get_scope_binding_0_get_95scope_95binding(21);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_M_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_M_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_M_[1](obj);
  };

  var _Kc__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lq__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_M_ = __scope_0_main[21] || __get_scope_binding_0_get_95scope_95binding(21);

    if (call && (__captured__scope_M_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ov__95assertThisInitialized(self);
  };

  var _Ov__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _NV__95typeof = function (obj) {
    var __captured__scope_L_ = __scope_0_main[20] || __get_scope_binding_0_get_95scope_95binding(20);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_L_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_L_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_L_[1](obj);
  };

  var _Kb__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lp__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_L_ = __scope_0_main[20] || __get_scope_binding_0_get_95scope_95binding(20);

    if (call && (__captured__scope_L_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ou__95assertThisInitialized(self);
  };

  var _Ou__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _IB_App = function () {
    _Kb__95classCallCheck(this, _IB_App);

    return _Lp__95possibleConstructorReturn(this, _KM_(_IB_App).call(this, null, "@", "yellow"));
  };

  var _IC_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "e") {
      var nextLink = this.findLinksOutOf("w")[0];
      token.dataStack.pop();
      token.dataStack.push(_JS_CompData.R);
      token.forward = true;
      return nextLink;
    }
  };

  var _ID_ = function () {
    return new _IB_App();
  };

  var _Nb__95typeof = function (obj) {
    var __captured__scope_P_ = __scope_0_main[24] || __get_scope_binding_0_get_95scope_95binding(24);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_P_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_P_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_P_[1](obj);
  };

  var _Kj__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lu__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_P_ = __scope_0_main[24] || __get_scope_binding_0_get_95scope_95binding(24);

    if (call && (__captured__scope_P_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oz__95assertThisInitialized(self);
  };

  var _Oz__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _IV_PatTuple = function () {
    _Kj__95classCallCheck(this, _IV_PatTuple);

    return _Lu__95possibleConstructorReturn(this, _KM_(_IV_PatTuple).call(this, null, "'", "mediumpurple1"));
  };

  var _IW_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("n")[0];
      if (link.toPort == "e") token.dataStack.push(_JS_CompData.PR);else if (link.toPort == "w") token.dataStack.push(_JS_CompData.PL);
      return nextLink;
    } else if (link.from == this.key) {
      var nextLink;
      var direction = token.dataStack.pop();
      if (direction == _JS_CompData.PR) nextLink = this.findLinksInto("e")[0];else if (direction == _JS_CompData.PL) nextLink = this.findLinksInto("w")[0];
      return nextLink;
    }
  };

  var _IX_ = function () {
    return new _IV_PatTuple();
  };

  var _IE_Abs = function () {
    _Kc__95classCallCheck(this, _IE_Abs);

    return _Lq__95possibleConstructorReturn(this, _KM_(_IE_Abs).call(this, null, "λ", "yellow"));
  };

  var _IF_ = function (token, link) {
    if (link.to == this.key && link.toPort == "s") {
      var data = token.dataStack[token.dataStack.length - 1];

      if (data == _JS_CompData.PROMPT) {
        token.dataStack.pop();
        token.dataStack.push([_JS_CompData.LAMBDA, _JS_CompData.EMPTY]);
        token.forward = false;
        return link;
      } else if (data == _JS_CompData.R) {
        var nextLink = this.findLinksOutOf(null)[0];
        token.dataStack.pop();
        token.rewriteFlag = _Jb_RewriteFlag.F_LAMBDA;
        return nextLink;
      }
    }
  };

  var _IG_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_LAMBDA && nextLink.from == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var prev = this.graph.findNodeByKey(this.findLinksInto("s")[0].from);

      if (prev instanceof _IB_App) {
        // M rule
        var appLink = prev.findLinksInto(null)[0];
        var appOtherLink = prev.findLinksOutOf("e")[0];
        var otherNextLink = this.findLinksInto("w")[0];
        nextLink.changeFrom(appLink.from, appLink.fromPort);
        nextLink.changeToGroup(appLink.group);
        otherNextLink.changeTo(appOtherLink.to, appOtherLink.toPort);
        otherNextLink.reverse = false;
        var otherNode = this.graph.findNodeByKey(otherNextLink.from);
        if (otherNode instanceof _HW_Expo || otherNode instanceof _IV_PatTuple) otherNextLink.fromPort = "n";
        otherNextLink.changeToGroup(appOtherLink.group);
        this.delete();
        prev.delete();
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _IH_ = function () {
    return new _IE_Abs();
  };

  var _PE__95typeof = function (obj) {
    var __captured__scope_9_ = __scope_0_main[8] || __get_scope_binding_0_get_95scope_95binding(8);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_9_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_9_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_9_[1](obj);
  };

  var _Mz__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OW__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_9_ = __scope_0_main[8] || __get_scope_binding_0_get_95scope_95binding(8);

    if (call && (__captured__scope_9_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PF__95assertThisInitialized(self);
  };

  var _PF__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _OX__95getPrototypeOf = function (o) {
    var __captured__scope_9_ = __scope_0_main[8] || __get_scope_binding_0_get_95scope_95binding(8);

    __captured__scope_9_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_9_[3](o);
  };

  var _LF_Recur = function () {
    var __captured__scope_9_ = __scope_0_main[8] || __get_scope_binding_0_get_95scope_95binding(8);

    _Mz__95classCallCheck(this, _LF_Recur);

    return _OW__95possibleConstructorReturn(this, __captured__scope_9_[3](_LF_Recur).call(this, null, "μ", "mediumpurple1"));
  };

  var _ML_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.rewriteFlag = _Jb_RewriteFlag.F_RECUR;
      return nextLink;
    }
  };

  var _MM_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_RECUR && nextLink.from == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var wrapper = this.group.copy().addToGroup(this.group);

      _Hi_Term.joinAuxs(this.group.auxs, wrapper.auxs, wrapper.group);

      var oldGroup = this.group;
      var oldBox = this.group.box;
      this.group.moveOut();
      var leftLink = this.findLinksInto("w")[0];
      leftLink.changeTo(wrapper.prin.key, "s");
      leftLink.fromPort = "n";
      leftLink.reverse = false;
      var inLink = this.findLinksInto("s")[0];
      var outLink = this.findLinksOutOf("e")[0];
      outLink.changeFrom(inLink.from, inLink.fromPort);
      oldGroup.deleteAndPreserveLink();
      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MN_ = function () {
    return new _LF_Recur();
  };

  var _HS_Promo = function () {
    _KO__95classCallCheck(this, _HS_Promo);

    return _Lg__95possibleConstructorReturn(this, _KM_(_HS_Promo).call(this, null, "!"));
  };

  var _HT_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.rewriteFlag = _Jb_RewriteFlag.F_PROMO;
      return nextLink;
    } else if (link.from == this.key) {
      var nextLink = this.findLinksInto(null)[0];
      return nextLink;
    }
  };

  var _HU_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_PROMO) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY; // get the previous node

      var prev = this.graph.findNodeByKey(this.findLinksInto(null)[0].from);

      if (prev instanceof _IL_Der) {
        var oldGroup = this.group;
        oldGroup.moveOut(); // this.group is a box-wrapper

        oldGroup.deleteAndPreserveLink();
        var newNextLink = prev.findLinksInto(null)[0];
        prev.deleteAndPreserveInLink();
        token.rewrite = true;
        return newNextLink;
      } else if (prev instanceof _Hy_Contract && token.boxStack.length >= 1) {
        // if it's a contract and there are multiple, consective links into it
        if (token.boxStack.length >= 2) {
          // get the least recent link
          var link = token.boxStack[token.dataStack.length - 1];
          var prevPrevNode = this.graph.findNodeByKey(link.from); // if the node leading into the current contract is also a contract, then remove it

          if (prevPrevNode instanceof _Hy_Contract) {
            token.boxStack.pop();
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
              for (var _iterator = prevPrevNode.findLinksInto(null)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var _link = _step.value;
                _link.to = prev.key;
              } // delete the previous contract

            } catch (err) {
              _didIteratorError = true;
              _iteratorError = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion && _iterator.return != null) {
                  _iterator.return();
                }
              } finally {
                if (_didIteratorError) {
                  throw _iteratorError;
                }
              }
            }

            prevPrevNode.delete();
            token.rewrite = true;
            return nextLink;
          }
        } // if it's a contract and there aren't multiple, consecutive links into it (not necessarily just one)
        else {
            // get the most recent link
            var link = token.boxStack.pop(); // if the next node is an abstraction, then keep the contract

            var next = this.graph.findNodeByKey(this.findLinksOutOf(null)[0].to);

            if (next instanceof _IE_Abs || next instanceof _LF_Recur) {
              var newBoxWrapper = this.group.copy().addToGroup(this.group.group);

              _Hi_Term.joinAuxs(this.group.auxs, newBoxWrapper.auxs, newBoxWrapper.group);

              var prevLink = prev.findLinksOutOf(null)[0];
              prevLink.changeTo(newBoxWrapper.prin.key, prev.findLinksOutOf(null)[0].toPort);
              link.changeTo(this.key, "s");
            } else {
              var inLinks = Object.assign([], prev.findLinksInto(null)); // iterate through the links leading into the current contract

              for (var i = 0; i < inLinks.length; i++) {
                var group; // if the link leading into it is the same as the most reccent link

                if (inLinks[i].from == link.from && inLinks[i].fromPort == link.fromPort) {
                  group = this.group;
                } else {
                  // create a new box where the current group is copied and added at a nested level
                  var newBoxWrapper = this.group.copy().addToGroup(this.group.group);
                  group = newBoxWrapper;
                } // change link into the current node to point to the new box wrapper


                inLinks[i].changeTo(group.prin.key, "s");
              } // delete the current contract


              prev.delete();
            }

            token.rewriteFlag = _Jb_RewriteFlag.F_PROMO;
            token.rewrite = true;
            return nextLink;
          }
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _HV_ = function () {
    return new _HS_Promo();
  };

  var _Ha_BoxWrapper = function (prin, box, auxs) {
    var _this;

    _KR__95classCallCheck(this, _Ha_BoxWrapper);

    _this = _KS__95possibleConstructorReturn(this, _KM_(_Ha_BoxWrapper).call(this, prin, auxs));
    _this.box = box;
    return _this;
  };

  var _Hb_ = function (prin, box, auxs) {
    _KN_(_KM_(_Ha_BoxWrapper.prototype), "set", this).call(this, prin, auxs);

    this.box = box;
  };

  var _Hc_ = function (aux) {
    this.auxs.splice(this.auxs.indexOf(aux), 1);
    aux.deleteAndPreserveOutLink();
  };

  var _Hd_ = function () {
    var _arr = Array.from(this.box.links);

    for (var _i = 0; _i < _arr.length; _i++) {
      var link = _arr[_i];
      link.changeToGroup(this.group);
    }

    var _arr2 = Array.from(this.links);

    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {
      var _link = _arr2[_i2];

      _link.changeToGroup(this.group);
    }

    var _arr3 = Array.from(this.box.nodes);

    for (var _i3 = 0; _i3 < _arr3.length; _i3++) {
      var node = _arr3[_i3];
      node.changeToGroup(this.group);
    }

    var _arr4 = Array.from(this.auxs);

    for (var _i4 = 0; _i4 < _arr4.length; _i4++) {
      var aux = _arr4[_i4];
      aux.changeToGroup(this.group);
    }

    this.prin.changeToGroup(this.group);

    var _arr5 = Array.from(this.nodes);

    for (var _i5 = 0; _i5 < _arr5.length; _i5++) {
      var _node = _arr5[_i5];

      _node.changeToGroup(this.group);
    }
  };

  var _He_ = function (map) {
    var newBoxWrapper = new _Ha_BoxWrapper();
    var newPrin = this.prin.copy().addToGroup(newBoxWrapper);
    newBoxWrapper.prin = newPrin;
    map.set(this.prin.key, newPrin.key);
    var newBox = new _HK_Box().addToGroup(newBoxWrapper);
    newBoxWrapper.box = newBox;
    newBoxWrapper.auxs = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = this.box.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var node = _step.value;
        var newNode;

        if (node instanceof _Ha_BoxWrapper) {
          newNode = node.copyBox(map).addToGroup(newBox);
        } else {
          var newNode = node.copy().addToGroup(newBox);
          map.set(node.key, newNode.key);
        }
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = this.auxs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var aux = _step2.value;
        var newAux = aux.copy().addToGroup(newBoxWrapper);
        newBoxWrapper.auxs.push(newAux);
        map.set(aux.key, newAux.key);
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }

    var _iteratorNormalCompletion3 = true;
    var _didIteratorError3 = false;
    var _iteratorError3 = undefined;

    try {
      for (var _iterator3 = this.box.links[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
        var link = _step3.value;
        var newLink = new _H2_Link(map.get(link.from), map.get(link.to), link.fromPort, link.toPort).addToGroup(newBox);
        newLink.reverse = link.reverse;
      }
    } catch (err) {
      _didIteratorError3 = true;
      _iteratorError3 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
          _iterator3.return();
        }
      } finally {
        if (_didIteratorError3) {
          throw _iteratorError3;
        }
      }
    }

    var _iteratorNormalCompletion4 = true;
    var _didIteratorError4 = false;
    var _iteratorError4 = undefined;

    try {
      for (var _iterator4 = this.links[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
        var _link2 = _step4.value;
        var newLink = new _H2_Link(map.get(_link2.from), map.get(_link2.to), _link2.fromPort, _link2.toPort).addToGroup(newBoxWrapper);
        newLink.reverse = _link2.reverse;
      }
    } catch (err) {
      _didIteratorError4 = true;
      _iteratorError4 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion4 && _iterator4.return != null) {
          _iterator4.return();
        }
      } finally {
        if (_didIteratorError4) {
          throw _iteratorError4;
        }
      }
    }

    return newBoxWrapper;
  };

  var _Hf_ = function () {
    var map = new Map();
    return this.copyBox(map);
  };

  var _Hg_ = function () {
    this.box.delete();

    var _arr6 = Array.from(this.auxs);

    for (var _i6 = 0; _i6 < _arr6.length; _i6++) {
      var aux = _arr6[_i6];
      aux.delete();
    }

    this.prin.delete();

    _KN_(_KM_(_Ha_BoxWrapper.prototype), "delete", this).call(this);
  };

  var _Hh_ = function () {
    this.box.delete();

    var _arr7 = Array.from(this.auxs);

    for (var _i7 = 0; _i7 < _arr7.length; _i7++) {
      var aux = _arr7[_i7];
      this.removeAux(aux); // preserve outLink
    }

    this.prin.deleteAndPreserveInLink(); //preserve inLink

    _KN_(_KM_(_Ha_BoxWrapper.prototype), "delete", this).call(this);
  };

  var _Jq_ = function () {
    var wrapper = new _Ha_BoxWrapper();
    var box = new _HK_Box().addToGroup(wrapper);
    var promo = new _HS_Promo().addToGroup(wrapper);
    wrapper.set(promo, box, []);
    return wrapper;
  };

  var _NQ__95typeof = function (obj) {
    var __captured__scope_J_ = __scope_0_main[18] || __get_scope_binding_0_get_95scope_95binding(18);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_J_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_J_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_J_[1](obj);
  };

  var _KW__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lk__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_J_ = __scope_0_main[18] || __get_scope_binding_0_get_95scope_95binding(18);

    if (call && (__captured__scope_J_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Op__95assertThisInitialized(self);
  };

  var _Op__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _NH__95typeof = function (obj) {
    var __captured__scope_G_ = __scope_0_main[15] || __get_scope_binding_0_get_95scope_95binding(15);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_G_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_G_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_G_[1](obj);
  };

  var _KI__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Le__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_G_ = __scope_0_main[15] || __get_scope_binding_0_get_95scope_95binding(15);

    if (call && (__captured__scope_G_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oj__95assertThisInitialized(self);
  };

  var _Oj__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _HH_Const = function (name) {
    _KI__95classCallCheck(this, _HH_Const);

    return _Le__95possibleConstructorReturn(this, _KM_(_HH_Const).call(this, null, name, "mediumpurple1", name));
  };

  var _HI_ = function (token, link) {
    if (token.dataStack[token.dataStack.length - 1] == _JS_CompData.PROMPT) {
      token.dataStack.pop();
      token.dataStack.push([this.name, _JS_CompData.EMPTY]);
      token.forward = false;
      return link;
    }
  };

  var _HJ_ = function () {
    return new _HH_Const(this.name);
  };

  var _KZ__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ln__95possibleConstructorReturn = function (self, call) {
    if (call && (_NT_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Os__95assertThisInitialized(self);
  };

  var _Os__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _I6_Weak = function () {
    _KZ__95classCallCheck(this, _I6_Weak);

    return _Ln__95possibleConstructorReturn(this, _KM_(_I6_Weak).call(this, null, 'C0'));
  };

  var _I7_ = function () {
    return new _I6_Weak();
  };

  var _Ht_BinOp = function (text) {
    var _this;

    _KW__95classCallCheck(this, _Ht_BinOp);

    _this = _Lk__95possibleConstructorReturn(this, _KM_(_Ht_BinOp).call(this, null, text, "mediumpurple1"));
    _this.subType = null;
    return _this;
  };

  var _Hu_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "e") {
      var nextLink = this.findLinksOutOf("w")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      token.forward = true;
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "w") {
      if (token.dataStack[token.dataStack.length - 3] == _JS_CompData.PROMPT) {
        var l = token.dataStack.pop();
        var r = token.dataStack.pop();
        token.dataStack.pop();
        var result = this.binOpApply(this.subType, l[0], r[0]);
        var type = l[1] == _JS_CompData.EMPTY && r[1] == _JS_CompData.EMPTY ? _JS_CompData.EMPTY : _JS_CompData.DEP;
        token.dataStack.push([result, type]);
        token.rewriteFlag = _Jb_RewriteFlag.F_OP;
        return this.findLinksInto(null)[0];
        ;
      }
    }
  };

  var _Hv_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_OP && nextLink.to == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var left = this.graph.findNodeByKey(this.findLinksOutOf("w")[0].to);
      var right = this.graph.findNodeByKey(this.findLinksOutOf("e")[0].to);
      var data = token.dataStack[token.dataStack.length - 1];

      if (data[1] == _JS_CompData.EMPTY) {
        //left instanceof Promo && right instanceof Promo) {
        var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

        var newConst = new _HH_Const(token.dataStack[token.dataStack.length - 1][0]).addToGroup(wrapper.box);
        new _H2_Link(wrapper.prin.key, newConst.key, "n", "s").addToGroup(wrapper);
        nextLink.changeTo(wrapper.prin.key, "s"); //left.group.delete();
        //right.group.delete();

        var weak = new _I6_Weak().addToGroup(this.group);
        new _H2_Link(weak.key, left.key, "n", "s").addToGroup(this.group);
        var weak = new _I6_Weak().addToGroup(this.group);
        new _H2_Link(weak.key, right.key, "n", "s").addToGroup(this.group);
        this.delete();
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Hw_ = function (type, v1, v2) {
    switch (type) {
      case _Ju_BinOpType.And:
        return v1 && v2;

      case _Ju_BinOpType.Or:
        return v1 || v2;

      case _Ju_BinOpType.Plus:
        return parseFloat(v1) + parseFloat(v2);

      case _Ju_BinOpType.Sub:
        return parseFloat(v1) - parseFloat(v2);

      case _Ju_BinOpType.Mult:
        return parseFloat(v1) * parseFloat(v2);

      case _Ju_BinOpType.Div:
        return parseFloat(v1) / parseFloat(v2);

      case _Ju_BinOpType.Lte:
        return parseFloat(v1) <= parseFloat(v2);
    }
  };

  var _Hx_ = function () {
    var newNode = new _Ht_BinOp(this.text);
    newNode.subType = this.subType;
    return newNode;
  };

  var _Js_ = function () {
    var node = new _Ht_BinOp("+");
    node.subType = _Ju_BinOpType.Plus;
    return node;
  };

  var _Jt_ = function () {
    var node = new _Ht_BinOp("*");
    node.subType = _Ju_BinOpType.Mult;
    return node;
  };

  var _Nc__95typeof = function (obj) {
    var __captured__scope_Q_ = __scope_0_main[25] || __get_scope_binding_0_get_95scope_95binding(25);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_Q_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_Q_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_Q_[1](obj);
  };

  var _Kk__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lv__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_Q_ = __scope_0_main[25] || __get_scope_binding_0_get_95scope_95binding(25);

    if (call && (__captured__scope_Q_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _P0__95assertThisInitialized(self);
  };

  var _P0__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Ka__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lo__95possibleConstructorReturn = function (self, call) {
    if (call && (_NU_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ot__95assertThisInitialized(self);
  };

  var _Ot__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _I8_Vector = function (name) {
    _Ka__95classCallCheck(this, _I8_Vector);

    return _Lo__95possibleConstructorReturn(this, _KM_(_I8_Vector).call(this, name));
  };

  var _I9_ = function (token, link) {
    if (token.dataStack[token.dataStack.length - 1] == _JS_CompData.PROMPT) {
      token.dataStack.pop();
      token.dataStack.push([this.name, this.key]);
      token.forward = false;
      return link;
    }
  };

  var _IA_ = function () {
    var newNode = new _I8_Vector(this.name);
    return newNode;
  };

  var _K2_ = function (size, i) {
    var vector = new Array(size).fill(0);
    vector[i] = 1;
    return vector;
  };

  var _K3_ = function (size, i) {
    var basis = this.generateBaseVector(size, i);
    return new _I8_Vector(this.stringify(basis));
  };

  var _K4_ = function (values) {
    return new _I8_Vector(this.stringify(values));
  };

  var _K5_ = function (values) {
    return '[' + values.toString() + ']';
  };

  var _IY_SymBinOp = function (text) {
    var _this;

    _Kk__95classCallCheck(this, _IY_SymBinOp);

    _this = _Lv__95possibleConstructorReturn(this, _KM_(_IY_SymBinOp).call(this, null, text, "mediumpurple", null));
    _this.subType = null;
    return _this;
  };

  var _IZ_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "e") {
      var nextLink = this.findLinksOutOf("w")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      token.forward = true;
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "w") {
      if (token.dataStack[token.dataStack.length - 3] == _JS_CompData.PROMPT) {
        var l = token.dataStack.pop();
        var r = token.dataStack.pop();
        token.dataStack.pop();
        var result = this.binOpApply(this.subType, l[0], r[0]);
        token.dataStack.push([result, _JS_CompData.EMPTY]);
        token.rewriteFlag = _Jb_RewriteFlag.F_OP;
        return this.findLinksInto(null)[0];
      }
    }
  };

  var _Ia_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_OP && nextLink.to == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.dataStack[token.dataStack.length - 1][0];
      var leftNode = this.graph.findNodeByKey(this.findLinksOutOf("w")[0].to);
      var rightNode = this.graph.findNodeByKey(this.findLinksOutOf("e")[0].to);

      if (this.subType == _Ju_BinOpType.SymPlus) {
        if (rightNode instanceof _I8_Vector) {
          rightNode.name = data;
          rightNode.text = data;
          nextLink.changeTo(rightNode.key, 's');
          leftNode.delete();
          this.delete();
          token.rewrite = true;
          return nextLink;
        }
      } else if (this.subType == _Ju_BinOpType.SymMult) {
        if (leftNode instanceof _HH_Const && rightNode instanceof _I8_Vector) {
          rightNode.name = data;
          rightNode.text = data;
          nextLink.changeTo(rightNode.key, 's');
          leftNode.delete();
          this.delete();
          token.rewrite = true;
          return nextLink;
        }
      } else if (this.subType == _Ju_BinOpType.SymDot) {// do not replace for now, or we won't be able to update parameters

        /*
                    var prevNode = this.graph.findNodeByKey(this.findLinksInto(null)[0].from);
                    if (rightNode instanceof Vector && false) {
                    	var wrapper = BoxWrapper.create().addToGroup(this.group);
                    	var newConst = new Const(data).addToGroup(wrapper.box);
                    	wrapper.prin.name = newConst.name;
                    	var newNextLink = new Link(wrapper.prin.key, newConst.key, "n", "s").addToGroup(wrapper);
                    	nextLink.changeTo(wrapper.prin.key, 's');
                    	rightNode.delete();
                    	this.delete();
                    	token.rewrite = true;
                    	return newNextLink;
                    }
                    */
      }
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Ib_ = function (type, v1, v2) {
    switch (type) {
      case _Ju_BinOpType.SymPlus:
        v1 = JSON.parse(v1);
        v2 = JSON.parse(v2);
        if (v1.length != v2.length) return null;
        var result = new Array();

        for (var i = 0; i < v1.length; i++) {
          result.push(v1[i] + v2[i]);
        }

        return _I8_Vector.stringify(result);

      case _Ju_BinOpType.SymMult:
        v2 = JSON.parse(v2);
        var result = new Array();

        for (var i = 0; i < v2.length; i++) {
          result.push(v1 * v2[i]);
        }

        return _I8_Vector.stringify(result);

      case _Ju_BinOpType.SymDot:
        v1 = JSON.parse(v1);
        v2 = JSON.parse(v2);
        if (v1.length != v2.length) return null;
        var result = 0;

        for (var i = 0; i < v1.length; i++) {
          result += v1[i] * v2[i];
        }

        return result;
    }
  };

  var _Ic_ = function () {
    var newNode = new _IY_SymBinOp(this.text);
    newNode.subType = this.subType;
    return newNode;
  };

  var _K6_ = function () {
    var op = new _IY_SymBinOp('⊞');
    op.subType = _Ju_BinOpType.SymPlus;
    return op;
  };

  var _K7_ = function () {
    var op = new _IY_SymBinOp('⊠');
    op.subType = _Ju_BinOpType.SymMult;
    return op;
  };

  var _K8_ = function () {
    var op = new _IY_SymBinOp('⊡');
    op.subType = _Ju_BinOpType.SymDot;
    return op;
  };

  var _Kl__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lw__95possibleConstructorReturn = function (self, call) {
    if (call && (_Nd_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _P1__95assertThisInitialized(self);
  };

  var _P1__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Id_Var = function (name) {
    var _this;

    _Kl__95classCallCheck(this, _Id_Var);

    _this = _Lw__95possibleConstructorReturn(this, _KM_(_Id_Var).call(this, name));
    _this.text = "V";
    return _this;
  };

  var _Ie_ = function () {
    var inLink = this.findLinksInto(null)[0];
    var outLink = this.findLinksOutOf(null)[0];

    if (inLink != null && outLink != null) {
      var inNode = this.graph.findNodeByKey(inLink.from);
      if (this.graph.findNodeByKey(outLink.to) instanceof _IE_Abs && inNode instanceof _HW_Expo) outLink.changeFrom(inLink.from, "nw");else outLink.changeFrom(inLink.from, inLink.fromPort);
    }

    this.delete();
  };

  var _PC__95typeof = function (obj) {
    var __captured__scope_8_ = __scope_0_main[7] || __get_scope_binding_0_get_95scope_95binding(7);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_8_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_8_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_8_[1](obj);
  };

  var _Mx__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OU__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_8_ = __scope_0_main[7] || __get_scope_binding_0_get_95scope_95binding(7);

    if (call && (__captured__scope_8_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PD__95assertThisInitialized(self);
  };

  var _PD__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _OV__95getPrototypeOf = function (o) {
    var __captured__scope_8_ = __scope_0_main[7] || __get_scope_binding_0_get_95scope_95binding(7);

    __captured__scope_8_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_8_[3](o);
  };

  var _LC_If = function () {
    var __captured__scope_8_ = __scope_0_main[7] || __get_scope_binding_0_get_95scope_95binding(7);

    _Mx__95classCallCheck(this, _LC_If);

    return _OU__95possibleConstructorReturn(this, __captured__scope_8_[3](_LC_If).call(this, null, "if", "mediumpurple1"));
  };

  var _MI_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("w")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "w") {
      //var left = this.graph.findNodeByKey(this.findLinksOutOf("w")[0].to);
      var data = token.dataStack[token.dataStack.length - 1];

      if (data[1] == _JS_CompData.EMPTY) {
        //left instanceof Promo) {
        if (data[0] == true) {
          var nextLink = this.findLinksOutOf("n")[0];
          token.dataStack.pop();
          token.rewriteFlag = _Jb_RewriteFlag.F_IF;
          token.forward = true;
          return nextLink;
        } else if (data[0] == false) {
          var nextLink = this.findLinksOutOf("e")[0];
          token.dataStack.pop();
          token.rewriteFlag = _Jb_RewriteFlag.F_IF;
          token.forward = true;
          return nextLink;
        }
      } else {
        var nextLink = this.findLinksOutOf("n")[0];
        var data = token.dataStack.pop();
        token.dataStack.push(data[0]);
        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
        return nextLink;
      }
    } else if (link.from == this.key) {
      if (link.fromPort == "n") {
        var nextLink = this.findLinksOutOf("e")[0];
        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
        return nextLink;
      } else if (link.fromPort == "e") {
        var nextLink = this.findLinksInto("s")[0];
        var y = token.dataStack.pop();
        var x = token.dataStack.pop();
        var cond = token.dataStack.pop();
        var result;
        if (cond) result = x;else result = y;
        token.dataStack.pop();
        var type = result[1] == _JS_CompData.DEP || result[1] == _JS_CompData.EMPTY ? _JS_CompData.DEP : result[1];
        token.dataStack.push([result[0], type]);
        token.forward = false;
        return nextLink;
      }
    }
  };

  var _MJ_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_IF && nextLink.from == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var left = this.graph.findNodeByKey(this.findLinksOutOf("w")[0].to); //if (left instanceof Promo) {

      var downLink = this.findLinksInto(null)[0];
      var otherLink = this.findLinksOutOf(nextLink.fromPort == "n" ? "e" : "n")[0];
      nextLink.changeFrom(downLink.from, downLink.fromPort);
      var weak = new _I6_Weak(this.graph.findNodeByKey(otherLink.to).name).addToGroup(this.group);
      otherLink.changeFrom(weak.key, "n");
      var weak = new _I6_Weak().addToGroup(this.group);
      new _H2_Link(weak.key, left.key, "n", "s").addToGroup(this.group);
      this.delete(); //left.group.delete();
      //}

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MK_ = function () {
    return new _LC_If();
  };

  var _NG__95typeof = function (obj) {
    var __captured__scope_F_ = __scope_0_main[14] || __get_scope_binding_0_get_95scope_95binding(14);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_F_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_F_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_F_[1](obj);
  };

  var _KG__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ld__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_F_ = __scope_0_main[14] || __get_scope_binding_0_get_95scope_95binding(14);

    if (call && (__captured__scope_F_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oi__95assertThisInitialized(self);
  };

  var _Oi__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _H3_Start = function () {
    _KG__95classCallCheck(this, _H3_Start);

    return _Ld__95possibleConstructorReturn(this, _KM_(_H3_Start).call(this, "point", "", "black"));
  };

  var _H4_ = function (token) {
    if (token.link == null && token.dataStack[token.dataStack.length - 1] == _JS_CompData.PROMPT) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.forward = true;
      return nextLink;
    } else return null;
  };

  var _H5_ = function () {
    return new _H3_Start();
  };

  var _PA__95typeof = function (obj) {
    var __captured__scope_7_ = __scope_0_main[6] || __get_scope_binding_0_get_95scope_95binding(6);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_7_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_7_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_7_[1](obj);
  };

  var _Mv__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OS__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_7_ = __scope_0_main[6] || __get_scope_binding_0_get_95scope_95binding(6);

    if (call && (__captured__scope_7_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PB__95assertThisInitialized(self);
  };

  var _PB__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _OT__95getPrototypeOf = function (o) {
    var __captured__scope_7_ = __scope_0_main[6] || __get_scope_binding_0_get_95scope_95binding(6);

    __captured__scope_7_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_7_[3](o);
  };

  var _L9_UnOp = function (text) {
    var __captured__scope_7_ = __scope_0_main[6] || __get_scope_binding_0_get_95scope_95binding(6);

    var _this;

    _Mv__95classCallCheck(this, _L9_UnOp);

    _this = _OS__95possibleConstructorReturn(this, __captured__scope_7_[3](_L9_UnOp).call(this, null, text, "mediumpurple1"));
    _this.subType = null;
    return _this;
  };

  var _ME_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      if (token.dataStack[token.dataStack.length - 2] == _JS_CompData.PROMPT) {
        var v1 = token.dataStack.pop();
        token.dataStack.pop();
        var type = v1[1] == _JS_CompData.EMPTY ? _JS_CompData.EMPTY : _JS_CompData.DEP;
        token.dataStack.push([this.unOpApply(this.subType, v1[0]), _JS_CompData.EMPTY]);
        token.rewriteFlag = _Jb_RewriteFlag.F_OP;
        return this.findLinksInto(null)[0];
      }
    }
  };

  var _MF_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_OP && nextLink.to == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var prev = this.graph.findNodeByKey(this.findLinksOutOf(null)[0].to);
      var data = token.dataStack[token.dataStack.length - 1];

      if (data[1] == _JS_CompData.EMPTY) {
        //if (prev instanceof Promo) {
        var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

        var newConst = new _HH_Const(token.dataStack[token.dataStack.length - 1][0]).addToGroup(wrapper.box);
        new _H2_Link(wrapper.prin.key, newConst.key, "n", "s").addToGroup(wrapper);
        nextLink.changeTo(wrapper.prin.key, "s"); //prev.group.delete(); 

        var weak = new _I6_Weak().addToGroup(this.group);
        new _H2_Link(weak.key, prev.key, "n", "s").addToGroup(this.group);
        this.delete();
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MG_ = function (type, v1) {
    switch (type) {
      case _Mt_UnOpType.Not:
        return !v1;
    }
  };

  var _MH_ = function () {
    var newNode = new _L9_UnOp(this.text);
    newNode.subType = this.subType;
    return newNode;
  };

  var _Na__95typeof = function (obj) {
    var __captured__scope_O_ = __scope_0_main[23] || __get_scope_binding_0_get_95scope_95binding(23);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_O_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_O_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_O_[1](obj);
  };

  var _Ki__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lt__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_O_ = __scope_0_main[23] || __get_scope_binding_0_get_95scope_95binding(23);

    if (call && (__captured__scope_O_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oy__95assertThisInitialized(self);
  };

  var _Oy__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _IR_Delta = function () {
    _Ki__95classCallCheck(this, _IR_Delta);

    return _Lt__95possibleConstructorReturn(this, _KM_(_IR_Delta).call(this, null, "Δ", "indianred1"));
  };

  var _IS_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      if (link.fromPort == "e") {
        var nextLink = this.findLinksOutOf("w")[0];
        token.dataStack.pop();
        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
        return nextLink;
      } else if (link.fromPort == "w") {
        if (token.dataStack[token.dataStack.length - 2] == _JS_CompData.PROMPT) {
          var data = token.dataStack.pop();
          token.dataStack.pop();
          token.dataStack.push([_JS_CompData.UNIT, _JS_CompData.EMPTY]);
          token.rewriteFlag = _Jb_RewriteFlag.F_DELTA + data[1];
          return this.findLinksInto(null)[0];
        }
      }
    }
  };

  var _IT_ = function (token, nextLink) {
    if (token.rewriteFlag.substring(0, 3) == _Jb_RewriteFlag.F_DELTA && nextLink.to == this.key) {
      var key = token.rewriteFlag.substring(3, token.rewriteFlag.length);
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.dataStack[token.dataStack.length - 1];
      var outLink = this.findLinksOutOf("w")[0];
      var weak1 = new _I6_Weak().addToGroup(this.group);
      outLink.changeFrom(weak1.key, "n");
      var mod = this.graph.findNodeByKey(key);
      var weak2 = new _I6_Weak().addToGroup(this.group);
      mod.findLinksOutOf('e')[0].changeFrom(weak2.key, 'n');
      this.findLinksOutOf("e")[0].changeFrom(mod.key, "e");

      var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

      var con = new _HH_Const(data[0]).addToGroup(wrapper.box);
      new _H2_Link(wrapper.prin.key, con.key, "n", "s").addToGroup(wrapper);
      this.findLinksInto(null)[0].changeTo(wrapper.prin.key, "s");
      this.delete();
      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _IU_ = function () {
    return new _IR_Delta();
  };

  var _PK__95typeof = function (obj) {
    var __captured__scope_C_ = __scope_0_main[11] || __get_scope_binding_0_get_95scope_95binding(11);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_C_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_C_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_C_[1](obj);
  };

  var _N8__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Oc__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_C_ = __scope_0_main[11] || __get_scope_binding_0_get_95scope_95binding(11);

    if (call && (__captured__scope_C_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PL__95assertThisInitialized(self);
  };

  var _PL__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Od__95getPrototypeOf = function (o) {
    var __captured__scope_C_ = __scope_0_main[11] || __get_scope_binding_0_get_95scope_95binding(11);

    __captured__scope_C_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_C_[3](o);
  };

  var _LR_Set = function () {
    var __captured__scope_C_ = __scope_0_main[11] || __get_scope_binding_0_get_95scope_95binding(11);

    _N8__95classCallCheck(this, _LR_Set);

    return _Oc__95possibleConstructorReturn(this, __captured__scope_C_[3](_LR_Set).call(this, null, "<<~", "indianred1"));
  };

  var _MT_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      if (link.fromPort == "e") {
        var nextLink = this.findLinksOutOf("w")[0]; //token.dataStack.pop();

        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
        return nextLink;
      } else if (link.fromPort == "w") {
        if (token.dataStack[token.dataStack.length - 3] == _JS_CompData.PROMPT) {
          var data = token.dataStack.pop();
          var new_v = token.dataStack.pop();
          token.dataStack.pop();
          token.dataStack.push([_JS_CompData.UNIT, _JS_CompData.EMPTY]);
          token.rewriteFlag = _Jb_RewriteFlag.F_DELTA + data[1] + ';' + new_v[0];
          return this.findLinksInto(null)[0];
        }
      }
    }
  };

  var _MU_ = function (token, nextLink) {
    if (token.rewriteFlag.substring(0, 3) == _Jb_RewriteFlag.F_DELTA && nextLink.to == this.key) {
      var string = token.rewriteFlag.substring(3, token.rewriteFlag.length);
      var s = string.split(";");
      var key = s[0];
      var data = s[1];
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.dataStack[token.dataStack.length - 1];
      var weak1 = new _I6_Weak().addToGroup(this.group);
      this.findLinksOutOf("w")[0].changeFrom(weak1.key, "n");
      var mod = this.graph.findNodeByKey(key);
      var weak2 = new _I6_Weak().addToGroup(this.group);
      mod.findLinksOutOf('e')[0].changeFrom(weak2.key, 'n');
      this.findLinksOutOf("e")[0].changeFrom(mod.key, "e");
      this.graph.findNodeByKey(mod.findLinksOutOf('e')[0].to).name = s[1];

      var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

      var con = new _HH_Const(data[0]).addToGroup(wrapper.box);
      new _H2_Link(wrapper.prin.key, con.key, "n", "s").addToGroup(wrapper);
      this.findLinksInto(null)[0].changeTo(wrapper.prin.key, "s");
      this.delete();
      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MV_ = function () {
    return new _LR_Set();
  };

  var _PM__95typeof = function (obj) {
    var __captured__scope_D_ = __scope_0_main[12] || __get_scope_binding_0_get_95scope_95binding(12);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_D_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_D_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_D_[1](obj);
  };

  var _NA__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Oe__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_D_ = __scope_0_main[12] || __get_scope_binding_0_get_95scope_95binding(12);

    if (call && (__captured__scope_D_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PN__95assertThisInitialized(self);
  };

  var _PN__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Of__95getPrototypeOf = function (o) {
    var __captured__scope_D_ = __scope_0_main[12] || __get_scope_binding_0_get_95scope_95binding(12);

    __captured__scope_D_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_D_[3](o);
  };

  var _LU_SetParam = function () {
    var __captured__scope_D_ = __scope_0_main[12] || __get_scope_binding_0_get_95scope_95binding(12);

    _NA__95classCallCheck(this, _LU_SetParam);

    return _Oe__95possibleConstructorReturn(this, __captured__scope_D_[3](_LU_SetParam).call(this, null, "<<~~", "indianred1", null));
  };

  var _MW_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf("e")[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      if (link.fromPort == "e") {
        var nextLink = this.findLinksOutOf("w")[0];
        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
        return nextLink;
      } else if (link.fromPort == "w") {
        if (token.dataStack[token.dataStack.length - 3] == _JS_CompData.PROMPT) {
          var data = token.dataStack.pop();
          var new_v = token.dataStack.pop();
          token.dataStack.pop();
          token.dataStack.push([_JS_CompData.UNIT, _JS_CompData.EMPTY]);
          token.rewriteFlag = _Jb_RewriteFlag.F_DELTA + data[1] + ';' + new_v[0];
          return this.findLinksInto(null)[0];
        }
      }
    }
  };

  var _MX_ = function (token, nextLink) {
    if (token.rewriteFlag.substring(0, 3) == _Jb_RewriteFlag.F_DELTA && nextLink.to == this.key) {
      var string = token.rewriteFlag.substring(3, token.rewriteFlag.length);
      var s = string.split(";");
      var key = s[0];
      var vecData = s[1];
      var weakData = token.dataStack[token.dataStack.length - 1][0];
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var vec = this.graph.findNodeByKey(key);
      vec.name = vecData;
      vec.text = vecData;

      var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

      var con = new _HH_Const(weakData).addToGroup(wrapper.box);
      new _Hy_Contract(wrapper.prin.key, con.key, "n", "s").addToGroup(wrapper);
      this.findLinksInto(null)[0].changeTo(wrapper.prin.key, "s");
      var nextNode = this.graph.findNodeByKey(this.findLinksOutOf("e")[0].to);
      nextNode.delete();
      this.delete();
      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MY_ = function () {
    return new _LU_SetParam();
  };

  var _PG__95typeof = function (obj) {
    var __captured__scope_A_ = __scope_0_main[9] || __get_scope_binding_0_get_95scope_95binding(9);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_A_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_A_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_A_[1](obj);
  };

  var _N3__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _OY__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_A_ = __scope_0_main[9] || __get_scope_binding_0_get_95scope_95binding(9);

    if (call && (__captured__scope_A_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PH__95assertThisInitialized(self);
  };

  var _PH__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _OZ__95getPrototypeOf = function (o) {
    var __captured__scope_A_ = __scope_0_main[9] || __get_scope_binding_0_get_95scope_95binding(9);

    __captured__scope_A_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_A_[3](o);
  };

  var _LK_Dep = function () {
    var __captured__scope_A_ = __scope_0_main[9] || __get_scope_binding_0_get_95scope_95binding(9);

    _N3__95classCallCheck(this, _LK_Dep);

    return _OY__95possibleConstructorReturn(this, __captured__scope_A_[3](_LK_Dep).call(this, null, 'p', "mediumpurple1"));
  };

  var _MO_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      if (token.dataStack[token.dataStack.length - 2] == _JS_CompData.PROMPT) {
        var data = token.dataStack.pop();
        token.dataStack.pop();
        token.dataStack.push([data[0], _JS_CompData.EMPTY]);
        token.rewriteFlag = _Jb_RewriteFlag.F_DEP;
        return this.findLinksInto(null)[0];
      }
    }
  };

  var _MP_ = function (token, nextLink) {
    if (nextLink.to == this.key && token.rewriteFlag == _Jb_RewriteFlag.F_DEP) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.dataStack[token.dataStack.length - 1];

      if (_JR_.isNumber(data[0]) || typeof data[0] === "boolean") {
        var outLink = this.findLinksOutOf(null)[0];
        var weak = new _I6_Weak(outLink.text).addToGroup(this.group);
        outLink.changeFrom(weak.key, "n");

        var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

        var newConst = new _HH_Const(data[0]).addToGroup(wrapper.box);
        new _H2_Link(wrapper.prin.key, newConst.key, "n", "s").addToGroup(wrapper);
        nextLink.changeTo(wrapper.prin.key, "s");
        this.delete();
        token.rewrite = true;
      }

      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _MQ_ = function () {
    return new _LK_Dep();
  };

  var _PI__95typeof = function (obj) {
    var __captured__scope_B_ = __scope_0_main[10] || __get_scope_binding_0_get_95scope_95binding(10);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_B_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_B_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_B_[1](obj);
  };

  var _N5__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Oa__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_B_ = __scope_0_main[10] || __get_scope_binding_0_get_95scope_95binding(10);

    if (call && (__captured__scope_B_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PJ__95assertThisInitialized(self);
  };

  var _PJ__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Ob__95getPrototypeOf = function (o) {
    var __captured__scope_B_ = __scope_0_main[10] || __get_scope_binding_0_get_95scope_95binding(10);

    __captured__scope_B_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_B_[3](o);
  };

  var _LN_Deref = function () {
    var __captured__scope_B_ = __scope_0_main[10] || __get_scope_binding_0_get_95scope_95binding(10);

    _N5__95classCallCheck(this, _LN_Deref);

    return _Oa__95possibleConstructorReturn(this, __captured__scope_B_[3](_LN_Deref).call(this, null, "d", "mediumpurple1"));
  };

  var _MR_ = function (token, link) {
    if (link.to == this.key) return this.findLinksOutOf(null)[0];else if (link.from == this.key) return this.findLinksInto(null)[0];
  };

  var _MS_ = function () {
    return new _LN_Deref();
  };

  var _NZ__95typeof = function (obj) {
    var __captured__scope_N_ = __scope_0_main[22] || __get_scope_binding_0_get_95scope_95binding(22);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_N_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_N_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_N_[1](obj);
  };

  var _Kh__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ls__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_N_ = __scope_0_main[22] || __get_scope_binding_0_get_95scope_95binding(22);

    if (call && (__captured__scope_N_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Ox__95assertThisInitialized(self);
  };

  var _Ox__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _IN_Prop = function () {
    _Kh__95classCallCheck(this, _IN_Prop);

    return _Ls__95possibleConstructorReturn(this, _KM_(_IN_Prop).call(this, null, "s", "indianred1"));
  };

  var _IO_ = function (token, link) {
    if (link.to == this.key) {
      if (token.dataStack[token.dataStack.length - 1] == _JS_CompData.PROMPT) {
        token.dataStack.pop();
        token.dataStack.push([false, _JS_CompData.EMPTY]);
        token.rewriteFlag = _Jb_RewriteFlag.F_PROP;
        token.forward = false;
        token.machine.startPropagation();
        return link;
      }
    }
  };

  var _IP_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_PROP && nextLink.to == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.machine.hasUpdate;
      token.dataStack.pop();
      token.dataStack.push([data, _JS_CompData.EMPTY]);

      var wrapper = _Ha_BoxWrapper.create().addToGroup(this.group);

      var con = new _HH_Const(data).addToGroup(wrapper.box);
      new _H2_Link(wrapper.prin.key, con.key, "n", "s").addToGroup(wrapper);
      nextLink.changeTo(wrapper.prin.key, "s");
      this.delete();
      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _IQ_ = function () {
    return new _IN_Prop();
  };

  var _Mi__95typeof = function (obj) {
    var __captured__scope_3_ = __scope_0_main[2] || __get_scope_binding_0_get_95scope_95binding(2);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_3_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_3_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_3_[1](obj);
  };

  var _Ko__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Kp__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_3_ = __scope_0_main[2] || __get_scope_binding_0_get_95scope_95binding(2);

    if (call && (__captured__scope_3_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Mj__95assertThisInitialized(self);
  };

  var _Mj__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Kq__95get = function (target, property, receiver) {
    var __captured__scope_3_ = __scope_0_main[2] || __get_scope_binding_0_get_95scope_95binding(2);

    if (typeof Reflect !== "undefined" && Reflect.get) {
      __captured__scope_3_[3] = Reflect.get;
    } else {
      __captured__scope_3_[3] = function _get(target, property, receiver) {
        var base = _Ng__95superPropBase(target, property);

        if (!base) return;
        var desc = Object.getOwnPropertyDescriptor(base, property);

        if (desc.get) {
          return desc.get.call(receiver);
        }

        return desc.value;
      };
    }

    return __captured__scope_3_[3](target, property, receiver || target);
  };

  var _Ng__95superPropBase = function (object, property) {
    while (!Object.prototype.hasOwnProperty.call(object, property)) {
      object = _KM_(object);
      if (object === null) break;
    }

    return object;
  };

  var _NO__95typeof = function (obj) {
    var __captured__scope_H_ = __scope_0_main[16] || __get_scope_binding_0_get_95scope_95binding(16);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_H_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_H_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_H_[1](obj);
  };

  var _KU__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Li__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_H_ = __scope_0_main[16] || __get_scope_binding_0_get_95scope_95binding(16);

    if (call && (__captured__scope_H_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _On__95assertThisInitialized(self);
  };

  var _On__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Hl_Mod = function () {
    var _this;

    _KU__95classCallCheck(this, _Hl_Mod);

    _this = _Li__95possibleConstructorReturn(this, _KM_(_Hl_Mod).call(this, null, "M", "indianred1"));

    _this.graph.machine.cells.push(_this.key);

    return _this;
  };

  var _Hm_ = function (token, link) {
    if (link.to == this.key) {
      return this.findLinksOutOf("w")[0];
    } else if (link.from == this.key && link.fromPort == "w") {
      var data = token.dataStack.pop();
      token.dataStack.push([data[0], this.key]);
      return this.findLinksInto(null)[0];
    } else if (link.from == this.key && link.fromPort == "e") {
      token.machine.newValues.set(this.key, token.dataStack[token.dataStack.length - 1][0]);
      token.delete();
      return null;
    }
  };

  var _Hn_ = function (data) {
    var leftLink = this.findLinksOutOf("w")[0];

    if (_JR_.isNumber(data) || typeof data === "boolean") {
      var value = this.graph.findNodeByKey(leftLink.to);
      var oldData = value.name;
      value.text = data;
      value.name = data;
      return oldData;
    }
  };

  var _Ho_ = function () {
    var mod = new _Hl_Mod();
    return mod;
  };

  var _Ip_Ref = function () {
    var _this;

    _Ko__95classCallCheck(this, _Ip_Ref);

    _this = _Kp__95possibleConstructorReturn(this, _KM_(_Ip_Ref).call(this, 'diamond', '', "indianred1"));
    _this.width = ".3";
    _this.height = ".3";
    return _this;
  };

  var _Iq_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.dataStack.push(_JS_CompData.PROMPT);
      return nextLink;
    } else if (link.from == this.key) {
      var data = token.dataStack.pop();
      token.dataStack.pop();
      token.dataStack.push(data);
      token.rewriteFlag = _Jb_RewriteFlag.F_MOD;
      return this.findLinksInto(null)[0];
    }
  };

  var _Ir_ = function (token, nextLink) {
    if (nextLink.to == this.key && token.rewriteFlag == _Jb_RewriteFlag.F_MOD) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var data = token.dataStack.pop();
      var mod = new _Hl_Mod().addToGroup(this.group);
      var con = new _HH_Const(data[0]).addToGroup(this.group);
      new _H2_Link(mod.key, con.key, "w", "s").addToGroup(this.group);
      var outLink = this.findLinksOutOf(null)[0];
      outLink.changeFrom(mod.key, "e");
      var inLink = this.findLinksInto(null)[0];
      inLink.changeTo(mod.key, "s");
      this.delete();
      token.rewrite = true;
      token.dataStack.push([data[0], mod.key]);
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Is_ = function () {
    var __captured__scope_3_ = __scope_0_main[2] || __get_scope_binding_0_get_95scope_95binding(2);

    var inLink = this.findLinksInto(null)[0];
    var outLink = this.findLinksOutOf(null)[0];

    if (outLink != null && inLink != null) {
      inLink.changeTo(outLink.to, outLink.toPort);
    }

    __captured__scope_3_[3](_KM_(_Ip_Ref.prototype), "delete", this).call(this);
  };

  var _It_ = function () {
    return new _Ip_Ref();
  };

  var _Kn__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Ly__95possibleConstructorReturn = function (self, call) {
    if (call && (_Nf_(call) === "object" || typeof call === "function")) {
      return call;
    }

    return _P3__95assertThisInitialized(self);
  };

  var _P3__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Im_Prov = function (name) {
    _Kn__95classCallCheck(this, _Im_Prov);

    return _Ly__95possibleConstructorReturn(this, _KM_(_Im_Prov).call(this, null, "¡", name));
  };

  var _In_ = function (token, link) {
    if (link.to == this.key) {
      return this.findLinksOutOf(null)[0];
    } else if (link.from == this.key) {
      var data = token.dataStack.pop();
      token.dataStack.push([data[0], _JS_CompData.DEP]);
      token.forward = false;
      return this.findLinksInto(null)[0];
    }
  };

  var _Io_ = function () {
    var newNode = new _Im_Prov(this.name);
    newNode.width = this.width;
    newNode.height = this.height;
    return newNode;
  };

  var _NP__95typeof = function (obj) {
    var __captured__scope_I_ = __scope_0_main[17] || __get_scope_binding_0_get_95scope_95binding(17);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_I_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_I_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_I_[1](obj);
  };

  var _KV__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lj__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_I_ = __scope_0_main[17] || __get_scope_binding_0_get_95scope_95binding(17);

    if (call && (__captured__scope_I_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Oo__95assertThisInitialized(self);
  };

  var _Oo__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Hp_Pair = function () {
    _KV__95classCallCheck(this, _Hp_Pair);

    return _Lj__95possibleConstructorReturn(this, _KM_(_Hp_Pair).call(this, null, ",", "mediumpurple1"));
  };

  var _Hq_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink;

      if (token.dataStack[token.dataStack.length - 1] == _JS_CompData.PR) {
        token.dataStack.pop();
        nextLink = this.findLinksOutOf("e")[0];
      } else if (token.dataStack[token.dataStack.length - 1] == _JS_CompData.PL) {
        token.dataStack.pop();
        nextLink = this.findLinksOutOf('w')[0];
      } else {
        token.dataStack.push(_JS_CompData.PE);
        token.dataStack.push(_JS_CompData.PROMPT);
        nextLink = this.findLinksOutOf("e")[0];
        ;
      }

      token.rewriteFlag = _Jb_RewriteFlag.F_PAIR;
      return nextLink;
    } else if (link.from == this.key && link.fromPort == "e") {
      var nextLink;

      if (token.dataStack[token.dataStack.length - 2] == _JS_CompData.PE) {
        nextLink = this.findLinksOutOf("w")[0];
        token.dataStack.push(_JS_CompData.PROMPT);
        token.forward = true;
      } else {
        nextLink = this.findLinksInto("s")[0];
        token.dataStack.push(_JS_CompData.PR);
        token.forward = false;
      }

      return nextLink;
    } else if (link.from == this.key && link.fromPort == "w") {
      if (token.dataStack[token.dataStack.length - 3] == _JS_CompData.PE) {
        var l = token.dataStack.pop();
        var r = token.dataStack.pop();
        token.dataStack.pop();
        token.dataStack.pop();
        var result = "(" + l[0] + "," + r[0] + ")";
        var type = l[1] == _JS_CompData.EMPTY && r[1] == _JS_CompData.EMPTY ? _JS_CompData.EMPTY : _JS_CompData.DEP;
        token.dataStack.push([result, type]);
      } else {
        token.dataStack.push(_JS_CompData.PL);
      }

      return this.findLinksInto(null)[0];
      ;
    }
  };

  var _Hr_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_PAIR && nextLink.from == this.key) {
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var prev = this.graph.findNodeByKey(this.findLinksInto("s")[0].from);

      if (prev instanceof _Hy_Contract) {
        if (nextLink.from == this.key) {
          var link = token.boxStack.pop();
          var inLinks = prev.findLinksInto(null);

          if (inLinks.length == 1) {// this will not happen as the C-node should have taken care of it
          } else {
            var leftArm = this.findLinksOutOf('w')[0];
            var left = this.graph.findNodeByKey(leftArm.to);
            var rightArm = this.findLinksOutOf('e')[0];
            var right = this.graph.findNodeByKey(rightArm.to);
            var newPair = new _Hp_Pair().addToGroup(this.group);
            var conL = new _Hy_Contract(left.name).addToGroup(this.group);
            var conR = new _Hy_Contract(right.name).addToGroup(this.group);
            leftArm.changeTo(conL.key, "s");
            rightArm.changeTo(conR.key, "s");
            new _H2_Link(conL.key, left.key, "n", "s").addToGroup(leftArm.group);
            new _H2_Link(conR.key, right.key, "n", "s").addToGroup(rightArm.group);
            new _H2_Link(newPair.key, conL.key, "w", "s").addToGroup(newPair.group);
            new _H2_Link(newPair.key, conR.key, "e", "s").addToGroup(newPair.group);
            var prevLink = prev.findLinksOutOf(null)[0];
            prevLink.changeTo(newPair.key, "s");
            link.changeTo(this.key, "s");
          }

          token.rewriteFlag = _Jb_RewriteFlag.F_PAIR;
          token.rewrite = true;
          return nextLink;
        }
      } else if (prev instanceof _IV_PatTuple) {
        this.findLinksOutOf("e")[0].changeFrom(prev.findLinksInto("e")[0].from, prev.findLinksInto("e")[0].fromPort);
        this.findLinksOutOf("w")[0].changeFrom(prev.findLinksInto("w")[0].from, prev.findLinksInto("w")[0].fromPort);
        this.delete();
        prev.delete();
        token.rewrite = true;
        return nextLink;
      }

      token.rewrite = true;
      return nextLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Hs_ = function () {
    return new _Hp_Pair();
  };

  var _Ne__95typeof = function (obj) {
    var __captured__scope_R_ = __scope_0_main[26] || __get_scope_binding_0_get_95scope_95binding(26);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_R_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_R_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_R_[1](obj);
  };

  var _Km__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lx__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_R_ = __scope_0_main[26] || __get_scope_binding_0_get_95scope_95binding(26);

    if (call && (__captured__scope_R_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _P2__95assertThisInitialized(self);
  };

  var _P2__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _NS__95typeof = function (obj) {
    var __captured__scope_K_ = __scope_0_main[19] || __get_scope_binding_0_get_95scope_95binding(19);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_K_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_K_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_K_[1](obj);
  };

  var _KY__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Lm__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_K_ = __scope_0_main[19] || __get_scope_binding_0_get_95scope_95binding(19);

    if (call && (__captured__scope_K_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _Or__95assertThisInitialized(self);
  };

  var _Or__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _I2_VectorMatch = function () {
    var _this;

    _KY__95classCallCheck(this, _I2_VectorMatch);

    _this = _Lm__95possibleConstructorReturn(this, _KM_(_I2_VectorMatch).call(this, null, "", "indianred1", null));
    _this.totalLength = 0;
    return _this;
  };

  var _I3_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.rewriteFlag = _Jb_RewriteFlag.F_PROJ;
      return nextLink;
    }
  };

  var _I4_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_PROJ && nextLink.from == this.key) {
      // find the link connected to the current node
      var prevLink = this.findLinksInto(null)[0];
      var wrapper = this.group;
      var inLink = this.findLinksInto(null)[0]; // create the dot operation which takes a basis vector as the rhs argument

      var idx = parseInt(this.text.substring(1));

      var vec = _I8_Vector.createBasis(this.totalLength, idx).addToGroup(wrapper);

      var dot = _IY_SymBinOp.createDot().addToGroup(wrapper);

      dot.subType = _Ju_BinOpType.SymDot;
      new _H2_Link(dot.key, vec.key, "e", "s").addToGroup(wrapper); // point previous link to the dot op

      prevLink.changeTo(dot.key, 's'); // find the node pointed to by the vector match

      var nextNextNode = this.graph.findNodeByKey(this.findLinksOutOf(null)[0].to);
      var oldNextNode = Object.assign(Object.create(Object.getPrototypeOf(nextNextNode)), nextNextNode); // check if the next node is a promo

      if (nextNextNode instanceof _HS_Promo) {
        // if so, then skip it
        nextNextNode = this.graph.findNodeByKey(nextNextNode.findLinksOutOf(null)[0].to);
        var inLinks = oldNextNode.findLinksInto(null); // save here

        var ownKey = this.key;
        inLinks.map(function (inLink) {
          if (inLink.from == ownKey) {
            new _H2_Link(inLink.from, nextNextNode.key, "n", "s").addToGroup(wrapper);
            inLink.delete();
          }
        });
      } // create a link from the dot node to the node pointed to by the vector match


      new _H2_Link(dot.key, nextNextNode.key, "w", "s").addToGroup(wrapper);
      inLink.changeTo(dot.key, 's'); // if there are no more links leading into the promo node, remove it

      if (oldNextNode.findLinksInto(null).length == 0) {
        oldNextNode.delete();
      }

      this.delete();
      token.rewrite = true;
      token.forward = true;
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      return inLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _I5_ = function () {
    var newNode = new _I2_VectorMatch();
    newNode.text = this.text;
    return newNode;
  };

  var _If_GAbs = function () {
    _Km__95classCallCheck(this, _If_GAbs);

    return _Lx__95possibleConstructorReturn(this, _KM_(_If_GAbs).call(this, null, "abs", "indianred1"));
  };

  var _Ig_ = function (token, link) {
    if (link.to == this.key) {
      var nextLink = this.findLinksOutOf(null)[0];
      token.rewriteFlag = _Jb_RewriteFlag.F_GABS;
      return nextLink;
    }
  };

  var _Ih_ = function (token, nextLink) {
    if (token.rewriteFlag == _Jb_RewriteFlag.F_GABS && nextLink.from == this.key) {
      // find the link connected to the current node
      var prevLink = this.findLinksInto(null)[0]; // link the graph inside graph abstraction to a weak node

      var nextGraphLink = this.findLinksOutOf(null)[0];
      var absGraph = this.graph.findNodeByKey(nextGraphLink.to);
      var group = this.group; // create a weak contraction node if it doesn't not already exist

      if (!(absGraph instanceof _Hy_Contract)) {
        var weak = new _I6_Weak(absGraph.name).addToGroup(this.group);
        new _H2_Link(weak.key, absGraph.key, "n", "s").addToGroup(this.group);
      } // create the vector of provisional constants


      var provs = this.searchForProvs(this, group, new Map(), new Array()); // tensorify the provisional constants and return the contract to the vector

      var con = this.tensorify(provs, group); // point the previous link to the contract		

      prevLink.changeTo(con.key, 's'); // delete abs node

      this.delete(); // if it's a contract and there is only one link into it

      if (absGraph instanceof _Hy_Contract && absGraph.findLinksInto(null).length == 1) {
        // one of the links is the current one
        var newAbsGraph = this.graph.findNodeByKey(absGraph.findLinksOutOf(null)[0].to);
        var link = absGraph.findLinksInto(null)[0];
        link.changeTo(newAbsGraph.key, link.toPort);
        absGraph.delete();
      }

      token.rewrite = true;
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY; // make sure to go back to the previous promo

      return prevLink;
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Ii_ = function (provs, group) {
    var l = 0;
    var values = new Array();
    var vecMatchs = [];

    var _arr = Array.from(provs);

    for (var _i = 0; _i < _arr.length; _i++) {
      var prov = _arr[_i];
      provs.splice(provs.indexOf(prov), 1); // create a vector match and link it as a parameter to the new abstraction

      var vecMatch = new _I2_VectorMatch().addToGroup(group);
      vecMatch.text = "P" + l;
      vecMatchs.push(vecMatch);
      var inLink = prov.findLinksInto(null)[0];
      new _H2_Link(inLink.from, vecMatch.key, inLink.fromPort, "s");
      values.push(prov.name); // create a weak contraction and make it point to prov (dettached)

      var weak = new _I6_Weak(prov.name).addToGroup(group);

      if (prov instanceof _Hy_Contract) {
        // find the content
        var provContent = this.searchForProvContent(prov);
        weak.text = "Ɔ0";
        provContent.findLinksInto(null)[0].changeFrom(weak.key, "n");
      } else {
        weak.text = "Ɔ0";
        prov.findLinksInto(null)[0].changeFrom(weak.key, "n");
      }

      l++;
    }

    var vecWrapper = _Ha_BoxWrapper.create().addToGroup(group);

    var vec = _I8_Vector.create(values).addToGroup(vecWrapper.box);

    var con = new _Hy_Contract(vec.text).addToGroup(vecWrapper.box);
    new _H2_Link(con.key, vec.key, "n", "s").addToGroup(vecWrapper.box);
    new _H2_Link(vecWrapper.prin.key, con.key, "n", "s").addToGroup(vecWrapper.group);

    for (var i = 0; i < l; i++) {
      new _H2_Link(vecMatchs[i].key, vecWrapper.prin.key, "n", "s").addToGroup(group);
      vecMatchs[i].totalLength = l;
    }

    return con;
  };

  var _Ij_ = function (node) {
    var nextNode = node.graph.findNodeByKey(node.findLinksOutOf(null)[0].to);

    if (node instanceof _Im_Prov) {
      node.findLinksInto(null)[0].changeTo(nextNode.key);
      node.delete();
      return nextNode;
    } else if (node instanceof _Hy_Contract) {
      node.findLinksInto(null)[0].changeTo(nextNode.key);
      node.delete();
      return this.searchForProvContent(nextNode);
    }

    {
      return this.searchForProvContent(nextNode);
    }
  };

  var _Ik_ = function (node, group, map, visitedNodes) {
    var _this = this;

    if (node instanceof _Im_Prov) {
      // return the node if it's what we're looking for
      return [node];
    } else if (visitedNodes.indexOf(node.key) != -1) {
      return [];
    } else {
      visitedNodes.push(node.key); // the current node may have multiple nodes

      var links = node.findLinksOutOf(null);

      if (links.length == 0) {
        // if there are no links, return an empty array
        return [];
      } else if (node instanceof _Hy_Contract) {
        // check if it's a contract first
        var nextProvs = this.searchForProvs(node.graph.findNodeByKey(links[0].to), group, map, visitedNodes);

        if (nextProvs.length > 0) {
          return nextProvs.map(function (nextProv) {
            if (nextProv instanceof _Hy_Contract) {
              return nextProv;
            } else {
              if (!map.get(nextProv.key)) {
                var newCon = new _Hy_Contract(nextProv.name).addToGroup(group);
                nextProv.findLinksInto(null)[0].changeTo(newCon.key);
                new _H2_Link(newCon.key, nextProv.key, "n", "s").addToGroup(group);
                map.set(nextProv.key, newCon.key);
                return newCon;
              } else {
                return _this.graph.findNodeByKey(map.get(nextProv.key));
              }
            }
          });
        } else {
          return [];
        }
      } else if (links.length >= 2) {
        // if there are multiple links, return all
        var nodes = [];

        for (var i = 0; i < links.length; i++) {
          var link = links[i]; // this is for lambda abstractions that point to themselves

          if (link.to != link.from) {
            var nextProvs = this.searchForProvs(node.graph.findNodeByKey(link.to), group, map, visitedNodes);
            nextProvs.forEach(function (nextProv) {
              if (!nodes.some(function (node) {
                return node.key == nextProv.key;
              })) {
                nodes.push(nextProv);
              }
            });
          }
        }

        return nodes;
      } else {
        return this.searchForProvs(node.graph.findNodeByKey(links[0].to), group, map, visitedNodes);
      }
    }
  };

  var _Il_ = function () {
    return new _If_GAbs();
  };

  var _PO__95typeof = function (obj) {
    var __captured__scope_E_ = __scope_0_main[13] || __get_scope_binding_0_get_95scope_95binding(13);

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      __captured__scope_E_[1] = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      __captured__scope_E_[1] = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return __captured__scope_E_[1](obj);
  };

  var _NF__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _Og__95possibleConstructorReturn = function (self, call) {
    var __captured__scope_E_ = __scope_0_main[13] || __get_scope_binding_0_get_95scope_95binding(13);

    if (call && (__captured__scope_E_[1](call) === "object" || typeof call === "function")) {
      return call;
    }

    return _PP__95assertThisInitialized(self);
  };

  var _PP__95assertThisInitialized = function (self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  };

  var _Oh__95getPrototypeOf = function (o) {
    var __captured__scope_E_ = __scope_0_main[13] || __get_scope_binding_0_get_95scope_95binding(13);

    __captured__scope_E_[3] = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return __captured__scope_E_[3](o);
  };

  var _La_Fold = function () {
    var __captured__scope_E_ = __scope_0_main[13] || __get_scope_binding_0_get_95scope_95binding(13);

    _NF__95classCallCheck(this, _La_Fold);

    return _Og__95possibleConstructorReturn(this, __captured__scope_E_[3](_La_Fold).call(this, null, "F", "indianred1", null));
  };

  var _MZ_ = function (token, link) {
    if (link.to == this.key) {
      token.dataStack.push(_JS_CompData.PROMPT);
      return this.findLinksOutOf("e")[0];
    } else if (link.from == this.key && link.fromPort == "e") {
      token.dataStack.push(_JS_CompData.PROMPT);
      token.forward = true;
      return this.findLinksOutOf("w")[0];
    } else if (link.from == this.key && link.fromPort == "w") {
      if (token.dataStack[token.dataStack.length - 1][0] == _JS_CompData.LAMBDA) {
        token.dataStack.pop();
        var vec = JSON.parse(token.dataStack.pop()[0]);
        token.rewriteFlag = _Jb_RewriteFlag.F_FOLD + '(' + vec.length + ')';
        return this.findLinksInto(null)[0];
      }
    }
  };

  var _Ma_ = function (token, nextLink) {
    if (token.rewriteFlag.substring(0, 3) == _Jb_RewriteFlag.F_FOLD && nextLink.to == this.key) {
      var n = parseInt(token.rewriteFlag.substring(4, token.rewriteFlag.length - 1));
      token.rewriteFlag = _Jb_RewriteFlag.EMPTY;
      var left = this.graph.findNodeByKey(this.findLinksOutOf("w")[0].to);
      var right = this.graph.findNodeByKey(this.findLinksOutOf("e")[0].to);

      if (n == 0) {
        var oldGroup = right.group;
        right.group.moveOut();
        oldGroup.deleteAndPreserveLink();
        var weak = new _I6_Weak(left.name).addToGroup(this.group);
        this.findLinksOutOf("w")[0].changeFrom(weak.key, 'n');
        var into = this.findLinksInto(null)[0];
        var east = this.findLinksOutOf("e")[0];
        east.changeFrom(into.from, into.fromPort);
        this.delete();
        token.rewrite = true;
        token.forward = true;
        return east;
      } else {
        var term = this.unfolding(n, n, right, this.group);
        new _H2_Link(term.auxs[0].key, left.key, 'n', 's').addToGroup(this.group);
        var into = this.findLinksInto(null)[0];
        into.changeTo(term.prin.key, "s");
        this.delete();
        token.rewrite = true;
        token.forward = true;
        return into;
      }
    } else if (token.rewriteFlag == _Jb_RewriteFlag.EMPTY) {
      token.rewrite = false;
      return nextLink;
    }
  };

  var _Mb_ = function (size, n, right, group) {
    // create the main app
    var app = new _IB_App().addToGroup(group); // create the lhs and rhs of the app
    // app lhs

    var lhs = new _IB_App().addToGroup(group);
    var der = new _IL_Der().addToGroup(group);
    new _H2_Link(der.key, lhs.key, "n", "s").addToGroup(group); // create the lhs and rhs of the lhs 
    // lhs lhs: create a der so we can link the result of one unfold

    var leftDer = new _IL_Der().addToGroup(group); // lhs rhs: create the basis for the fold

    var vecWrapper = _Ha_BoxWrapper.create().addToGroup(group);

    var vec = _I8_Vector.createBasis(size, size - n).addToGroup(vecWrapper.box);

    new _H2_Link(vecWrapper.prin.key, vec.key, "n", "s").addToGroup(vecWrapper.group);
    var vecDer = new _IL_Der().addToGroup(group);
    new _H2_Link(vecDer.key, vecWrapper.prin.key, "n", "s").addToGroup(group); // add links for the lhs of the app

    new _H2_Link(lhs.key, leftDer.key, "w", "s").addToGroup(group);
    new _H2_Link(lhs.key, vecDer.key, "e", "s").addToGroup(group); // app rhs

    var rhs;
    var auxs = new Array(); // set up the app, depending on length of the vector we're folding over

    if (n == 1) {
      if (right instanceof _Hy_Contract) {
        var newRight = this.graph.findNodeByKey(right.findLinksOutOf(null)[0].to);
        newRight = newRight.copy().addToGroup(group);
        rhs = newRight;
      } else {
        right.group.changeToGroup(group); // change the rhs of the app

        rhs = right;
      } // add new auxiliary


      auxs.push(leftDer);
    } else {
      // create a new rhs, by recursively calling this function
      var term = this.unfolding(size, n - 1, right, group);
      rhs = term.prin; // create and link contract

      var con = new _Hy_Contract(term.auxs[0].name).addToGroup(group);
      new _H2_Link(leftDer.key, con.key, "n", "s").addToGroup(group);
      new _H2_Link(term.auxs[0].key, con.key, "n", "s").addToGroup(group); // add new auxiliary

      auxs = auxs.concat(con);
    } // add links to lhs and rhs from app


    new _H2_Link(app.key, der.key, "w", "s").addToGroup(group);
    new _H2_Link(app.key, rhs.key, "e", "s").addToGroup(group); // return term

    return new _Hi_Term(app, auxs).addToGroup(group);
  };

  var _Mc_ = function () {
    return new _La_Fold();
  };

  var _Kt__95classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  var _J8_GC = function (graph) {
    _Kt__95classCallCheck(this, _J8_GC);

    this.graph = graph;
    this.noMore = false;
  };

  var _Gl_ = _J8_GC.prototype;

  var _J5_ = function () {
    /*
            do {
            	this.noMore = true;
            	this.collectInGroup(this.graph.child);
            } while (!this.noMore)
            */
  };

  var _J6_ = function (group) {
    var _arr = Array.from(group.nodes);

    for (var _i = 0; _i < _arr.length; _i++) {
      var node = _arr[_i];

      if (node instanceof _I6_Weak || node instanceof _Hy_Contract && node.findLinksInto(null).length == 0) {
        var link = node.findLinksOutOf(null)[0];
        var nextNode = this.graph.findNodeByKey(link.to);

        if (!(nextNode instanceof _IE_Abs && link.toPort == "w")) {
          this.noMore = false;
          this.collectFromBottom(node);
        }
      } else if (node instanceof _HM_Group) {
        this.collectInGroup(node);
      }
    }
  };

  var _J7_ = function (node) {
    if (node instanceof _Hy_Contract && node.findLinksInto(null).length != 0) {} else if (node instanceof _HS_Promo || node instanceof _LF_Recur) {
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = node.group.auxs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var aux = _step.value;
          this.collectFromBottom(aux);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return != null) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      node.group.delete();
    } else {
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = node.findLinksOutOf(null)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var link = _step2.value;
          this.collectFromBottom(this.graph.findNodeByKey(link.to));
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }

      node.delete();
    }
  };

  var _JO_GoIMachine = function () {
    _Lc__95classCallCheck(this, _JO_GoIMachine);

    this.graph = new _J0_Graph(this);
    _JR_.graph = this.graph; // cheating!

    this.token = new _J4_MachineToken(this);
    this.gc = new _J8_GC(this.graph);
    this.count = 0;
    this.token.isMain = true;
    this.evalTokens = [];
    this.cells = [];
    this.evaluating = false;
    this.newValues = new Map();
    this.hasUpdate = false;
    this.play = false;
    this.playing = false;
    this.finished = false;
  };

  var _Gr_ = _JO_GoIMachine.prototype;

  var _J9_ = function () {
    return this.playing;
  };

  var _JA_ = function (playValue) {
    this.play = playValue;
  };

  var _JB_ = function () {
    return this.playing;
  };

  var _JC_ = function (playingValue) {
    this.playing = playingValue;
  };

  var _JD_ = function () {
    return this.finished;
  };

  var _JE_ = function (finishedValue) {
    this.finished = finishedValue;
  };

  var _JF_ = function (source) {
    var lexer = new _Ku_Lexer(source + '\0');
    var parser = new _Kw_Parser(lexer);
    var ast = parser.parse(); // init

    this.graph.clear();
    this.token.reset();
    this.count = 0;
    this.evalTokens = [];
    this.cells = [];
    this.readyEvalTokens = 0;
    this.evaluating = false;
    this.newValues.clear();
    this.hasUpdate = false; // create graph

    var start = new _H3_Start().addToGroup(this.graph.child);
    var term = this.toGraph(ast, this.graph.child);
    new _H2_Link(start.key, term.prin.key, "n", "s").addToGroup(this.graph.child);
    this.deleteVarNode(this.graph.child);
  };

  var _JG_ = function (ast, group) {
    var graph = this.graph;

    if (ast instanceof _Ky_Identifier) {
      var v = new _Id_Var(ast.name).addToGroup(group);
      return new _Hi_Term(v, [v]);
    } else if (ast instanceof _Kz_Abstraction) {
      var params;
      var paramUsed;
      var auxNodes;

      if (ast.pattern.type == _KB_PatternType.Id) {
        params = [ast.pattern.id1];
        paramUsed = [false];
        auxNodes = [null];
      } else if (ast.pattern.type == _KB_PatternType.Tuple) {
        params = [ast.pattern.id1, ast.pattern.id2];
        paramUsed = [false, false];
        auxNodes = [null, null];
      }

      var wrapper = _Ha_BoxWrapper.create().addToGroup(group);

      var abs = new _IE_Abs().addToGroup(wrapper.box);
      var term = this.toGraph(ast.body, wrapper.box);
      new _H2_Link(wrapper.prin.key, abs.key, "n", "s").addToGroup(wrapper);
      new _H2_Link(abs.key, term.prin.key, "e", "s").addToGroup(abs.group);
      var auxs = Array.from(term.auxs);

      for (var i = 0; i < params.length; i++) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = term.auxs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var _aux = _step.value;

            if (_aux.name == params[i]) {
              paramUsed[i] = true;
              auxNodes[i] = _aux;
              break;
            }
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return != null) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      }

      for (var i = 0; i < params.length; i++) {
        if (paramUsed[i]) {
          auxs.splice(auxs.indexOf(auxNodes[i]), 1);
        } else {
          auxNodes[i] = new _I6_Weak(params[i]).addToGroup(abs.group);
        }
      }

      if (ast.pattern.type == _KB_PatternType.Id) new _H2_Link(auxNodes[0].key, abs.key, "nw", "w", true).addToGroup(abs.group);else if (ast.pattern.type == _KB_PatternType.Tuple) {
        var pattern = new _IV_PatTuple().addToGroup(abs.group);
        new _H2_Link(auxNodes[0].key, pattern.key, "n", "w").addToGroup(abs.group);
        new _H2_Link(auxNodes[1].key, pattern.key, "n", "e").addToGroup(abs.group);
        new _H2_Link(pattern.key, abs.key, "nw", "w", true).addToGroup(abs.group);
      }
      wrapper.auxs = wrapper.createPaxsOnTopOf(auxs);
      return new _Hi_Term(wrapper.prin, wrapper.auxs);
    } else if (ast instanceof _L0_Application) {
      var app = new _IB_App().addToGroup(group); //lhs

      var left = this.toGraph(ast.lhs, group);
      var der = new _IL_Der(left.prin.name).addToGroup(group);
      new _H2_Link(der.key, left.prin.key, "n", "s").addToGroup(group); // rhs

      var right = this.toGraph(ast.rhs, group);
      new _H2_Link(app.key, der.key, "w", "s").addToGroup(group);
      new _H2_Link(app.key, right.prin.key, "e", "s").addToGroup(group);
      return new _Hi_Term(app, _Hi_Term.joinAuxs(left.auxs, right.auxs, group));
    } else if (ast instanceof _L1_Constant) {
      var wrapper = _Ha_BoxWrapper.create().addToGroup(group);

      var constant = new _HH_Const(ast.value).addToGroup(wrapper.box);
      wrapper.prin.name = constant.name;
      new _H2_Link(wrapper.prin.key, constant.key, "n", "s").addToGroup(wrapper);
      return new _Hi_Term(wrapper.prin, wrapper.auxs);
    } else if (ast instanceof _L2_BinaryOp) {
      var binop;
      if (ast instanceof _L6_SymmetricBinaryOp) binop = new _IY_SymBinOp(ast.name).addToGroup(group);else binop = new _Ht_BinOp(ast.name).addToGroup(group);
      binop.subType = ast.type;
      var left = this.toGraph(ast.v1, group);
      var right = this.toGraph(ast.v2, group);
      new _H2_Link(binop.key, left.prin.key, "w", "s").addToGroup(group);
      new _H2_Link(binop.key, right.prin.key, "e", "s").addToGroup(group);
      return new _Hi_Term(binop, _Hi_Term.joinAuxs(left.auxs, right.auxs, group));
    } else if (ast instanceof _L8_UnaryOp) {
      var unop = new _L9_UnOp(ast.name).addToGroup(group);
      unop.subType = ast.type;
      var box = this.toGraph(ast.v1, group);
      new _H2_Link(unop.key, box.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(unop, box.auxs);
    } else if (ast instanceof _LB_IfThenElse) {
      var ifnode = new _LC_If().addToGroup(group);
      var cond = this.toGraph(ast.cond, group);
      var t1 = this.toGraph(ast.t1, group);
      var t2 = this.toGraph(ast.t2, group);
      new _H2_Link(ifnode.key, cond.prin.key, "w", "s").addToGroup(group);
      new _H2_Link(ifnode.key, t1.prin.key, "n", "s").addToGroup(group);
      new _H2_Link(ifnode.key, t2.prin.key, "e", "s").addToGroup(group);
      return new _Hi_Term(ifnode, _Hi_Term.joinAuxs(_Hi_Term.joinAuxs(t1.auxs, t2.auxs, group), cond.auxs, group));
    } else if (ast instanceof _LE_Recursion) {
      var p1 = ast.param; // recur term

      var wrapper = _Ha_BoxWrapper.create().addToGroup(group);

      wrapper.prin.delete();
      var recur = new _LF_Recur().addToGroup(wrapper);
      wrapper.prin = recur;
      var box = this.toGraph(ast.body, wrapper.box);
      wrapper.auxs = wrapper.createPaxsOnTopOf(box.auxs);
      new _H2_Link(recur.key, box.prin.key, "e", "s").addToGroup(wrapper);
      var p1Used = false;
      var auxNode1;

      for (var i = 0; i < wrapper.auxs.length; i++) {
        var aux = wrapper.auxs[i];

        if (aux.name == p1) {
          p1Used = true;
          auxNode1 = this.graph.findNodeByKey(aux.findLinksInto(null)[0].from);
          aux.delete();
          break;
        }
      }

      if (p1Used) {// wrapper.auxs.splice(wrapper.auxs.indexOf(auxNode1), 1);
      } else {
        auxNode1 = new _I6_Weak(p1).addToGroup(wrapper.box);
      }

      new _H2_Link(auxNode1.key, recur.key, "nw", "w", true).addToGroup(wrapper);
      return new _Hi_Term(wrapper.prin, wrapper.auxs);
    } else if (ast instanceof _LH_Tuple) {
      var pair = new _Hp_Pair().addToGroup(group);
      var left = this.toGraph(ast.lhs, group);
      var right = this.toGraph(ast.rhs, group);
      new _H2_Link(pair.key, left.prin.key, "w", "s").addToGroup(group);
      new _H2_Link(pair.key, right.prin.key, "e", "s").addToGroup(group);
      return new _Hi_Term(pair, _Hi_Term.joinAuxs(left.auxs, right.auxs, group));
    } else if (ast instanceof _LI_Cell) {
      var term = this.toGraph(ast.term, group);
      var ref = new _Ip_Ref(term.prin.name).addToGroup(group);
      new _H2_Link(ref.key, term.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(ref, term.auxs);
    } else if (ast instanceof _LJ_Deprecation) {
      var term = this.toGraph(ast.term, group);
      var dep = new _LK_Dep().addToGroup(group);
      new _H2_Link(dep.key, term.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(dep, term.auxs);
    } else if (ast instanceof _LM_Dereference) {
      var term = this.toGraph(ast.term, group);
      var deref = new _LN_Deref().addToGroup(group);
      new _H2_Link(deref.key, term.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(deref, term.auxs);
    } else if (ast instanceof _LP_Change) {
      var param = ast.param;
      var delta = new _IR_Delta().addToGroup(group);
      var term = this.toGraph(ast.body, group);
      var v = new _Id_Var(param).addToGroup(group);
      new _H2_Link(delta.key, v.key, "w", "s").addToGroup(group);
      new _H2_Link(delta.key, term.prin.key, "e", "s").addToGroup(group);
      var auxs = Array.from(term.auxs);
      var p1Used = false;
      var auxNode1;

      for (var i = 0; i < term.auxs.length; i++) {
        var aux = auxs[i];

        if (aux.name == param) {
          p1Used = true;
          auxs.splice(i, 1);
          var con = new _Hy_Contract(aux.name).addToGroup(group);
          new _H2_Link(aux.key, con.key, "n", "s").addToGroup(group);
          new _H2_Link(v.key, con.key, "n", "s").addToGroup(group);
          auxs.push(con);
          break;
        }
      }

      if (!p1Used) auxs.push(v);
      return new _Hi_Term(delta, auxs);
    } else if (ast instanceof _LQ_Assign) {
      var param = ast.param;
      var setn = new _LR_Set().addToGroup(group);
      var term = this.toGraph(ast.body, group);
      var v = new _Id_Var(param).addToGroup(group);
      new _H2_Link(setn.key, v.key, "w", "s").addToGroup(group);
      new _H2_Link(setn.key, term.prin.key, "e", "s").addToGroup(group);
      var auxs = Array.from(term.auxs);
      var p1Used = false;
      var auxNode1;

      for (var i = 0; i < term.auxs.length; i++) {
        var aux = auxs[i];

        if (aux.name == param) {
          p1Used = true;
          auxs.splice(i, 1);
          var con = new _Hy_Contract(aux.name).addToGroup(group);
          new _H2_Link(aux.key, con.key, "n", "s").addToGroup(group);
          new _H2_Link(v.key, con.key, "n", "s").addToGroup(group);
          auxs.push(con);
          break;
        }
      }

      if (!p1Used) auxs.push(v);
      return new _Hi_Term(setn, auxs);
    } else if (ast instanceof _LT_AssignParam) {
      var param = ast.param;
      var setn = new _LU_SetParam().addToGroup(group);
      var term = this.toGraph(ast.body, group);
      var v = new _Id_Var(param).addToGroup(group);
      new _H2_Link(setn.key, v.key, "w", "s").addToGroup(group);
      new _H2_Link(setn.key, term.prin.key, "e", "s").addToGroup(group);
      var auxs = Array.from(term.auxs);
      var p1Used = false;
      var auxNode1;

      for (var i = 0; i < term.auxs.length; i++) {
        var aux = auxs[i];

        if (aux.name == param) {
          p1Used = true;
          auxs.splice(i, 1);
          var con = new _Hy_Contract(aux.name).addToGroup(group);
          new _H2_Link(aux.key, con.key, "n", "s").addToGroup(group);
          new _H2_Link(v.key, con.key, "n", "s").addToGroup(group);
          auxs.push(con);
          break;
        }
      }

      if (!p1Used) auxs.push(v);
      return new _Hi_Term(setn, auxs);
    } else if (ast instanceof _LW_Propagation) {
      var prop = new _IN_Prop().addToGroup(group);
      return new _Hi_Term(prop, [], []);
    } else if (ast instanceof _LX_ProvisionalConstant) {
      var term = this.toGraph(ast.term, group);
      var prov = new _Im_Prov(term.prin.name).addToGroup(group);
      new _H2_Link(prov.key, term.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(prov, term.auxs);
    } else if (ast instanceof _LY_GraphAbstraction) {
      var gabs = new _If_GAbs().addToGroup(group);
      var box = this.toGraph(ast.term, group);
      new _H2_Link(gabs.key, box.prin.key, "n", "s").addToGroup(group);
      return new _Hi_Term(gabs, box.auxs);
    } else if (ast instanceof _LZ_Folding) {
      var foldOp = new _La_Fold().addToGroup(group); // create lhs and rhs terms

      var left = this.toGraph(ast.t1, group);
      var right = this.toGraph(ast.t2, group); // link lhs and rhs terms

      new _H2_Link(foldOp.key, left.prin.key, "w", "s").addToGroup(group);
      new _H2_Link(foldOp.key, right.prin.key, "e", "s").addToGroup(group);
      return new _Hi_Term(foldOp, _Hi_Term.joinAuxs(left.auxs, right.auxs, group));
    }
  };

  var _JH_ = function (group) {
    var _arr = Array.from(group.nodes);

    for (var _i = 0; _i < _arr.length; _i++) {
      var node = _arr[_i];
      if (node instanceof _HM_Group) this.deleteVarNode(node);else if (node instanceof _Id_Var) node.deleteAndPreserveOutLink();
    }
  };

  var _JI_ = function () {
    this.evaluating = true;
    this.hasUpdate = false;
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = this.cells[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var key = _step2.value;
        var cell = this.graph.findNodeByKey(key);
        var evalToken = new _J4_MachineToken(this);
        evalToken.isMain = false;
        evalToken.setLink(cell.findLinksOutOf('e')[0]);
        this.evalTokens.push(evalToken);
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }
  };

  var _JJ_ = function (a) {
    var j, x, i;

    for (i = a.length - 1; i > 0; i--) {
      j = Math.floor(Math.random() * (i + 1));
      x = a[i];
      a[i] = a[j];
      a[j] = x;
    }
  };

  var _JK_ = function (tokens) {
    var arr_2 = Array.from(tokens); // random

    /*
            var arr = Array.from(new Array(tokens.length),(val,index)=>index+1);
            this.shuffle(arr);
            for (var i=0; i<arr.length; i++) {
            	var token = arr_2[arr[i]-1];
            	this.tokenPass(token, flag, dataStack, boxStack, modStack);
            }
            */
    // all progress 1 step

    for (var i = 0; i < arr_2.length; i++) {
      var token = arr_2[i];
      this.tokenPass(token);
    }
  };

  var _JL_ = function () {
    if (!this.isFinished()) {
      /*
                this.count++;
                if (this.count == 200) {
                	this.count = 0;
                	this.gc.collect();
                }
                */
      if (this.evaluating) {
        this.batchPass(this.evalTokens);

        if (this.evalTokens.length == 0) {
          this.evaluating = false;
          var machine = this;
          this.newValues.forEach(function (value, key, map) {
            var mod = machine.graph.findNodeByKey(key);
            var oldData = mod.update(value);
            if (oldData != value) machine.hasUpdate = true;
          });
          this.newValues.clear();
          return;
        }
      } else this.tokenPass(this.token);
    }

    return this.getData(this.token);
  };

  var _JM_ = function (token) {
    var node;

    if (!token.transited) {
      if (token.link != null) {
        var target = token.forward ? token.link.to : token.link.from;
        node = this.graph.findNodeByKey(target);
      } else node = this.graph.findNodeByKey("nd1");

      var nextLink;
      token.rewrite = false;
      nextLink = node.transition(token, token.link);

      if (nextLink != null) {
        token.setLink(nextLink);
        token.transited = true;

        if (token.isMain) {// prints progress
          // console.log(this.getData(token));
        }
      } else {
        token.transited = false;

        if (token.isMain) {
          token.setLink(null); //this.gc.collect();

          this.setPlay(false);
          this.setPlaying(false);
          this.setFinished(true);
        } else token.setLink(token.link);
      }
    } else {
      var target = token.forward ? token.link.from : token.link.to;
      node = this.graph.findNodeByKey(target);
      var nextLink = node.rewrite(token, token.link);

      if (!token.rewrite) {
        token.transited = false;
        this.tokenPass(token);
      } else {
        token.setLink(nextLink);
      }
    }
  };

  var _JN_ = function (token) {
    var dataStack = Array.from(token.dataStack).reverse();
    dataStack.push('□'); // the latest value is stored in the first element in the dataStack

    var data = dataStack[0]; // data consists of the last node and it's link

    if (data[0] === 'λ') {
      // abstraction
      var machine = this; // this means it doesn't return a simple value

      return function (source) {
        // create AST of the future abstract arguments
        var lexer = new _Ku_Lexer(source + '\0');
        var parser = new _Kw_Parser(lexer);
        var ast = parser.parse(); // init

        machine.token.reset();
        machine.count = 0;
        machine.evalTokens = [];
        machine.cells = [];
        machine.readyEvalTokens = 0;
        machine.evaluating = false;
        machine.newValues.clear();
        machine.hasUpdate = false; // get the start node

        var start = machine.graph.findNodeByKey("nd1"); // the start node will point to the node that'll be the lhs of the application

        var left = machine.graph.findNodeByKey(start.links[0].to);
        var leftAuxs = left.group.auxs; // need to remove link out of start nodes

        start.findLinksConnected().forEach(function (link) {
          link.delete();
        }); // follow the same steps from Application in toGraph

        var der = new _IL_Der(left.name).addToGroup(machine.graph.child);
        new _H2_Link(der.key, left.key, "n", "s").addToGroup(machine.graph.child); // create the rhs from the source AST

        var right = machine.toGraph(ast, machine.graph.child);
        var app = new _IB_App().addToGroup(machine.graph.child);
        new _H2_Link(app.key, der.key, "w", "s").addToGroup(machine.graph.child);
        new _H2_Link(app.key, right.prin.key, "e", "s").addToGroup(machine.graph.child);
        var term = new _Hi_Term(app, _Hi_Term.joinAuxs(leftAuxs, right.auxs, machine.graph.child));
        new _H2_Link(start.key, term.prin.key, "n", "s").addToGroup(machine.graph.child);
        machine.deleteVarNode(machine.graph.child);
      };
    } else {
      if (data[0] === '•') {
        // this represents the unit so it doesn't return anything
        return undefined;
      } else {
        return data[0];
      }
    }
  };

  var _1_trampoline = function (res) {
    while (res && res.fn) {
      res = res.fn.apply(null, res.args);
    }
  };

  var _2_autoPlay = function (callback) {
    var __captured__scope_1_ = __scope_0_main[0] || __get_scope_binding_0_get_95scope_95binding(0);

    __captured__scope_1_[0]++;

    _5_.setPlaying(true);

    var result;

    if (!_5_.isFinished()) {
      result = _5_.pass();
    }

    if (_5_.isFinished()) {
      if (typeof result === 'function') {
        return {
          fn: callback,
          args: [null, function () {
            _5_.setPlay(false);

            _5_.setPlaying(false); // can only receive one argument at a time so this work


            if (arguments.length !== 0) {
              result(arguments[0]);
            }

            _5_.setPlay(true);

            _5_.setFinished(false);

            if (!_5_.isPlaying()) {
              return _1_trampoline({
                fn: _2_autoPlay,
                args: [callback]
              });
            }
          }]
        };
      } else {
        return {
          fn: callback,
          args: [null, result]
        };
      }
    } else {
      if (_5_.isPlay()) {
        if (_JP_.__residual && __captured__scope_1_[0] > 125) {
          // set to 0 because up till now Prepack evaluated everything
          __captured__scope_1_[0] = 0;

          _JP_.__residual("void", _0_.bind(null), _1_trampoline, _2_autoPlay, callback);
        } else {
          return {
            fn: _2_autoPlay,
            args: [callback]
          };
        }
      } else {
        _5_.setPlaying(false);
      }
    }
  };

  var _P6_ = function (obj) {
    return typeof obj;
  };

  var _NN_ = function (obj) {
    return typeof obj;
  };

  var _Mf_ = function (obj) {
    return typeof obj;
  };

  var _NI_ = function (obj) {
    return typeof obj;
  };

  var _NK_ = function (obj) {
    return typeof obj;
  };

  var _NY_ = function (obj) {
    return typeof obj;
  };

  var _Nd_ = function (obj) {
    return typeof obj;
  };

  var _NT_ = function (obj) {
    return typeof obj;
  };

  var _Mg_ = function (obj) {
    return typeof obj;
  };

  var _NR_ = function (obj) {
    return typeof obj;
  };

  var _Nf_ = function (obj) {
    return typeof obj;
  };

  var _NU_ = function (obj) {
    return typeof obj;
  };

  var _0_ = function (trampoline, autoPlay, callback) {
    return trampoline({
      fn: autoPlay,
      args: [callback]
    });
  };

  var __constructor = function () {};

  var _KM_ = _$2_Object_46getPrototypeOf;

  var _6_graph = (__constructor.prototype = _GV_, new __constructor());

  _6_graph.key = 154;
  _6_graph.linkKey = 0;

  var _9_ = new _$3_Map();

  _6_graph.allNodes = _9_;
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gs_, _$4_Object_46defineProperty(_K_, "addToNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gt_, _$4_Object_46defineProperty(_K_, "addToGraph", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gu_, _$4_Object_46defineProperty(_K_, "addToGroup", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gv_, _$4_Object_46defineProperty(_K_, "changeToGroup", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gw_, _$4_Object_46defineProperty(_K_, "changeFrom", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gx_, _$4_Object_46defineProperty(_K_, "changeTo", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gy_, _$4_Object_46defineProperty(_K_, "focus", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Gz_, _$4_Object_46defineProperty(_K_, "clearFocus", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H0_, _$4_Object_46defineProperty(_K_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H1_, _$4_Object_46defineProperty(_K_, "toString", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _81_ = (__constructor.prototype = _K_, new __constructor());

  _81_.from = "nd30";
  _81_.to = "nd31";
  _81_.fromPort = "n";
  _81_.toPort = "s";
  _81_.reverse = void 0;
  _81_.colour = null;
  _81_.penWidth = null;
  _81_.graph = _6_graph;

  var _8C_ = (__constructor.prototype = _K_, new __constructor());

  _8C_.from = "nd34";
  _8C_.to = "nd31";
  _8C_.fromPort = "nw";
  _8C_.toPort = "w";
  _8C_.reverse = true;
  _8C_.colour = null;
  _8C_.penWidth = null;
  _8C_.graph = _6_graph;

  var _85_outLink = (__constructor.prototype = _K_, new __constructor());

  _85_outLink.from = "nd31";
  _85_outLink.to = "nd35";
  _85_outLink.fromPort = "e";
  _85_outLink.toPort = "s";
  _85_outLink.reverse = void 0;
  _85_outLink.colour = null;
  _85_outLink.penWidth = null;
  _85_outLink.graph = _6_graph;

  var _7V_ = (__constructor.prototype = _K_, new __constructor());

  _7V_.from = "nd37";
  _7V_.to = "nd30";
  _7V_.fromPort = "n";
  _7V_.toPort = "s";
  _7V_.reverse = void 0;
  _7V_.colour = null;
  _7V_.penWidth = null;
  _7V_.graph = _6_graph;

  var _7a_ = (__constructor.prototype = _K_, new __constructor());

  _7a_.from = "nd27";
  _7a_.to = "nd37";
  _7a_.fromPort = "w";
  _7a_.toPort = "s";
  _7a_.reverse = void 0;
  _7a_.colour = null;
  _7a_.penWidth = null;
  _7a_.graph = _6_graph;

  var _7e_ = (__constructor.prototype = _K_, new __constructor());

  _7e_.from = "nd27";
  _7e_.to = "nd38";
  _7e_.fromPort = "e";
  _7e_.toPort = "s";
  _7e_.reverse = void 0;
  _7e_.colour = null;
  _7e_.penWidth = null;
  _7e_.graph = _6_graph;

  var _7J_ = (__constructor.prototype = _K_, new __constructor());

  _7J_.from = "nd25";
  _7J_.to = "nd26";
  _7J_.fromPort = "n";
  _7J_.toPort = "s";
  _7J_.reverse = void 0;
  _7J_.colour = null;
  _7J_.penWidth = null;
  _7J_.graph = _6_graph;

  var _7i_ = (__constructor.prototype = _K_, new __constructor());

  _7i_.from = "nd26";
  _7i_.to = "nd27";
  _7i_.fromPort = "e";
  _7i_.toPort = "s";
  _7i_.reverse = void 0;
  _7i_.colour = null;
  _7i_.penWidth = null;
  _7i_.graph = _6_graph;

  var _7l_ = (__constructor.prototype = _K_, new __constructor());

  _7l_.from = "nd41";
  _7l_.to = "nd26";
  _7l_.fromPort = "nw";
  _7l_.toPort = "w";
  _7l_.reverse = true;
  _7l_.colour = null;
  _7l_.penWidth = null;
  _7l_.graph = _6_graph;

  var _7N_ = (__constructor.prototype = _K_, new __constructor());

  _7N_.from = "nd35";
  _7N_.to = "nd42";
  _7N_.fromPort = "n";
  _7N_.toPort = "s";
  _7N_.reverse = void 0;
  _7N_.colour = null;
  _7N_.penWidth = null;
  _7N_.graph = _6_graph;

  var _6Z_ = (__constructor.prototype = _K_, new __constructor());

  _6Z_.from = "nd44";
  _6Z_.to = "nd25";
  _6Z_.fromPort = "n";
  _6Z_.toPort = "s";
  _6Z_.reverse = void 0;
  _6Z_.colour = null;
  _6Z_.penWidth = null;
  _6Z_.graph = _6_graph;

  var _9T_ = (__constructor.prototype = _K_, new __constructor());

  _9T_.from = "nd48";
  _9T_.to = "nd49";
  _9T_.fromPort = "n";
  _9T_.toPort = "s";
  _9T_.reverse = void 0;
  _9T_.colour = null;
  _9T_.penWidth = null;
  _9T_.graph = _6_graph;

  var _6e_ = (__constructor.prototype = _K_, new __constructor());

  _6e_.from = "nd45";
  _6e_.to = "nd48";
  _6e_.fromPort = "e";
  _6e_.toPort = "s";
  _6e_.reverse = void 0;
  _6e_.colour = null;
  _6e_.penWidth = null;
  _6e_.graph = _6_graph;

  var _6i_ = (__constructor.prototype = _K_, new __constructor());

  _6i_.from = "nd22";
  _6i_.to = "nd44";
  _6i_.fromPort = "w";
  _6i_.toPort = "s";
  _6i_.reverse = void 0;
  _6i_.colour = null;
  _6i_.penWidth = null;
  _6i_.graph = _6_graph;

  var _6m_ = (__constructor.prototype = _K_, new __constructor());

  _6m_.from = "nd22";
  _6m_.to = "nd45";
  _6m_.fromPort = "e";
  _6m_.toPort = "s";
  _6m_.reverse = void 0;
  _6m_.colour = null;
  _6m_.penWidth = null;
  _6m_.graph = _6_graph;

  var _6N_ = (__constructor.prototype = _K_, new __constructor());

  _6N_.from = "nd20";
  _6N_.to = "nd21";
  _6N_.fromPort = "n";
  _6N_.toPort = "s";
  _6N_.reverse = void 0;
  _6N_.colour = null;
  _6N_.penWidth = null;
  _6N_.graph = _6_graph;

  var _6p_ = (__constructor.prototype = _K_, new __constructor());

  _6p_.from = "nd21";
  _6p_.to = "nd22";
  _6p_.fromPort = "e";
  _6p_.toPort = "s";
  _6p_.reverse = void 0;
  _6p_.colour = null;
  _6p_.penWidth = null;
  _6p_.graph = _6_graph;

  var _6s_ = (__constructor.prototype = _K_, new __constructor());

  _6s_.from = "nd42";
  _6s_.to = "nd55";
  _6s_.fromPort = "n";
  _6s_.toPort = "w";
  _6s_.reverse = void 0;
  _6s_.colour = null;
  _6s_.penWidth = null;
  _6s_.graph = _6_graph;

  var _6x_ = (__constructor.prototype = _K_, new __constructor());

  _6x_.from = "nd54";
  _6x_.to = "nd55";
  _6x_.fromPort = "n";
  _6x_.toPort = "e";
  _6x_.reverse = void 0;
  _6x_.colour = null;
  _6x_.penWidth = null;
  _6x_.graph = _6_graph;

  var _71_ = (__constructor.prototype = _K_, new __constructor());

  _71_.from = "nd55";
  _71_.to = "nd21";
  _71_.fromPort = "nw";
  _71_.toPort = "w";
  _71_.reverse = true;
  _71_.colour = null;
  _71_.penWidth = null;
  _71_.graph = _6_graph;

  var _6R_outLink = (__constructor.prototype = _K_, new __constructor());

  _6R_outLink.from = "nd45";
  _6R_outLink.to = "nd56";
  _6R_outLink.fromPort = "w";
  _6R_outLink.toPort = "s";
  _6R_outLink.reverse = void 0;
  _6R_outLink.colour = null;
  _6R_outLink.penWidth = null;
  _6R_outLink.graph = _6_graph;

  var _1S_link = (__constructor.prototype = _K_, new __constructor());

  _1S_link.from = "nd58";
  _1S_link.to = "nd20";
  _1S_link.fromPort = "n";
  _1S_link.toPort = "s";
  _1S_link.reverse = void 0;
  _1S_link.colour = null;
  _1S_link.penWidth = null;
  _1S_link.graph = _6_graph;

  var _1X_link = (__constructor.prototype = _K_, new __constructor());

  _1X_link.from = "nd17";
  _1X_link.to = "nd58";
  _1X_link.fromPort = "w";
  _1X_link.toPort = "s";
  _1X_link.reverse = void 0;
  _1X_link.colour = null;
  _1X_link.penWidth = null;
  _1X_link.graph = _6_graph;

  var _1a_link = (__constructor.prototype = _K_, new __constructor());

  _1a_link.from = "nd1";
  _1a_link.to = "nd17";
  _1a_link.fromPort = "n";
  _1a_link.toPort = "s";
  _1a_link.reverse = void 0;
  _1a_link.colour = null;
  _1a_link.penWidth = null;
  _1a_link.graph = _6_graph;

  var _1e_link = (__constructor.prototype = _K_, new __constructor());

  _1e_link.from = "nd62";
  _1e_link.to = "nd149";
  _1e_link.fromPort = "n";
  _1e_link.toPort = "s";
  _1e_link.reverse = false;
  _1e_link.colour = null;
  _1e_link.penWidth = null;
  _1e_link.graph = _6_graph;

  var _1B_link = (__constructor.prototype = _K_, new __constructor());

  _1B_link.from = "nd17";
  _1B_link.to = "nd76";
  _1B_link.fromPort = "e";
  _1B_link.toPort = "s";
  _1B_link.reverse = void 0;
  _1B_link.colour = null;
  _1B_link.penWidth = null;
  _1B_link.graph = _6_graph;

  var _3F_link = (__constructor.prototype = _K_, new __constructor());

  _3F_link.from = "nd81";
  _3F_link.to = "nd82";
  _3F_link.fromPort = "n";
  _3F_link.toPort = "s";
  _3F_link.reverse = void 0;
  _3F_link.colour = null;
  _3F_link.penWidth = null;
  _3F_link.graph = _6_graph;

  var _P_link = (__constructor.prototype = _K_, new __constructor());

  _P_link.from = "nd138";
  _P_link.to = "nd81";
  _P_link.fromPort = "n";
  _P_link.toPort = void 0;
  _P_link.reverse = void 0;
  _P_link.colour = null;
  _P_link.penWidth = null;
  _P_link.graph = _6_graph;

  var _3d_link = (__constructor.prototype = _K_, new __constructor());

  _3d_link.from = "nd91";
  _3d_link.to = "nd92";
  _3d_link.fromPort = "n";
  _3d_link.toPort = "s";
  _3d_link.reverse = void 0;
  _3d_link.colour = null;
  _3d_link.penWidth = null;
  _3d_link.graph = _6_graph;

  var _T_link = (__constructor.prototype = _K_, new __constructor());

  _T_link.from = "nd77";
  _T_link.to = "nd78";
  _T_link.fromPort = "w";
  _T_link.toPort = "s";
  _T_link.reverse = void 0;
  _T_link.colour = null;
  _T_link.penWidth = null;
  _T_link.graph = _6_graph;

  var _Y_link = (__constructor.prototype = _K_, new __constructor());

  _Y_link.from = "nd140";
  _Y_link.to = "nd91";
  _Y_link.fromPort = "n";
  _Y_link.toPort = void 0;
  _Y_link.reverse = void 0;
  _Y_link.colour = null;
  _Y_link.penWidth = null;
  _Y_link.graph = _6_graph;

  var _4H_link = (__constructor.prototype = _K_, new __constructor());

  _4H_link.from = "nd101";
  _4H_link.to = "nd102";
  _4H_link.fromPort = "n";
  _4H_link.toPort = "s";
  _4H_link.reverse = void 0;
  _4H_link.colour = null;
  _4H_link.penWidth = null;
  _4H_link.graph = _6_graph;

  var _c_link = (__constructor.prototype = _K_, new __constructor());

  _c_link.from = "nd142";
  _c_link.to = "nd101";
  _c_link.fromPort = "n";
  _c_link.toPort = void 0;
  _c_link.reverse = void 0;
  _c_link.colour = null;
  _c_link.penWidth = null;
  _c_link.graph = _6_graph;

  var _4f_link = (__constructor.prototype = _K_, new __constructor());

  _4f_link.from = "nd111";
  _4f_link.to = "nd112";
  _4f_link.fromPort = "n";
  _4f_link.toPort = "s";
  _4f_link.reverse = void 0;
  _4f_link.colour = null;
  _4f_link.penWidth = null;
  _4f_link.graph = _6_graph;

  var _g_link = (__constructor.prototype = _K_, new __constructor());

  _g_link.from = "nd97";
  _g_link.to = "nd98";
  _g_link.fromPort = "w";
  _g_link.toPort = "s";
  _g_link.reverse = void 0;
  _g_link.colour = null;
  _g_link.penWidth = null;
  _g_link.graph = _6_graph;

  var _l_link = (__constructor.prototype = _K_, new __constructor());

  _l_link.from = "nd144";
  _l_link.to = "nd111";
  _l_link.fromPort = "n";
  _l_link.toPort = void 0;
  _l_link.reverse = void 0;
  _l_link.colour = null;
  _l_link.penWidth = null;
  _l_link.graph = _6_graph;

  var _p_link = (__constructor.prototype = _K_, new __constructor());

  _p_link.from = "nd76";
  _p_link.to = "nd77";
  _p_link.fromPort = "w";
  _p_link.toPort = "s";
  _p_link.reverse = void 0;
  _p_link.colour = null;
  _p_link.penWidth = null;
  _p_link.graph = _6_graph;

  var _t_link = (__constructor.prototype = _K_, new __constructor());

  _t_link.from = "nd76";
  _t_link.to = "nd97";
  _t_link.fromPort = "e";
  _t_link.toPort = "s";
  _t_link.reverse = void 0;
  _t_link.colour = null;
  _t_link.penWidth = null;
  _t_link.graph = _6_graph;

  var _w_link = (__constructor.prototype = _K_, new __constructor());

  _w_link.from = "nd98";
  _w_link.to = "nd119";
  _w_link.fromPort = "e";
  _w_link.toPort = "s";
  _w_link.reverse = void 0;
  _w_link.colour = null;
  _w_link.penWidth = null;
  _w_link.graph = _6_graph;

  var _10_link = (__constructor.prototype = _K_, new __constructor());

  _10_link.from = "nd78";
  _10_link.to = "nd119";
  _10_link.fromPort = "e";
  _10_link.toPort = "s";
  _10_link.reverse = void 0;
  _10_link.colour = null;
  _10_link.penWidth = null;
  _10_link.graph = _6_graph;

  var _13_link = (__constructor.prototype = _K_, new __constructor());

  _13_link.from = "nd56";
  _13_link.to = "nd119";
  _13_link.fromPort = "n";
  _13_link.toPort = "s";
  _13_link.reverse = void 0;
  _13_link.colour = null;
  _13_link.penWidth = null;
  _13_link.graph = _6_graph;

  var _17_nextLink = (__constructor.prototype = _K_, new __constructor());

  _17_nextLink.from = "nd119";
  _17_nextLink.to = "nd131";
  _17_nextLink.fromPort = "n";
  _17_nextLink.toPort = "s";
  _17_nextLink.reverse = false;
  _17_nextLink.colour = null;
  _17_nextLink.penWidth = null;
  _17_nextLink.graph = _6_graph;

  var _2D_link = (__constructor.prototype = _K_, new __constructor());

  _2D_link.from = "nd125";
  _2D_link.to = "nd126";
  _2D_link.fromPort = "n";
  _2D_link.toPort = "s";
  _2D_link.reverse = void 0;
  _2D_link.colour = null;
  _2D_link.penWidth = null;
  _2D_link.graph = _6_graph;

  var _F_link = (__constructor.prototype = _K_, new __constructor());

  _F_link.from = "nd131";
  _F_link.to = "nd125";
  _F_link.fromPort = "e";
  _F_link.toPort = "s";
  _F_link.reverse = void 0;
  _F_link.colour = null;
  _F_link.penWidth = null;
  _F_link.graph = _6_graph;

  var _L_link = (__constructor.prototype = _K_, new __constructor());

  _L_link.from = "nd131";
  _L_link.to = "nd132";
  _L_link.fromPort = "w";
  _L_link.toPort = "s";
  _L_link.reverse = void 0;
  _L_link.colour = null;
  _L_link.penWidth = null;
  _L_link.graph = _6_graph;

  var _37_ = (__constructor.prototype = _K_, new __constructor());

  _37_.from = "nd78";
  _37_.to = "nd137";
  _37_.fromPort = "w";
  _37_.toPort = "s";
  _37_.reverse = void 0;
  _37_.colour = null;
  _37_.penWidth = null;
  _37_.graph = _6_graph;

  var _2x_ = (__constructor.prototype = _K_, new __constructor());

  _2x_.from = "nd77";
  _2x_.to = "nd139";
  _2x_.fromPort = "e";
  _2x_.toPort = "s";
  _2x_.reverse = void 0;
  _2x_.colour = null;
  _2x_.penWidth = null;
  _2x_.graph = _6_graph;

  var _4A_link = (__constructor.prototype = _K_, new __constructor());

  _4A_link.from = "nd98";
  _4A_link.to = "nd153";
  _4A_link.fromPort = "w";
  _4A_link.toPort = "s";
  _4A_link.reverse = void 0;
  _4A_link.colour = null;
  _4A_link.penWidth = null;
  _4A_link.graph = _6_graph;

  var _42_link = (__constructor.prototype = _K_, new __constructor());

  _42_link.from = "nd97";
  _42_link.to = "nd151";
  _42_link.fromPort = "e";
  _42_link.toPort = "s";
  _42_link.reverse = void 0;
  _42_link.colour = null;
  _42_link.penWidth = null;
  _42_link.graph = _6_graph;

  var _5p_nextLink = (__constructor.prototype = _K_, new __constructor());

  _5p_nextLink.from = "nd149";
  _5p_nextLink.to = "nd148";
  _5p_nextLink.fromPort = "n";
  _5p_nextLink.toPort = "s";
  _5p_nextLink.reverse = void 0;
  _5p_nextLink.colour = null;
  _5p_nextLink.penWidth = null;
  _5p_nextLink.graph = _6_graph;

  var _1F_link = (__constructor.prototype = _K_, new __constructor());

  _1F_link.from = "nd147";
  _1F_link.to = "nd149";
  _1F_link.fromPort = "n";
  _1F_link.toPort = "s";
  _1F_link.reverse = void 0;
  _1F_link.colour = null;
  _1F_link.penWidth = null;
  _1F_link.graph = _6_graph;

  var _1K_link = (__constructor.prototype = _K_, new __constructor());

  _1K_link.from = "nd137";
  _1K_link.to = "nd147";
  _1K_link.fromPort = "n";
  _1K_link.toPort = "s";
  _1K_link.reverse = void 0;
  _1K_link.colour = null;
  _1K_link.penWidth = null;
  _1K_link.graph = _6_graph;

  var _1O_link = (__constructor.prototype = _K_, new __constructor());

  _1O_link.from = "nd139";
  _1O_link.to = "nd147";
  _1O_link.fromPort = "n";
  _1O_link.toPort = "s";
  _1O_link.reverse = void 0;
  _1O_link.colour = null;
  _1O_link.penWidth = null;
  _1O_link.graph = _6_graph;

  var _1i_link = (__constructor.prototype = _K_, new __constructor());

  _1i_link.from = "nd151";
  _1i_link.to = "nd150";
  _1i_link.fromPort = "e";
  _1i_link.toPort = "s";
  _1i_link.reverse = void 0;
  _1i_link.colour = null;
  _1i_link.penWidth = null;
  _1i_link.graph = _6_graph;

  var _1n_link = (__constructor.prototype = _K_, new __constructor());

  _1n_link.from = "nd151";
  _1n_link.to = "nd149";
  _1n_link.fromPort = "w";
  _1n_link.toPort = "s";
  _1n_link.reverse = void 0;
  _1n_link.colour = null;
  _1n_link.penWidth = null;
  _1n_link.graph = _6_graph;

  var _1q_link = (__constructor.prototype = _K_, new __constructor());

  _1q_link.from = "nd153";
  _1q_link.to = "nd152";
  _1q_link.fromPort = "e";
  _1q_link.toPort = "s";
  _1q_link.reverse = void 0;
  _1q_link.colour = null;
  _1q_link.penWidth = null;
  _1q_link.graph = _6_graph;

  var _1v_nextLink = (__constructor.prototype = _K_, new __constructor());

  _1v_nextLink.from = "nd153";
  _1v_nextLink.to = "nd149";
  _1v_nextLink.fromPort = "w";
  _1v_nextLink.toPort = "s";
  _1v_nextLink.reverse = void 0;
  _1v_nextLink.colour = "red";
  _1v_nextLink.penWidth = "20";
  _1v_nextLink.graph = _6_graph;
  var _GT_ = [_81_, _8C_, _85_outLink, _7V_, _7a_, _7e_, _7J_, _7i_, _7l_, _7N_, _6Z_, _9T_, _6e_, _6i_, _6m_, _6N_, _6p_, _6s_, _6x_, _71_, _6R_outLink, _1S_link, _1X_link, _1a_link, _1e_link, _1B_link, _3F_link, _P_link, _3d_link, _T_link, _Y_link, _4H_link, _c_link, _4f_link, _g_link, _l_link, _p_link, _t_link, _w_link, _10_link, _13_link, _17_nextLink, _2D_link, _F_link, _L_link, _37_, _2x_, _4A_link, _42_link, _5p_nextLink, _1F_link, _1K_link, _1O_link, _1i_link, _1n_link, _1q_link, _1v_nextLink,,,,,,,,,,,,,,,,,,,];
  _GT_.length = 57;
  _6_graph.allLinks = _GT_;
  var _JR_ = {
    isNumber: _KF_isNumber,
    graph: _6_graph
  };

  var _28_ = (__constructor.prototype = _29_, new __constructor());

  _H3_Start.prototype = _28_;

  _$5_Object_46setPrototypeOf(_H3_Start, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H3_Start, _$4_Object_46defineProperty(_28_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  var _JS_CompData = {
    EMPTY: "-",
    PROMPT: "*",
    LAMBDA: "\u03BB",
    R: "@",
    UNIT: "\u2022",
    IF0: "if0",
    IF1: "if1",
    PL: "L",
    PR: "R",
    PE: "P",
    DEP: "d"
  };
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H4_, _$4_Object_46defineProperty(_28_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H5_, _$4_Object_46defineProperty(_28_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _22_fromNode = (__constructor.prototype = _28_, new __constructor());

  _22_fromNode.key = "nd1";
  _22_fromNode.shape = "point";
  _22_fromNode.text = "";
  _22_fromNode.colour = "black";
  _22_fromNode.name = void 0;
  _22_fromNode.graph = _6_graph;
  _22_fromNode.width = null;
  _22_fromNode.height = null;
  var _26_ = [_1a_link,,];
  _26_.length = 1;
  _22_fromNode.links = _26_;

  _9_.set("nd1", _22_fromNode);

  var _6J_ = (__constructor.prototype = _29_, new __constructor());

  _IB_App.prototype = _6J_;

  _$5_Object_46setPrototypeOf(_IB_App, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IB_App, _$4_Object_46defineProperty(_6J_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IC_, _$4_Object_46defineProperty(_6J_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _ID_, _$4_Object_46defineProperty(_6J_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _6E_prev = (__constructor.prototype = _6J_, new __constructor());

  _6E_prev.key = "nd17";
  _6E_prev.shape = null;
  _6E_prev.text = "@";
  _6E_prev.colour = "yellow";
  _6E_prev.name = void 0;
  _6E_prev.graph = _6_graph;
  _6E_prev.width = null;
  _6E_prev.height = null;
  var _6H_ = [_1X_link, _1a_link, _1B_link,,];
  _6H_.length = 3;
  _6E_prev.links = _6H_;

  _9_.set("nd17", _6E_prev);

  var _2a_ = (__constructor.prototype = _29_, new __constructor());

  _HW_Expo.prototype = _2a_;

  _$5_Object_46setPrototypeOf(_HW_Expo, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HW_Expo, _$4_Object_46defineProperty(_2a_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HX_, _$4_Object_46defineProperty(_2a_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  var _KN_ = _$7_Reflect_46get;
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HY_, _$4_Object_46defineProperty(_2a_, "deleteAndPreserveInLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HZ_, _$4_Object_46defineProperty(_2a_, "deleteAndPreserveOutLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2Z_ = (__constructor.prototype = _2a_, new __constructor());

  _HS_Promo.prototype = _2Z_;

  _$5_Object_46setPrototypeOf(_HS_Promo, _HW_Expo);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HS_Promo, _$4_Object_46defineProperty(_2Z_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  var _Jb_RewriteFlag = {
    EMPTY: "\u25A1",
    F_LAMBDA: "<\u03BB>",
    F_OP: "<$>",
    F_IF: "<if>",
    F_C: "<C>",
    F_PROMO: "<!>",
    F_RECUR: "<\u03BC>",
    F_MOD: "<M>",
    F_DEP: "<p>",
    F_DELTA: "<\u0394>",
    F_PROP: "<s>",
    F_PAIR: "<,>",
    F_GABS: "<A>",
    F_PROJ: "<proj>",
    F_FOLD: "<F>"
  };
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HT_, _$4_Object_46defineProperty(_2Z_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _8p_ = (__constructor.prototype = _2a_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IL_Der, _$4_Object_46defineProperty(_8p_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IM_, _$4_Object_46defineProperty(_8p_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _IL_Der.prototype = _8p_;

  _$5_Object_46setPrototypeOf(_IL_Der, _HW_Expo);

  var _58_ = (__constructor.prototype = _2a_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hy_Contract, _$4_Object_46defineProperty(_58_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hz_, _$4_Object_46defineProperty(_58_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I0_, _$4_Object_46defineProperty(_58_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I1_, _$4_Object_46defineProperty(_58_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _Hy_Contract.prototype = _58_;

  _$5_Object_46setPrototypeOf(_Hy_Contract, _HW_Expo);

  var _7B_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IE_Abs, _$4_Object_46defineProperty(_7B_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IF_, _$4_Object_46defineProperty(_7B_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _9x_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IV_PatTuple, _$4_Object_46defineProperty(_9x_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IW_, _$4_Object_46defineProperty(_9x_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IX_, _$4_Object_46defineProperty(_9x_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _IV_PatTuple.prototype = _9x_;

  _$5_Object_46setPrototypeOf(_IV_PatTuple, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IG_, _$4_Object_46defineProperty(_7B_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IH_, _$4_Object_46defineProperty(_7B_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _IE_Abs.prototype = _7B_;

  _$5_Object_46setPrototypeOf(_IE_Abs, _HG_Node);

  var _LG_ = (__constructor.prototype = _2a_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LF_Recur, _$4_Object_46defineProperty(_LG_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _ML_, _$4_Object_46defineProperty(_LG_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Jr_, _$4_Object_46defineProperty(_Hi_Term, "joinAuxs", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_Hi_Term, _HM_Group);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MM_, _$4_Object_46defineProperty(_LG_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MN_, _$4_Object_46defineProperty(_LG_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LF_Recur.prototype = _LG_;

  _$5_Object_46setPrototypeOf(_LF_Recur, _HW_Expo);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HU_, _$4_Object_46defineProperty(_2Z_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HV_, _$4_Object_46defineProperty(_2Z_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _9z_node = (__constructor.prototype = _2Z_, new __constructor());

  _9z_node.key = "nd20";
  _9z_node.shape = null;
  _9z_node.text = "!";
  _9z_node.colour = "cyan";
  _9z_node.name = void 0;
  _9z_node.graph = _6_graph;
  _9z_node.width = ".3";
  _9z_node.height = ".3";
  var _A4_ = [_6N_, _1S_link];
  _9z_node.links = _A4_;

  _9_.set("nd20", _9z_node);

  var _77_node = (__constructor.prototype = _7B_, new __constructor());

  _77_node.key = "nd21";
  _77_node.shape = null;
  _77_node.text = "\u03BB";
  _77_node.colour = "yellow";
  _77_node.name = void 0;
  _77_node.graph = _6_graph;
  _77_node.width = null;
  _77_node.height = null;
  var _7A_ = [_6N_, _6p_, _71_];
  _77_node.links = _7A_;

  _9_.set("nd21", _77_node);

  var _7C_node = (__constructor.prototype = _6J_, new __constructor());

  _7C_node.key = "nd22";
  _7C_node.shape = null;
  _7C_node.text = "@";
  _7C_node.colour = "yellow";
  _7C_node.name = void 0;
  _7C_node.graph = _6_graph;
  _7C_node.width = null;
  _7C_node.height = null;
  var _7F_ = [_6i_, _6m_, _6p_];
  _7C_node.links = _7F_;

  _9_.set("nd22", _7C_node);

  var _91_node = (__constructor.prototype = _2Z_, new __constructor());

  _91_node.key = "nd25";
  _91_node.shape = null;
  _91_node.text = "!";
  _91_node.colour = "cyan";
  _91_node.name = void 0;
  _91_node.graph = _6_graph;
  _91_node.width = ".3";
  _91_node.height = ".3";
  var _96_ = [_7J_, _6Z_];
  _91_node.links = _96_;

  _9_.set("nd25", _91_node);

  var _7q_node = (__constructor.prototype = _7B_, new __constructor());

  _7q_node.key = "nd26";
  _7q_node.shape = null;
  _7q_node.text = "\u03BB";
  _7q_node.colour = "yellow";
  _7q_node.name = void 0;
  _7q_node.graph = _6_graph;
  _7q_node.width = null;
  _7q_node.height = null;
  var _7t_ = [_7J_, _7i_, _7l_];
  _7q_node.links = _7t_;

  _9_.set("nd26", _7q_node);

  var _7u_node = (__constructor.prototype = _6J_, new __constructor());

  _7u_node.key = "nd27";
  _7u_node.shape = null;
  _7u_node.text = "@";
  _7u_node.colour = "yellow";
  _7u_node.name = void 0;
  _7u_node.graph = _6_graph;
  _7u_node.width = null;
  _7u_node.height = null;
  var _7x_ = [_7a_, _7e_, _7i_];
  _7u_node.links = _7x_;

  _9_.set("nd27", _7u_node);

  var _8U_node = (__constructor.prototype = _2Z_, new __constructor());

  _8U_node.key = "nd30";
  _8U_node.shape = null;
  _8U_node.text = "!";
  _8U_node.colour = "cyan";
  _8U_node.name = void 0;
  _8U_node.graph = _6_graph;
  _8U_node.width = ".3";
  _8U_node.height = ".3";
  var _8Z_ = [_81_, _7V_];
  _8U_node.links = _8Z_;

  _9_.set("nd30", _8U_node);

  var _8I_fromNode = (__constructor.prototype = _7B_, new __constructor());

  _8I_fromNode.key = "nd31";
  _8I_fromNode.shape = null;
  _8I_fromNode.text = "\u03BB";
  _8I_fromNode.colour = "yellow";
  _8I_fromNode.name = void 0;
  _8I_fromNode.graph = _6_graph;
  _8I_fromNode.width = null;
  _8I_fromNode.height = null;
  var _8L_ = [_81_, _8C_, _85_outLink,,];
  _8L_.length = 3;
  _8I_fromNode.links = _8L_;

  _9_.set("nd31", _8I_fromNode);

  var _5L_ = (__constructor.prototype = _2a_, new __constructor());

  _I6_Weak.prototype = _5L_;

  _$5_Object_46setPrototypeOf(_I6_Weak, _HW_Expo);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I6_Weak, _$4_Object_46defineProperty(_5L_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I7_, _$4_Object_46defineProperty(_5L_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _8N_node = (__constructor.prototype = _5L_, new __constructor());

  _8N_node.key = "nd34";
  _8N_node.shape = null;
  _8N_node.text = "C0";
  _8N_node.colour = "cyan";
  _8N_node.name = void 0;
  _8N_node.graph = _6_graph;
  _8N_node.width = ".3";
  _8N_node.height = ".3";
  var _8S_ = [_8C_];
  _8N_node.links = _8S_;

  _9_.set("nd34", _8N_node);

  var _8h_ = (__constructor.prototype = _2a_, new __constructor());

  _II_Pax.prototype = _8h_;

  _$5_Object_46setPrototypeOf(_II_Pax, _HW_Expo);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _II_Pax, _$4_Object_46defineProperty(_8h_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IJ_, _$4_Object_46defineProperty(_8h_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IK_, _$4_Object_46defineProperty(_8h_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _8a_node = (__constructor.prototype = _8h_, new __constructor());

  _8a_node.key = "nd35";
  _8a_node.shape = null;
  _8a_node.text = "?";
  _8a_node.colour = "cyan";
  _8a_node.name = "wrm";
  _8a_node.graph = _6_graph;
  _8a_node.width = ".3";
  _8a_node.height = ".3";
  var _8g_ = [_85_outLink, _7N_];
  _8a_node.links = _8g_;

  _9_.set("nd35", _8a_node);

  var _8j_node = (__constructor.prototype = _8p_, new __constructor());

  _8j_node.key = "nd37";
  _8j_node.shape = null;
  _8j_node.text = "D";
  _8j_node.colour = "cyan";
  _8j_node.name = void 0;
  _8j_node.graph = _6_graph;
  _8j_node.width = ".3";
  _8j_node.height = ".3";
  var _8o_ = [_7V_, _7a_];
  _8j_node.links = _8o_;

  _9_.set("nd37", _8j_node);

  var _8u_ = (__constructor.prototype = _29_, new __constructor());

  _IN_Prop.prototype = _8u_;

  _$5_Object_46setPrototypeOf(_IN_Prop, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IN_Prop, _$4_Object_46defineProperty(_8u_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IO_, _$4_Object_46defineProperty(_8u_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_HK_Box, _HM_Group);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Jq_, _$4_Object_46defineProperty(_Ha_BoxWrapper, "create", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_Ha_BoxWrapper, _Hi_Term);

  var _2Q_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HH_Const, _$4_Object_46defineProperty(_2Q_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HI_, _$4_Object_46defineProperty(_2Q_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HJ_, _$4_Object_46defineProperty(_2Q_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _HH_Const.prototype = _2Q_;

  _$5_Object_46setPrototypeOf(_HH_Const, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IP_, _$4_Object_46defineProperty(_8u_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IQ_, _$4_Object_46defineProperty(_8u_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _8q_node = (__constructor.prototype = _8u_, new __constructor());

  _8q_node.key = "nd38";
  _8q_node.shape = null;
  _8q_node.text = "s";
  _8q_node.colour = "indianred1";
  _8q_node.name = void 0;
  _8q_node.graph = _6_graph;
  _8q_node.width = null;
  _8q_node.height = null;
  var _8t_ = [_7e_];
  _8q_node.links = _8t_;

  _9_.set("nd38", _8q_node);

  var _8v_node = (__constructor.prototype = _5L_, new __constructor());

  _8v_node.key = "nd41";
  _8v_node.shape = null;
  _8v_node.text = "C0";
  _8v_node.colour = "cyan";
  _8v_node.name = void 0;
  _8v_node.graph = _6_graph;
  _8v_node.width = ".3";
  _8v_node.height = ".3";
  var _90_ = [_7l_];
  _8v_node.links = _90_;

  _9_.set("nd41", _8v_node);

  var _97_node = (__constructor.prototype = _8h_, new __constructor());

  _97_node.key = "nd42";
  _97_node.shape = null;
  _97_node.text = "?";
  _97_node.colour = "cyan";
  _97_node.name = "wrm";
  _97_node.graph = _6_graph;
  _97_node.width = ".3";
  _97_node.height = ".3";
  var _9C_ = [_7N_, _6s_];
  _97_node.links = _9C_;

  _9_.set("nd42", _97_node);

  var _9E_node = (__constructor.prototype = _8p_, new __constructor());

  _9E_node.key = "nd44";
  _9E_node.shape = null;
  _9E_node.text = "D";
  _9E_node.colour = "cyan";
  _9E_node.name = void 0;
  _9E_node.graph = _6_graph;
  _9E_node.width = ".3";
  _9E_node.height = ".3";
  var _9J_ = [_6Z_, _6i_];
  _9E_node.links = _9J_;

  _9_.set("nd44", _9E_node);

  var _9P_ = (__constructor.prototype = _29_, new __constructor());

  _IR_Delta.prototype = _9P_;

  _$5_Object_46setPrototypeOf(_IR_Delta, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IR_Delta, _$4_Object_46defineProperty(_9P_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IS_, _$4_Object_46defineProperty(_9P_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IT_, _$4_Object_46defineProperty(_9P_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IU_, _$4_Object_46defineProperty(_9P_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _9K_fromNode = (__constructor.prototype = _9P_, new __constructor());

  _9K_fromNode.key = "nd45";
  _9K_fromNode.shape = null;
  _9K_fromNode.text = "\u0394";
  _9K_fromNode.colour = "indianred1";
  _9K_fromNode.name = void 0;
  _9K_fromNode.graph = _6_graph;
  _9K_fromNode.width = null;
  _9K_fromNode.height = null;
  var _9N_ = [_6e_, _6m_, _6R_outLink,,];
  _9N_.length = 3;
  _9K_fromNode.links = _9N_;

  _9_.set("nd45", _9K_fromNode);

  var _9g_node = (__constructor.prototype = _2Z_, new __constructor());

  _9g_node.key = "nd48";
  _9g_node.shape = null;
  _9g_node.text = "!";
  _9g_node.colour = "cyan";
  _9g_node.name = 7;
  _9g_node.graph = _6_graph;
  _9g_node.width = ".3";
  _9g_node.height = ".3";
  var _9l_ = [_9T_, _6e_];
  _9g_node.links = _9l_;

  _9_.set("nd48", _9g_node);

  var _9c_node = (__constructor.prototype = _2Q_, new __constructor());

  _9c_node.key = "nd49";
  _9c_node.shape = null;
  _9c_node.text = 7;
  _9c_node.colour = "mediumpurple1";
  _9c_node.name = 7;
  _9c_node.graph = _6_graph;
  _9c_node.width = null;
  _9c_node.height = null;
  var _9f_ = [_9T_];
  _9c_node.links = _9f_;

  _9_.set("nd49", _9c_node);

  var _9n_node = (__constructor.prototype = _5L_, new __constructor());

  _9n_node.key = "nd54";
  _9n_node.shape = null;
  _9n_node.text = "C0";
  _9n_node.colour = "cyan";
  _9n_node.name = void 0;
  _9n_node.graph = _6_graph;
  _9n_node.width = ".3";
  _9n_node.height = ".3";
  var _9s_ = [_6x_];
  _9n_node.links = _9s_;

  _9_.set("nd54", _9n_node);

  var _9t_node = (__constructor.prototype = _9x_, new __constructor());

  _9t_node.key = "nd55";
  _9t_node.shape = null;
  _9t_node.text = "'";
  _9t_node.colour = "mediumpurple1";
  _9t_node.name = void 0;
  _9t_node.graph = _6_graph;
  _9t_node.width = null;
  _9t_node.height = null;
  var _9w_ = [_6s_, _6x_, _71_];
  _9t_node.links = _9w_;

  _9_.set("nd55", _9t_node);

  var _A5_fromNode = (__constructor.prototype = _8h_, new __constructor());

  _A5_fromNode.key = "nd56";
  _A5_fromNode.shape = null;
  _A5_fromNode.text = "?";
  _A5_fromNode.colour = "cyan";
  _A5_fromNode.name = "x";
  _A5_fromNode.graph = _6_graph;
  _A5_fromNode.width = ".3";
  _A5_fromNode.height = ".3";
  var _AA_ = [_6R_outLink, _13_link,,];
  _AA_.length = 2;
  _A5_fromNode.links = _AA_;

  _9_.set("nd56", _A5_fromNode);

  var _AD_node = (__constructor.prototype = _8p_, new __constructor());

  _AD_node.key = "nd58";
  _AD_node.shape = null;
  _AD_node.text = "D";
  _AD_node.colour = "cyan";
  _AD_node.name = void 0;
  _AD_node.graph = _6_graph;
  _AD_node.width = ".3";
  _AD_node.height = ".3";
  var _AI_ = [_1S_link, _1X_link];
  _AD_node.links = _AI_;

  _9_.set("nd58", _AD_node);

  var _AJ_otherNode = (__constructor.prototype = _5L_, new __constructor());

  _AJ_otherNode.key = "nd62";
  _AJ_otherNode.shape = null;
  _AJ_otherNode.text = "C0";
  _AJ_otherNode.colour = "cyan";
  _AJ_otherNode.name = void 0;
  _AJ_otherNode.graph = _6_graph;
  _AJ_otherNode.width = ".3";
  _AJ_otherNode.height = ".3";
  var _AO_ = [_1e_link];
  _AJ_otherNode.links = _AO_;

  _9_.set("nd62", _AJ_otherNode);

  var _2s_ = (__constructor.prototype = _29_, new __constructor());

  _Hp_Pair.prototype = _2s_;

  _$5_Object_46setPrototypeOf(_Hp_Pair, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hp_Pair, _$4_Object_46defineProperty(_2s_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hq_, _$4_Object_46defineProperty(_2s_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hr_, _$4_Object_46defineProperty(_2s_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hs_, _$4_Object_46defineProperty(_2s_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2n_toNode = (__constructor.prototype = _2s_, new __constructor());

  _2n_toNode.key = "nd76";
  _2n_toNode.shape = null;
  _2n_toNode.text = ",";
  _2n_toNode.colour = "mediumpurple1";
  _2n_toNode.name = void 0;
  _2n_toNode.graph = _6_graph;
  _2n_toNode.width = null;
  _2n_toNode.height = null;
  var _2q_ = [_p_link, _t_link, _1B_link,,];
  _2q_.length = 3;
  _2n_toNode.links = _2q_;

  _9_.set("nd76", _2n_toNode);

  var _32_ = (__constructor.prototype = _29_, new __constructor());

  _Ht_BinOp.prototype = _32_;
  var _Ju_BinOpType = {
    And: 0,
    Or: 1,
    Plus: 2,
    Sub: 3,
    Mult: 4,
    Div: 7,
    Lte: 5,
    SymPlus: 6,
    SymMult: 8,
    SymDot: 9
  };
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Js_, _$4_Object_46defineProperty(_Ht_BinOp, "createPlus", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Jt_, _$4_Object_46defineProperty(_Ht_BinOp, "createMult", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_Ht_BinOp, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ht_BinOp, _$4_Object_46defineProperty(_32_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hu_, _$4_Object_46defineProperty(_32_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hv_, _$4_Object_46defineProperty(_32_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hw_, _$4_Object_46defineProperty(_32_, "binOpApply", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hx_, _$4_Object_46defineProperty(_32_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2t_fromNode = (__constructor.prototype = _32_, new __constructor());

  _2t_fromNode.key = "nd77";
  _2t_fromNode.shape = null;
  _2t_fromNode.text = "+";
  _2t_fromNode.colour = "mediumpurple1";
  _2t_fromNode.name = void 0;
  _2t_fromNode.graph = _6_graph;
  _2t_fromNode.width = null;
  _2t_fromNode.height = null;
  var _2w_ = [_T_link, _p_link, _2x_,,];
  _2w_.length = 3;
  _2t_fromNode.links = _2w_;
  _2t_fromNode.subType = 2;

  _9_.set("nd77", _2t_fromNode);

  var _33_fromNode = (__constructor.prototype = _32_, new __constructor());

  _33_fromNode.key = "nd78";
  _33_fromNode.shape = null;
  _33_fromNode.text = "*";
  _33_fromNode.colour = "mediumpurple1";
  _33_fromNode.name = void 0;
  _33_fromNode.graph = _6_graph;
  _33_fromNode.width = null;
  _33_fromNode.height = null;
  var _36_ = [_T_link, _10_link, _37_,,];
  _36_.length = 3;
  _33_fromNode.links = _36_;
  _33_fromNode.subType = 4;

  _9_.set("nd78", _33_fromNode);

  var _3S_provContent = (__constructor.prototype = _2Z_, new __constructor());

  _3S_provContent.key = "nd81";
  _3S_provContent.shape = null;
  _3S_provContent.text = "!";
  _3S_provContent.colour = "cyan";
  _3S_provContent.name = 1;
  _3S_provContent.graph = _6_graph;
  _3S_provContent.width = ".3";
  _3S_provContent.height = ".3";
  var _3X_ = [_3F_link, _P_link,,];
  _3X_.length = 2;
  _3S_provContent.links = _3X_;

  _9_.set("nd81", _3S_provContent);

  var _3O_node = (__constructor.prototype = _2Q_, new __constructor());

  _3O_node.key = "nd82";
  _3O_node.shape = null;
  _3O_node.text = 1;
  _3O_node.colour = "mediumpurple1";
  _3O_node.name = 1;
  _3O_node.graph = _6_graph;
  _3O_node.width = null;
  _3O_node.height = null;
  var _3R_ = [_3F_link];
  _3O_node.links = _3R_;

  _9_.set("nd82", _3O_node);

  var _3q_provContent = (__constructor.prototype = _2Z_, new __constructor());

  _3q_provContent.key = "nd91";
  _3q_provContent.shape = null;
  _3q_provContent.text = "!";
  _3q_provContent.colour = "cyan";
  _3q_provContent.name = 0;
  _3q_provContent.graph = _6_graph;
  _3q_provContent.width = ".3";
  _3q_provContent.height = ".3";
  var _3v_ = [_3d_link, _Y_link,,];
  _3v_.length = 2;
  _3q_provContent.links = _3v_;

  _9_.set("nd91", _3q_provContent);

  var _3m_node = (__constructor.prototype = _2Q_, new __constructor());

  _3m_node.key = "nd92";
  _3m_node.shape = null;
  _3m_node.text = 0;
  _3m_node.colour = "mediumpurple1";
  _3m_node.name = 0;
  _3m_node.graph = _6_graph;
  _3m_node.width = null;
  _3m_node.height = null;
  var _3p_ = [_3d_link];
  _3m_node.links = _3p_;

  _9_.set("nd92", _3m_node);

  var _3y_fromNode = (__constructor.prototype = _32_, new __constructor());

  _3y_fromNode.key = "nd97";
  _3y_fromNode.shape = null;
  _3y_fromNode.text = "+";
  _3y_fromNode.colour = "mediumpurple1";
  _3y_fromNode.name = void 0;
  _3y_fromNode.graph = _6_graph;
  _3y_fromNode.width = null;
  _3y_fromNode.height = null;
  var _41_ = [_g_link, _t_link, _42_link,,];
  _41_.length = 3;
  _3y_fromNode.links = _41_;
  _3y_fromNode.subType = 2;

  _9_.set("nd97", _3y_fromNode);

  var _46_prev = (__constructor.prototype = _32_, new __constructor());

  _46_prev.key = "nd98";
  _46_prev.shape = null;
  _46_prev.text = "*";
  _46_prev.colour = "mediumpurple1";
  _46_prev.name = void 0;
  _46_prev.graph = _6_graph;
  _46_prev.width = null;
  _46_prev.height = null;
  var _49_ = [_g_link, _w_link, _4A_link,,];
  _49_.length = 3;
  _46_prev.links = _49_;
  _46_prev.subType = 4;

  _9_.set("nd98", _46_prev);

  var _4U_provContent = (__constructor.prototype = _2Z_, new __constructor());

  _4U_provContent.key = "nd101";
  _4U_provContent.shape = null;
  _4U_provContent.text = "!";
  _4U_provContent.colour = "cyan";
  _4U_provContent.name = 1;
  _4U_provContent.graph = _6_graph;
  _4U_provContent.width = ".3";
  _4U_provContent.height = ".3";
  var _4Z_ = [_4H_link, _c_link,,];
  _4Z_.length = 2;
  _4U_provContent.links = _4Z_;

  _9_.set("nd101", _4U_provContent);

  var _4Q_node = (__constructor.prototype = _2Q_, new __constructor());

  _4Q_node.key = "nd102";
  _4Q_node.shape = null;
  _4Q_node.text = 1;
  _4Q_node.colour = "mediumpurple1";
  _4Q_node.name = 1;
  _4Q_node.graph = _6_graph;
  _4Q_node.width = null;
  _4Q_node.height = null;
  var _4T_ = [_4H_link];
  _4Q_node.links = _4T_;

  _9_.set("nd102", _4Q_node);

  var _4s_provContent = (__constructor.prototype = _2Z_, new __constructor());

  _4s_provContent.key = "nd111";
  _4s_provContent.shape = null;
  _4s_provContent.text = "!";
  _4s_provContent.colour = "cyan";
  _4s_provContent.name = 0;
  _4s_provContent.graph = _6_graph;
  _4s_provContent.width = ".3";
  _4s_provContent.height = ".3";
  var _4x_ = [_4f_link, _l_link,,];
  _4x_.length = 2;
  _4s_provContent.links = _4x_;

  _9_.set("nd111", _4s_provContent);

  var _4o_node = (__constructor.prototype = _2Q_, new __constructor());

  _4o_node.key = "nd112";
  _4o_node.shape = null;
  _4o_node.text = 0;
  _4o_node.colour = "mediumpurple1";
  _4o_node.name = 0;
  _4o_node.graph = _6_graph;
  _4o_node.width = null;
  _4o_node.height = null;
  var _4r_ = [_4f_link];
  _4o_node.links = _4r_;

  _9_.set("nd112", _4o_node);

  var _50_right = (__constructor.prototype = _58_, new __constructor());

  _50_right.key = "nd119";
  _50_right.shape = null;
  _50_right.text = "C";
  _50_right.colour = "cyan";
  _50_right.name = "x";
  _50_right.graph = _6_graph;
  _50_right.width = ".3";
  _50_right.height = ".3";
  var _56_ = [_13_link, _17_nextLink, _w_link, _10_link,,];
  _56_.length = 4;
  _50_right.links = _56_;

  _9_.set("nd119", _50_right);

  var _2T_node = (__constructor.prototype = _2Z_, new __constructor());

  _2T_node.key = "nd125";
  _2T_node.shape = null;
  _2T_node.text = "!";
  _2T_node.colour = "cyan";
  _2T_node.name = 0;
  _2T_node.graph = _6_graph;
  _2T_node.width = ".3";
  _2T_node.height = ".3";
  var _2Y_ = [_2D_link, _F_link];
  _2T_node.links = _2Y_;

  _9_.set("nd125", _2T_node);

  var _2M_node = (__constructor.prototype = _2Q_, new __constructor());

  _2M_node.key = "nd126";
  _2M_node.shape = null;
  _2M_node.text = 0;
  _2M_node.colour = "mediumpurple1";
  _2M_node.name = 0;
  _2M_node.graph = _6_graph;
  _2M_node.width = null;
  _2M_node.height = null;
  var _2P_ = [_2D_link];
  _2M_node.links = _2P_;

  _9_.set("nd126", _2M_node);

  var _2j_ = (__constructor.prototype = _29_, new __constructor());

  _Hl_Mod.prototype = _2j_;

  _$5_Object_46setPrototypeOf(_Hl_Mod, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hl_Mod, _$4_Object_46defineProperty(_2j_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hm_, _$4_Object_46defineProperty(_2j_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hn_, _$4_Object_46defineProperty(_2j_, "update", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ho_, _$4_Object_46defineProperty(_2j_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2e_toNode = (__constructor.prototype = _2j_, new __constructor());

  _2e_toNode.key = "nd131";
  _2e_toNode.shape = null;
  _2e_toNode.text = "M";
  _2e_toNode.colour = "indianred1";
  _2e_toNode.name = void 0;
  _2e_toNode.graph = _6_graph;
  _2e_toNode.width = null;
  _2e_toNode.height = null;
  var _2h_ = [_L_link, _F_link, _17_nextLink,,];
  _2h_.length = 3;
  _2e_toNode.links = _2h_;

  _9_.set("nd131", _2e_toNode);

  var _2k_toNode = (__constructor.prototype = _2Q_, new __constructor());

  _2k_toNode.key = "nd132";
  _2k_toNode.shape = null;
  _2k_toNode.text = 0;
  _2k_toNode.colour = "mediumpurple1";
  _2k_toNode.name = 0;
  _2k_toNode.graph = _6_graph;
  _2k_toNode.width = null;
  _2k_toNode.height = null;
  var _2m_ = [_L_link];
  _2k_toNode.links = _2m_;

  _9_.set("nd132", _2k_toNode);

  var _5E_ = (__constructor.prototype = _29_, new __constructor());

  _I2_VectorMatch.prototype = _5E_;

  _$5_Object_46setPrototypeOf(_I2_VectorMatch, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I2_VectorMatch, _$4_Object_46defineProperty(_5E_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I3_, _$4_Object_46defineProperty(_5E_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _5y_ = (__constructor.prototype = _2Q_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I8_Vector, _$4_Object_46defineProperty(_5y_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I9_, _$4_Object_46defineProperty(_5y_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IA_, _$4_Object_46defineProperty(_5y_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _I8_Vector.prototype = _5y_;
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K2_, _$4_Object_46defineProperty(_I8_Vector, "generateBaseVector", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K3_, _$4_Object_46defineProperty(_I8_Vector, "createBasis", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K4_, _$4_Object_46defineProperty(_I8_Vector, "create", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K5_, _$4_Object_46defineProperty(_I8_Vector, "stringify", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_I8_Vector, _HH_Const);

  var _AY_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IY_SymBinOp, _$4_Object_46defineProperty(_AY_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _IZ_, _$4_Object_46defineProperty(_AY_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ia_, _$4_Object_46defineProperty(_AY_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ib_, _$4_Object_46defineProperty(_AY_, "binOpApply", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ic_, _$4_Object_46defineProperty(_AY_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _IY_SymBinOp.prototype = _AY_;
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K6_, _$4_Object_46defineProperty(_IY_SymBinOp, "createPlus", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K7_, _$4_Object_46defineProperty(_IY_SymBinOp, "createMult", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K8_, _$4_Object_46defineProperty(_IY_SymBinOp, "createDot", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  _$5_Object_46setPrototypeOf(_IY_SymBinOp, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I4_, _$4_Object_46defineProperty(_5E_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _I5_, _$4_Object_46defineProperty(_5E_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _59_fromNode = (__constructor.prototype = _5E_, new __constructor());

  _59_fromNode.key = "nd137";
  _59_fromNode.shape = null;
  _59_fromNode.text = "P0";
  _59_fromNode.colour = "indianred1";
  _59_fromNode.name = null;
  _59_fromNode.graph = _6_graph;
  _59_fromNode.width = null;
  _59_fromNode.height = null;
  var _5C_ = [_37_, _1K_link];
  _59_fromNode.links = _5C_;
  _59_fromNode.totalLength = 4;

  _9_.set("nd137", _59_fromNode);

  var _5F_weak = (__constructor.prototype = _5L_, new __constructor());

  _5F_weak.key = "nd138";
  _5F_weak.shape = null;
  _5F_weak.text = "\u01860";
  _5F_weak.colour = "cyan";
  _5F_weak.name = void 0;
  _5F_weak.graph = _6_graph;
  _5F_weak.width = ".3";
  _5F_weak.height = ".3";
  var _5K_ = [_P_link];
  _5F_weak.links = _5K_;

  _9_.set("nd138", _5F_weak);

  var _5M_fromNode = (__constructor.prototype = _5E_, new __constructor());

  _5M_fromNode.key = "nd139";
  _5M_fromNode.shape = null;
  _5M_fromNode.text = "P1";
  _5M_fromNode.colour = "indianred1";
  _5M_fromNode.name = null;
  _5M_fromNode.graph = _6_graph;
  _5M_fromNode.width = null;
  _5M_fromNode.height = null;
  var _5P_ = [_2x_, _1O_link];
  _5M_fromNode.links = _5P_;
  _5M_fromNode.totalLength = 4;

  _9_.set("nd139", _5M_fromNode);

  var _5Q_weak = (__constructor.prototype = _5L_, new __constructor());

  _5Q_weak.key = "nd140";
  _5Q_weak.shape = null;
  _5Q_weak.text = "\u01860";
  _5Q_weak.colour = "cyan";
  _5Q_weak.name = void 0;
  _5Q_weak.graph = _6_graph;
  _5Q_weak.width = ".3";
  _5Q_weak.height = ".3";
  var _5V_ = [_Y_link];
  _5Q_weak.links = _5V_;

  _9_.set("nd140", _5Q_weak);

  var _5W_weak = (__constructor.prototype = _5L_, new __constructor());

  _5W_weak.key = "nd142";
  _5W_weak.shape = null;
  _5W_weak.text = "\u01860";
  _5W_weak.colour = "cyan";
  _5W_weak.name = void 0;
  _5W_weak.graph = _6_graph;
  _5W_weak.width = ".3";
  _5W_weak.height = ".3";
  var _5b_ = [_c_link];
  _5W_weak.links = _5b_;

  _9_.set("nd142", _5W_weak);

  var _5c_weak = (__constructor.prototype = _5L_, new __constructor());

  _5c_weak.key = "nd144";
  _5c_weak.shape = null;
  _5c_weak.text = "\u01860";
  _5c_weak.colour = "cyan";
  _5c_weak.name = void 0;
  _5c_weak.graph = _6_graph;
  _5c_weak.width = ".3";
  _5c_weak.height = ".3";
  var _5h_ = [_l_link];
  _5c_weak.links = _5h_;

  _9_.set("nd144", _5c_weak);

  var _66_toNode = (__constructor.prototype = _2Z_, new __constructor());

  _66_toNode.key = "nd147";
  _66_toNode.shape = null;
  _66_toNode.text = "!";
  _66_toNode.colour = "cyan";
  _66_toNode.name = void 0;
  _66_toNode.graph = _6_graph;
  _66_toNode.width = ".3";
  _66_toNode.height = ".3";
  var _6B_ = [_1F_link, _1K_link, _1O_link,,,];
  _6B_.length = 3;
  _66_toNode.links = _6B_;

  _9_.set("nd147", _66_toNode);

  var _5u_toNode = (__constructor.prototype = _5y_, new __constructor());

  _5u_toNode.key = "nd148";
  _5u_toNode.shape = null;
  _5u_toNode.text = "[1,0,1,0]";
  _5u_toNode.colour = "mediumpurple1";
  _5u_toNode.name = "[1,0,1,0]";
  _5u_toNode.graph = _6_graph;
  _5u_toNode.width = null;
  _5u_toNode.height = null;
  var _5x_ = [_5p_nextLink];
  _5u_toNode.links = _5x_;

  _9_.set("nd148", _5u_toNode);

  var _5z_toNode = (__constructor.prototype = _58_, new __constructor());

  _5z_toNode.key = "nd149";
  _5z_toNode.shape = null;
  _5z_toNode.text = "C";
  _5z_toNode.colour = "cyan";
  _5z_toNode.name = "[1,0,1,0]";
  _5z_toNode.graph = _6_graph;
  _5z_toNode.width = ".3";
  _5z_toNode.height = ".3";
  var _64_ = [_5p_nextLink, _1F_link, _1e_link, _1n_link, _1v_nextLink,,];
  _64_.length = 5;
  _5z_toNode.links = _64_;

  _9_.set("nd149", _5z_toNode);

  var _AP_rightNode = (__constructor.prototype = _5y_, new __constructor());

  _AP_rightNode.key = "nd150";
  _AP_rightNode.shape = null;
  _AP_rightNode.text = "[0,0,0,1]";
  _AP_rightNode.colour = "mediumpurple1";
  _AP_rightNode.name = "[0,0,0,1]";
  _AP_rightNode.graph = _6_graph;
  _AP_rightNode.width = null;
  _AP_rightNode.height = null;
  var _AS_ = [_1i_link];
  _AP_rightNode.links = _AS_;

  _9_.set("nd150", _AP_rightNode);

  var _AT_prev = (__constructor.prototype = _AY_, new __constructor());

  _AT_prev.key = "nd151";
  _AT_prev.shape = null;
  _AT_prev.text = "\u22A1";
  _AT_prev.colour = "mediumpurple";
  _AT_prev.name = null;
  _AT_prev.graph = _6_graph;
  _AT_prev.width = null;
  _AT_prev.height = null;
  var _AW_ = [_1i_link, _1n_link, _42_link];
  _AT_prev.links = _AW_;
  _AT_prev.subType = 9;

  _9_.set("nd151", _AT_prev);

  var _AZ_toNode = (__constructor.prototype = _5y_, new __constructor());

  _AZ_toNode.key = "nd152";
  _AZ_toNode.shape = null;
  _AZ_toNode.text = "[0,0,1,0]";
  _AZ_toNode.colour = "mediumpurple1";
  _AZ_toNode.name = "[0,0,1,0]";
  _AZ_toNode.graph = _6_graph;
  _AZ_toNode.width = null;
  _AZ_toNode.height = null;
  var _Ac_ = [_1q_link];
  _AZ_toNode.links = _Ac_;

  _9_.set("nd152", _AZ_toNode);

  var _Ad_prev = (__constructor.prototype = _AY_, new __constructor());

  _Ad_prev.key = "nd153";
  _Ad_prev.shape = null;
  _Ad_prev.text = "\u22A1";
  _Ad_prev.colour = "mediumpurple";
  _Ad_prev.name = null;
  _Ad_prev.graph = _6_graph;
  _Ad_prev.width = null;
  _Ad_prev.height = null;
  var _Ag_ = [_1q_link, _1v_nextLink, _4A_link];
  _Ad_prev.links = _Ag_;
  _Ad_prev.subType = 9;

  _9_.set("nd153", _Ad_prev);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H6_, _$4_Object_46defineProperty(_29_, "addToGraph", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H7_, _$4_Object_46defineProperty(_29_, "addToGroup", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H8_, _$4_Object_46defineProperty(_29_, "changeToGroup", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _H9_, _$4_Object_46defineProperty(_29_, "findLinksConnected", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HA_, _$4_Object_46defineProperty(_29_, "findLinksInto", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HB_, _$4_Object_46defineProperty(_29_, "findLinksOutOf", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HC_, _$4_Object_46defineProperty(_29_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HD_, _$4_Object_46defineProperty(_29_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HE_, _$4_Object_46defineProperty(_29_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HF_, _$4_Object_46defineProperty(_29_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2S_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HM_Group, _$4_Object_46defineProperty(_2S_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HN_, _$4_Object_46defineProperty(_2S_, "addNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HO_, _$4_Object_46defineProperty(_2S_, "removeNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HP_, _$4_Object_46defineProperty(_2S_, "addLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HQ_, _$4_Object_46defineProperty(_2S_, "removeLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HR_, _$4_Object_46defineProperty(_2S_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _B_wrapper = (__constructor.prototype = _2S_, new __constructor());

  _B_wrapper.key = "nd0";
  _B_wrapper.shape = null;
  _B_wrapper.text = null;
  _B_wrapper.colour = null;
  _B_wrapper.name = void 0;
  _B_wrapper.graph = _6_graph;
  _B_wrapper.group = null;
  _B_wrapper.width = null;
  _B_wrapper.height = null;
  var _E_ = [_F_link, _L_link, _P_link, _T_link, _Y_link, _c_link, _g_link, _l_link, _p_link, _t_link, _w_link, _10_link, _13_link, _17_nextLink, _1B_link, _1F_link, _1K_link, _1O_link, _1S_link, _1X_link, _1a_link, _1e_link, _1i_link, _1n_link, _1q_link, _1v_nextLink,,,,,,];
  _E_.length = 26;
  _B_wrapper.links = _E_;

  var _2d_ = (__constructor.prototype = _2S_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hi_Term, _$4_Object_46defineProperty(_2d_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hj_, _$4_Object_46defineProperty(_2d_, "set", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hk_, _$4_Object_46defineProperty(_2d_, "createPaxsOnTopOf", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2c_ = (__constructor.prototype = _2d_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ha_BoxWrapper, _$4_Object_46defineProperty(_2c_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hb_, _$4_Object_46defineProperty(_2c_, "set", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hc_, _$4_Object_46defineProperty(_2c_, "removeAux", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hd_, _$4_Object_46defineProperty(_2c_, "moveOut", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _He_, _$4_Object_46defineProperty(_2c_, "copyBox", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hf_, _$4_Object_46defineProperty(_2c_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hg_, _$4_Object_46defineProperty(_2c_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Hh_, _$4_Object_46defineProperty(_2c_, "deleteAndPreserveLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2A_node = (__constructor.prototype = _2c_, new __constructor());

  _2A_node.key = "nd123";
  _2A_node.shape = null;
  _2A_node.text = null;
  _2A_node.colour = null;
  _2A_node.name = void 0;
  _2A_node.graph = _6_graph;
  _2A_node.group = _B_wrapper;
  _2A_node.width = null;
  _2A_node.height = null;
  var _2C_ = [_2D_link];
  _2A_node.links = _2C_;

  var _2R_ = (__constructor.prototype = _2S_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HK_Box, _$4_Object_46defineProperty(_2R_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _HL_, _$4_Object_46defineProperty(_2R_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _2I_node = (__constructor.prototype = _2R_, new __constructor());

  _2I_node.key = "nd124";
  _2I_node.shape = null;
  _2I_node.text = null;
  _2I_node.colour = null;
  _2I_node.name = void 0;
  _2I_node.graph = _6_graph;
  _2I_node.group = _2A_node;
  _2I_node.width = null;
  _2I_node.height = null;
  var _2K_ = [];
  _2I_node.links = _2K_;
  var _2L_ = [_2M_node];
  _2I_node.nodes = _2L_;
  var _2H_ = [_2I_node, _2T_node];
  _2A_node.nodes = _2H_;
  _2A_node.prin = _2T_node;
  var _2b_ = [];
  _2A_node.auxs = _2b_;
  _2A_node.box = _2I_node;

  var _3C_node = (__constructor.prototype = _2c_, new __constructor());

  _3C_node.key = "nd79";
  _3C_node.shape = null;
  _3C_node.text = null;
  _3C_node.colour = null;
  _3C_node.name = void 0;
  _3C_node.graph = _6_graph;
  _3C_node.group = _B_wrapper;
  _3C_node.width = null;
  _3C_node.height = null;
  var _3E_ = [_3F_link];
  _3C_node.links = _3E_;

  var _3K_node = (__constructor.prototype = _2R_, new __constructor());

  _3K_node.key = "nd80";
  _3K_node.shape = null;
  _3K_node.text = null;
  _3K_node.colour = null;
  _3K_node.name = void 0;
  _3K_node.graph = _6_graph;
  _3K_node.group = _3C_node;
  _3K_node.width = null;
  _3K_node.height = null;
  var _3M_ = [];
  _3K_node.links = _3M_;
  var _3N_ = [_3O_node];
  _3K_node.nodes = _3N_;
  var _3J_ = [_3K_node, _3S_provContent];
  _3C_node.nodes = _3J_;
  _3C_node.prin = _3S_provContent;
  var _3Z_ = [];
  _3C_node.auxs = _3Z_;
  _3C_node.box = _3K_node;

  var _3a_node = (__constructor.prototype = _2c_, new __constructor());

  _3a_node.key = "nd89";
  _3a_node.shape = null;
  _3a_node.text = null;
  _3a_node.colour = null;
  _3a_node.name = void 0;
  _3a_node.graph = _6_graph;
  _3a_node.group = _B_wrapper;
  _3a_node.width = null;
  _3a_node.height = null;
  var _3c_ = [_3d_link];
  _3a_node.links = _3c_;

  var _3i_node = (__constructor.prototype = _2R_, new __constructor());

  _3i_node.key = "nd90";
  _3i_node.shape = null;
  _3i_node.text = null;
  _3i_node.colour = null;
  _3i_node.name = void 0;
  _3i_node.graph = _6_graph;
  _3i_node.group = _3a_node;
  _3i_node.width = null;
  _3i_node.height = null;
  var _3k_ = [];
  _3i_node.links = _3k_;
  var _3l_ = [_3m_node];
  _3i_node.nodes = _3l_;
  var _3h_ = [_3i_node, _3q_provContent];
  _3a_node.nodes = _3h_;
  _3a_node.prin = _3q_provContent;
  var _3x_ = [];
  _3a_node.auxs = _3x_;
  _3a_node.box = _3i_node;

  var _4E_node = (__constructor.prototype = _2c_, new __constructor());

  _4E_node.key = "nd99";
  _4E_node.shape = null;
  _4E_node.text = null;
  _4E_node.colour = null;
  _4E_node.name = void 0;
  _4E_node.graph = _6_graph;
  _4E_node.group = _B_wrapper;
  _4E_node.width = null;
  _4E_node.height = null;
  var _4G_ = [_4H_link];
  _4E_node.links = _4G_;

  var _4M_node = (__constructor.prototype = _2R_, new __constructor());

  _4M_node.key = "nd100";
  _4M_node.shape = null;
  _4M_node.text = null;
  _4M_node.colour = null;
  _4M_node.name = void 0;
  _4M_node.graph = _6_graph;
  _4M_node.group = _4E_node;
  _4M_node.width = null;
  _4M_node.height = null;
  var _4O_ = [];
  _4M_node.links = _4O_;
  var _4P_ = [_4Q_node];
  _4M_node.nodes = _4P_;
  var _4L_ = [_4M_node, _4U_provContent];
  _4E_node.nodes = _4L_;
  _4E_node.prin = _4U_provContent;
  var _4b_ = [];
  _4E_node.auxs = _4b_;
  _4E_node.box = _4M_node;

  var _4c_node = (__constructor.prototype = _2c_, new __constructor());

  _4c_node.key = "nd109";
  _4c_node.shape = null;
  _4c_node.text = null;
  _4c_node.colour = null;
  _4c_node.name = void 0;
  _4c_node.graph = _6_graph;
  _4c_node.group = _B_wrapper;
  _4c_node.width = null;
  _4c_node.height = null;
  var _4e_ = [_4f_link];
  _4c_node.links = _4e_;

  var _4k_node = (__constructor.prototype = _2R_, new __constructor());

  _4k_node.key = "nd110";
  _4k_node.shape = null;
  _4k_node.text = null;
  _4k_node.colour = null;
  _4k_node.name = void 0;
  _4k_node.graph = _6_graph;
  _4k_node.group = _4c_node;
  _4k_node.width = null;
  _4k_node.height = null;
  var _4m_ = [];
  _4k_node.links = _4m_;
  var _4n_ = [_4o_node];
  _4k_node.nodes = _4n_;
  var _4j_ = [_4k_node, _4s_provContent];
  _4c_node.nodes = _4j_;
  _4c_node.prin = _4s_provContent;
  var _4z_ = [];
  _4c_node.auxs = _4z_;
  _4c_node.box = _4k_node;

  var _5i_vecWrapper = (__constructor.prototype = _2c_, new __constructor());

  _5i_vecWrapper.key = "nd145";
  _5i_vecWrapper.shape = null;
  _5i_vecWrapper.text = null;
  _5i_vecWrapper.colour = null;
  _5i_vecWrapper.name = void 0;
  _5i_vecWrapper.graph = _6_graph;
  _5i_vecWrapper.group = _B_wrapper;
  _5i_vecWrapper.width = null;
  _5i_vecWrapper.height = null;
  var _5k_ = [];
  _5i_vecWrapper.links = _5k_;

  var _5m_box = (__constructor.prototype = _2R_, new __constructor());

  _5m_box.key = "nd146";
  _5m_box.shape = null;
  _5m_box.text = null;
  _5m_box.colour = null;
  _5m_box.name = void 0;
  _5m_box.graph = _6_graph;
  _5m_box.group = _5i_vecWrapper;
  _5m_box.width = null;
  _5m_box.height = null;
  var _5o_ = [_5p_nextLink];
  _5m_box.links = _5o_;
  var _5t_ = [_5u_toNode, _5z_toNode];
  _5m_box.nodes = _5t_;
  var _5l_ = [_5m_box, _66_toNode];
  _5i_vecWrapper.nodes = _5l_;
  _5i_vecWrapper.prin = _66_toNode;
  var _6D_ = [];
  _5i_vecWrapper.auxs = _6D_;
  _5i_vecWrapper.box = _5m_box;

  var _6K_node = (__constructor.prototype = _2c_, new __constructor());

  _6K_node.key = "nd18";
  _6K_node.shape = null;
  _6K_node.text = null;
  _6K_node.colour = null;
  _6K_node.name = void 0;
  _6K_node.graph = _6_graph;
  _6K_node.group = _B_wrapper;
  _6K_node.width = null;
  _6K_node.height = null;
  var _6M_ = [_6N_, _6R_outLink];
  _6K_node.links = _6M_;

  var _6W_node = (__constructor.prototype = _2R_, new __constructor());

  _6W_node.key = "nd19";
  _6W_node.shape = null;
  _6W_node.text = null;
  _6W_node.colour = null;
  _6W_node.name = void 0;
  _6W_node.graph = _6_graph;
  _6W_node.group = _6K_node;
  _6W_node.width = null;
  _6W_node.height = null;
  var _6Y_ = [_6Z_, _6e_, _6i_, _6m_, _6p_, _6s_, _6x_, _71_,,];
  _6Y_.length = 8;
  _6W_node.links = _6Y_;

  var _7G_node = (__constructor.prototype = _2c_, new __constructor());

  _7G_node.key = "nd23";
  _7G_node.shape = null;
  _7G_node.text = null;
  _7G_node.colour = null;
  _7G_node.name = void 0;
  _7G_node.graph = _6_graph;
  _7G_node.group = _6W_node;
  _7G_node.width = null;
  _7G_node.height = null;
  var _7I_ = [_7J_, _7N_];
  _7G_node.links = _7I_;

  var _7S_node = (__constructor.prototype = _2R_, new __constructor());

  _7S_node.key = "nd24";
  _7S_node.shape = null;
  _7S_node.text = null;
  _7S_node.colour = null;
  _7S_node.name = void 0;
  _7S_node.graph = _6_graph;
  _7S_node.group = _7G_node;
  _7S_node.width = null;
  _7S_node.height = null;
  var _7U_ = [_7V_, _7a_, _7e_, _7i_, _7l_];
  _7S_node.links = _7U_;

  var _7y_node = (__constructor.prototype = _2c_, new __constructor());

  _7y_node.key = "nd28";
  _7y_node.shape = null;
  _7y_node.text = null;
  _7y_node.colour = null;
  _7y_node.name = void 0;
  _7y_node.graph = _6_graph;
  _7y_node.group = _7S_node;
  _7y_node.width = null;
  _7y_node.height = null;
  var _80_ = [_81_, _85_outLink];
  _7y_node.links = _80_;

  var _89_node = (__constructor.prototype = _2R_, new __constructor());

  _89_node.key = "nd29";
  _89_node.shape = null;
  _89_node.text = null;
  _89_node.colour = null;
  _89_node.name = void 0;
  _89_node.graph = _6_graph;
  _89_node.group = _7y_node;
  _89_node.width = null;
  _89_node.height = null;
  var _8B_ = [_8C_,,];
  _8B_.length = 1;
  _89_node.links = _8B_;
  var _8H_ = [_8I_fromNode, _8N_node,,];
  _8H_.length = 2;
  _89_node.nodes = _8H_;
  var _88_ = [_89_node, _8U_node, _8a_node];
  _7y_node.nodes = _88_;
  _7y_node.prin = _8U_node;
  var _8i_newPaxs = [_8a_node];
  _7y_node.auxs = _8i_newPaxs;
  _7y_node.box = _89_node;
  var _7p_ = [_7q_node, _7u_node, _7y_node, _8j_node, _8q_node, _8v_node];
  _7S_node.nodes = _7p_;
  var _7R_ = [_7S_node, _91_node, _97_node];
  _7G_node.nodes = _7R_;
  _7G_node.prin = _91_node;
  var _9D_newPaxs = [_97_node];
  _7G_node.auxs = _9D_newPaxs;
  _7G_node.box = _7S_node;

  var _9Q_node = (__constructor.prototype = _2c_, new __constructor());

  _9Q_node.key = "nd46";
  _9Q_node.shape = null;
  _9Q_node.text = null;
  _9Q_node.colour = null;
  _9Q_node.name = void 0;
  _9Q_node.graph = _6_graph;
  _9Q_node.group = _6W_node;
  _9Q_node.width = null;
  _9Q_node.height = null;
  var _9S_ = [_9T_];
  _9Q_node.links = _9S_;

  var _9Y_node = (__constructor.prototype = _2R_, new __constructor());

  _9Y_node.key = "nd47";
  _9Y_node.shape = null;
  _9Y_node.text = null;
  _9Y_node.colour = null;
  _9Y_node.name = void 0;
  _9Y_node.graph = _6_graph;
  _9Y_node.group = _9Q_node;
  _9Y_node.width = null;
  _9Y_node.height = null;
  var _9a_ = [];
  _9Y_node.links = _9a_;
  var _9b_ = [_9c_node];
  _9Y_node.nodes = _9b_;
  var _9X_ = [_9Y_node, _9g_node];
  _9Q_node.nodes = _9X_;
  _9Q_node.prin = _9g_node;
  var _9m_ = [];
  _9Q_node.auxs = _9m_;
  _9Q_node.box = _9Y_node;
  var _76_ = [_77_node, _7C_node, _7G_node, _9E_node, _9K_fromNode, _9Q_node, _9n_node, _9t_node,,];
  _76_.length = 8;
  _6W_node.nodes = _76_;
  var _6V_ = [_6W_node, _9z_node, _A5_fromNode];
  _6K_node.nodes = _6V_;
  _6K_node.prin = _9z_node;
  var _AC_newPaxs = [_A5_fromNode];
  _6K_node.auxs = _AC_newPaxs;
  _6K_node.box = _6W_node;
  var _21_ = [_22_fromNode, _2A_node, _2e_toNode, _2k_toNode, _2n_toNode, _2t_fromNode, _33_fromNode, _3C_node, _3a_node, _3y_fromNode, _46_prev, _4E_node, _4c_node, _50_right, _59_fromNode, _5F_weak, _5M_fromNode, _5Q_weak, _5W_weak, _5c_weak, _5i_vecWrapper, _6E_prev, _6K_node, _AD_node, _AJ_otherNode, _AP_rightNode, _AT_prev, _AZ_toNode, _Ad_prev,,,,,,,];
  _21_.length = 29;
  _B_wrapper.nodes = _21_;
  _6_graph.child = _B_wrapper;

  _9_.set("nd0", _B_wrapper);

  _9_.set("nd18", _6K_node);

  _9_.set("nd19", _6W_node);

  _9_.set("nd23", _7G_node);

  _9_.set("nd24", _7S_node);

  _9_.set("nd28", _7y_node);

  _9_.set("nd29", _89_node);

  var _Aj_term = (__constructor.prototype = _2d_, new __constructor());

  _Aj_term.key = "nd33";
  _Aj_term.shape = null;
  _Aj_term.text = null;
  _Aj_term.colour = null;
  _Aj_term.name = void 0;
  _Aj_term.graph = _6_graph;
  _Aj_term.group = null;
  _Aj_term.width = null;
  _Aj_term.height = null;
  var _Ak_ = [];
  _Aj_term.links = _Ak_;
  var _Al_ = [];
  _Aj_term.nodes = _Al_;

  var _Au_ = (__constructor.prototype = _8p_, new __constructor());

  _Id_Var.prototype = _Au_;

  _$5_Object_46setPrototypeOf(_Id_Var, _IL_Der);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Id_Var, _$4_Object_46defineProperty(_Au_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ie_, _$4_Object_46defineProperty(_Au_, "deleteAndPreserveOutLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _Am_toNode = (__constructor.prototype = _Au_, new __constructor());

  _Am_toNode.key = "nd32";
  _Am_toNode.shape = null;
  _Am_toNode.text = "V";
  _Am_toNode.colour = "cyan";
  _Am_toNode.name = "wrm";
  _Am_toNode.graph = _6_graph;
  _Am_toNode.group = _89_node;
  _Am_toNode.width = ".3";
  _Am_toNode.height = ".3";
  var _As_ = [,,];
  _As_.length = 0;
  _Am_toNode.links = _As_;
  _Aj_term.prin = _Am_toNode;
  var _Av_ = [_Am_toNode];
  _Aj_term.auxs = _Av_;

  _9_.set("nd33", _Aj_term);

  var _Ax_left = (__constructor.prototype = _2d_, new __constructor());

  _Ax_left.key = "nd36";
  _Ax_left.shape = null;
  _Ax_left.text = null;
  _Ax_left.colour = null;
  _Ax_left.name = void 0;
  _Ax_left.graph = _6_graph;
  _Ax_left.group = null;
  _Ax_left.width = null;
  _Ax_left.height = null;
  var _Ay_ = [];
  _Ax_left.links = _Ay_;
  var _Az_ = [];
  _Ax_left.nodes = _Az_;
  _Ax_left.prin = _8U_node;
  _Ax_left.auxs = _8i_newPaxs;

  _9_.set("nd36", _Ax_left);

  var _B1_right = (__constructor.prototype = _2d_, new __constructor());

  _B1_right.key = "nd39";
  _B1_right.shape = null;
  _B1_right.text = null;
  _B1_right.colour = null;
  _B1_right.name = void 0;
  _B1_right.graph = _6_graph;
  _B1_right.group = null;
  _B1_right.width = null;
  _B1_right.height = null;
  var _B2_ = [];
  _B1_right.links = _B2_;
  var _B3_ = [];
  _B1_right.nodes = _B3_;
  _B1_right.prin = _8q_node;
  var _B4_ = [];
  _B1_right.auxs = _B4_;

  _9_.set("nd39", _B1_right);

  var _B6_term = (__constructor.prototype = _2d_, new __constructor());

  _B6_term.key = "nd40";
  _B6_term.shape = null;
  _B6_term.text = null;
  _B6_term.colour = null;
  _B6_term.name = void 0;
  _B6_term.graph = _6_graph;
  _B6_term.group = null;
  _B6_term.width = null;
  _B6_term.height = null;
  var _B7_ = [];
  _B6_term.links = _B7_;
  var _B8_ = [];
  _B6_term.nodes = _B8_;
  _B6_term.prin = _7u_node;
  var _B9_newAuxs = [_8a_node];
  _B6_term.auxs = _B9_newAuxs;

  _9_.set("nd40", _B6_term);

  var _BB_left = (__constructor.prototype = _2d_, new __constructor());

  _BB_left.key = "nd43";
  _BB_left.shape = null;
  _BB_left.text = null;
  _BB_left.colour = null;
  _BB_left.name = void 0;
  _BB_left.graph = _6_graph;
  _BB_left.group = null;
  _BB_left.width = null;
  _BB_left.height = null;
  var _BC_ = [];
  _BB_left.links = _BC_;
  var _BD_ = [];
  _BB_left.nodes = _BD_;
  _BB_left.prin = _91_node;
  _BB_left.auxs = _9D_newPaxs;

  _9_.set("nd43", _BB_left);

  _9_.set("nd46", _9Q_node);

  _9_.set("nd47", _9Y_node);

  var _BF_term = (__constructor.prototype = _2d_, new __constructor());

  _BF_term.key = "nd50";
  _BF_term.shape = null;
  _BF_term.text = null;
  _BF_term.colour = null;
  _BF_term.name = void 0;
  _BF_term.graph = _6_graph;
  _BF_term.group = null;
  _BF_term.width = null;
  _BF_term.height = null;
  var _BG_ = [];
  _BF_term.links = _BG_;
  var _BH_ = [];
  _BF_term.nodes = _BH_;
  _BF_term.prin = _9g_node;
  _BF_term.auxs = _9m_;

  _9_.set("nd50", _BF_term);

  var _BJ_right = (__constructor.prototype = _2d_, new __constructor());

  _BJ_right.key = "nd52";
  _BJ_right.shape = null;
  _BJ_right.text = null;
  _BJ_right.colour = null;
  _BJ_right.name = void 0;
  _BJ_right.graph = _6_graph;
  _BJ_right.group = null;
  _BJ_right.width = null;
  _BJ_right.height = null;
  var _BK_ = [];
  _BJ_right.links = _BK_;
  var _BL_ = [];
  _BJ_right.nodes = _BL_;
  _BJ_right.prin = _9K_fromNode;

  var _BN_toNode = (__constructor.prototype = _Au_, new __constructor());

  _BN_toNode.key = "nd51";
  _BN_toNode.shape = null;
  _BN_toNode.text = "V";
  _BN_toNode.colour = "cyan";
  _BN_toNode.name = "x";
  _BN_toNode.graph = _6_graph;
  _BN_toNode.group = _6W_node;
  _BN_toNode.width = ".3";
  _BN_toNode.height = ".3";
  var _BT_ = [,,];
  _BT_.length = 0;
  _BN_toNode.links = _BT_;
  var _BM_auxs = [_BN_toNode];
  _BJ_right.auxs = _BM_auxs;

  _9_.set("nd52", _BJ_right);

  var _BW_term = (__constructor.prototype = _2d_, new __constructor());

  _BW_term.key = "nd53";
  _BW_term.shape = null;
  _BW_term.text = null;
  _BW_term.colour = null;
  _BW_term.name = void 0;
  _BW_term.graph = _6_graph;
  _BW_term.group = null;
  _BW_term.width = null;
  _BW_term.height = null;
  var _BX_ = [];
  _BW_term.links = _BX_;
  var _BY_ = [];
  _BW_term.nodes = _BY_;
  _BW_term.prin = _7C_node;
  var _BZ_newAuxs = [_97_node, _BN_toNode];
  _BW_term.auxs = _BZ_newAuxs;

  _9_.set("nd53", _BW_term);

  var _Bb_left = (__constructor.prototype = _2d_, new __constructor());

  _Bb_left.key = "nd57";
  _Bb_left.shape = null;
  _Bb_left.text = null;
  _Bb_left.colour = null;
  _Bb_left.name = void 0;
  _Bb_left.graph = _6_graph;
  _Bb_left.group = null;
  _Bb_left.width = null;
  _Bb_left.height = null;
  var _Bc_ = [];
  _Bb_left.links = _Bc_;
  var _Bd_ = [];
  _Bb_left.nodes = _Bd_;
  _Bb_left.prin = _9z_node;
  _Bb_left.auxs = _AC_newPaxs;

  _9_.set("nd57", _Bb_left);

  var _Bf_right = (__constructor.prototype = _2d_, new __constructor());

  _Bf_right.key = "nd60";
  _Bf_right.shape = null;
  _Bf_right.text = null;
  _Bf_right.colour = null;
  _Bf_right.name = void 0;
  _Bf_right.graph = _6_graph;
  _Bf_right.group = null;
  _Bf_right.width = null;
  _Bf_right.height = null;
  var _Bg_ = [];
  _Bf_right.links = _Bg_;
  var _Bh_ = [];
  _Bf_right.nodes = _Bh_;

  var _Bi_toNode = (__constructor.prototype = _Au_, new __constructor());

  _Bi_toNode.key = "nd59";
  _Bi_toNode.shape = null;
  _Bi_toNode.text = "V";
  _Bi_toNode.colour = "cyan";
  _Bi_toNode.name = "wr";
  _Bi_toNode.graph = _6_graph;

  var _Bn__95node = (__constructor.prototype = _2R_, new __constructor());

  _Bn__95node.key = "nd14";
  _Bn__95node.shape = null;
  _Bn__95node.text = null;
  _Bn__95node.colour = null;
  _Bn__95node.name = void 0;
  _Bn__95node.graph = _6_graph;
  _Bn__95node.group = _B_wrapper;
  _Bn__95node.width = null;
  _Bn__95node.height = null;
  var _Bp_ = [,,,,,];
  _Bp_.length = 0;
  _Bn__95node.links = _Bp_;
  var _Br_ = [,,,,,,];
  _Br_.length = 0;
  _Bn__95node.nodes = _Br_;
  _Bi_toNode.group = _Bn__95node;
  _Bi_toNode.width = ".3";
  _Bi_toNode.height = ".3";
  var _Bv_ = [,,];
  _Bv_.length = 0;
  _Bi_toNode.links = _Bv_;
  _Bf_right.prin = _Bi_toNode;
  var _Bx_ = [_Bi_toNode];
  _Bf_right.auxs = _Bx_;

  _9_.set("nd60", _Bf_right);

  var _Bz_term = (__constructor.prototype = _2d_, new __constructor());

  _Bz_term.key = "nd61";
  _Bz_term.shape = null;
  _Bz_term.text = null;
  _Bz_term.colour = null;
  _Bz_term.name = void 0;
  _Bz_term.graph = _6_graph;
  _Bz_term.group = null;
  _Bz_term.width = null;
  _Bz_term.height = null;
  var _C0_ = [];
  _Bz_term.links = _C0_;
  var _C1_ = [];
  _Bz_term.nodes = _C1_;
  _Bz_term.prin = _6E_prev;
  var _C2_newAuxs = [_A5_fromNode, _Bi_toNode];
  _Bz_term.auxs = _C2_newAuxs;

  _9_.set("nd61", _Bz_term);

  var _C4_left = (__constructor.prototype = _2d_, new __constructor());

  _C4_left.key = "nd65";
  _C4_left.shape = null;
  _C4_left.text = null;
  _C4_left.colour = null;
  _C4_left.name = void 0;
  _C4_left.graph = _6_graph;
  _C4_left.group = null;
  _C4_left.width = null;
  _C4_left.height = null;
  var _C5_ = [];
  _C4_left.links = _C5_;
  var _C6_ = [];
  _C4_left.nodes = _C6_;

  var _C7_fromNode = (__constructor.prototype = _2Z_, new __constructor());

  _C7_fromNode.key = "nd15";
  _C7_fromNode.shape = null;
  _C7_fromNode.text = "!";
  _C7_fromNode.colour = "cyan";
  _C7_fromNode.name = void 0;
  _C7_fromNode.graph = _6_graph;
  _C7_fromNode.group = _B_wrapper;
  _C7_fromNode.width = ".3";
  _C7_fromNode.height = ".3";
  var _CD_ = [,,];
  _CD_.length = 0;
  _C7_fromNode.links = _CD_;
  _C4_left.prin = _C7_fromNode;
  var _CF_newPaxs = [,,];
  _CF_newPaxs.length = 0;
  _C4_left.auxs = _CF_newPaxs;

  _9_.set("nd65", _C4_left);

  var _CI_box = (__constructor.prototype = _2d_, new __constructor());

  _CI_box.key = "nd69";
  _CI_box.shape = null;
  _CI_box.text = null;
  _CI_box.colour = null;
  _CI_box.name = void 0;
  _CI_box.graph = _6_graph;
  _CI_box.group = null;
  _CI_box.width = null;
  _CI_box.height = null;
  var _CJ_ = [];
  _CI_box.links = _CJ_;
  var _CK_ = [];
  _CI_box.nodes = _CK_;

  var _CL_toNode = (__constructor.prototype = _Au_, new __constructor());

  _CL_toNode.key = "nd68";
  _CL_toNode.shape = null;
  _CL_toNode.text = "V";
  _CL_toNode.colour = "cyan";
  _CL_toNode.name = "wr";
  _CL_toNode.graph = _6_graph;

  var _CQ__95node = (__constructor.prototype = _2R_, new __constructor());

  _CQ__95node.key = "nd9";
  _CQ__95node.shape = null;
  _CQ__95node.text = null;
  _CQ__95node.colour = null;
  _CQ__95node.name = void 0;
  _CQ__95node.graph = _6_graph;
  _CQ__95node.group = _B_wrapper;
  _CQ__95node.width = null;
  _CQ__95node.height = null;
  var _CS_ = [,,,,,,,,];
  _CS_.length = 0;
  _CQ__95node.links = _CS_;
  var _CU_ = [,,,,,,,];
  _CU_.length = 0;
  _CQ__95node.nodes = _CU_;
  _CL_toNode.group = _CQ__95node;
  _CL_toNode.width = ".3";
  _CL_toNode.height = ".3";
  var _CY_ = [,,];
  _CY_.length = 0;
  _CL_toNode.links = _CY_;
  _CI_box.prin = _CL_toNode;
  var _Ca_ = [_CL_toNode];
  _CI_box.auxs = _Ca_;

  _9_.set("nd69", _CI_box);

  var _Cc_right = (__constructor.prototype = _2d_, new __constructor());

  _Cc_right.key = "nd70";
  _Cc_right.shape = null;
  _Cc_right.text = null;
  _Cc_right.colour = null;
  _Cc_right.name = void 0;
  _Cc_right.graph = _6_graph;
  _Cc_right.group = null;
  _Cc_right.width = null;
  _Cc_right.height = null;
  var _Cd_ = [];
  _Cc_right.links = _Cd_;
  var _Ce_ = [];
  _Cc_right.nodes = _Ce_;

  var _Cl_ = (__constructor.prototype = _29_, new __constructor());

  _If_GAbs.prototype = _Cl_;

  _$5_Object_46setPrototypeOf(_If_GAbs, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _If_GAbs, _$4_Object_46defineProperty(_Cl_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ig_, _$4_Object_46defineProperty(_Cl_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ih_, _$4_Object_46defineProperty(_Cl_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ii_, _$4_Object_46defineProperty(_Cl_, "tensorify", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _Di_ = (__constructor.prototype = _2a_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Im_Prov, _$4_Object_46defineProperty(_Di_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _In_, _$4_Object_46defineProperty(_Di_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Io_, _$4_Object_46defineProperty(_Di_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _Im_Prov.prototype = _Di_;

  _$5_Object_46setPrototypeOf(_Im_Prov, _HW_Expo);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ij_, _$4_Object_46defineProperty(_Cl_, "searchForProvContent", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ik_, _$4_Object_46defineProperty(_Cl_, "searchForProvs", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Il_, _$4_Object_46defineProperty(_Cl_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _Cf_fromNode = (__constructor.prototype = _Cl_, new __constructor());

  _Cf_fromNode.key = "nd67";
  _Cf_fromNode.shape = null;
  _Cf_fromNode.text = "abs";
  _Cf_fromNode.colour = "indianred1";
  _Cf_fromNode.name = void 0;
  _Cf_fromNode.graph = _6_graph;
  _Cf_fromNode.group = _B_wrapper;
  _Cf_fromNode.width = null;
  _Cf_fromNode.height = null;
  var _Cj_ = [,,,];
  _Cj_.length = 0;
  _Cf_fromNode.links = _Cj_;
  _Cc_right.prin = _Cf_fromNode;
  _Cc_right.auxs = _Ca_;

  _9_.set("nd70", _Cc_right);

  var _Cn_term = (__constructor.prototype = _2d_, new __constructor());

  _Cn_term.key = "nd72";
  _Cn_term.shape = null;
  _Cn_term.text = null;
  _Cn_term.colour = null;
  _Cn_term.name = void 0;
  _Cn_term.graph = _6_graph;
  _Cn_term.group = null;
  _Cn_term.width = null;
  _Cn_term.height = null;
  var _Co_ = [];
  _Cn_term.links = _Co_;
  var _Cp_ = [];
  _Cn_term.nodes = _Cp_;

  var _Cq_toNode = (__constructor.prototype = _6J_, new __constructor());

  _Cq_toNode.key = "nd12";
  _Cq_toNode.shape = null;
  _Cq_toNode.text = "@";
  _Cq_toNode.colour = "yellow";
  _Cq_toNode.name = void 0;
  _Cq_toNode.graph = _6_graph;
  _Cq_toNode.group = _B_wrapper;
  _Cq_toNode.width = null;
  _Cq_toNode.height = null;
  var _Cu_ = [,,,];
  _Cu_.length = 0;
  _Cq_toNode.links = _Cu_;
  _Cn_term.prin = _Cq_toNode;

  var _Cx_toNode = (__constructor.prototype = _8h_, new __constructor());

  _Cx_toNode.key = "nd63";
  _Cx_toNode.shape = null;
  _Cx_toNode.text = "?";
  _Cx_toNode.colour = "cyan";
  _Cx_toNode.name = "x";
  _Cx_toNode.graph = _6_graph;
  _Cx_toNode.group = _B_wrapper;
  _Cx_toNode.width = ".3";
  _Cx_toNode.height = ".3";
  var _D3_ = [,,,];
  _D3_.length = 0;
  _Cx_toNode.links = _D3_;

  var _D5_fromNode = (__constructor.prototype = _58_, new __constructor());

  _D5_fromNode.key = "nd71";
  _D5_fromNode.shape = null;
  _D5_fromNode.text = "C";
  _D5_fromNode.colour = "cyan";
  _D5_fromNode.name = "wr";
  _D5_fromNode.graph = _6_graph;
  _D5_fromNode.group = _B_wrapper;
  _D5_fromNode.width = ".3";
  _D5_fromNode.height = ".3";
  var _DB_ = [,,,];
  _DB_.length = 0;
  _D5_fromNode.links = _DB_;
  var _Cw_newAuxs = [_Cx_toNode, _D5_fromNode,,];
  _Cw_newAuxs.length = 2;
  _Cn_term.auxs = _Cw_newAuxs;

  _9_.set("nd72", _Cn_term);

  var _DF_left = (__constructor.prototype = _2d_, new __constructor());

  _DF_left.key = "nd74";
  _DF_left.shape = null;
  _DF_left.text = null;
  _DF_left.colour = null;
  _DF_left.name = void 0;
  _DF_left.graph = _6_graph;
  _DF_left.group = null;
  _DF_left.width = null;
  _DF_left.height = null;
  var _DG_ = [];
  _DF_left.links = _DG_;
  var _DH_ = [];
  _DF_left.nodes = _DH_;

  var _DI_fromNode = (__constructor.prototype = _2Z_, new __constructor());

  _DI_fromNode.key = "nd10";
  _DI_fromNode.shape = null;
  _DI_fromNode.text = "!";
  _DI_fromNode.colour = "cyan";
  _DI_fromNode.name = void 0;
  _DI_fromNode.graph = _6_graph;
  _DI_fromNode.group = _B_wrapper;
  _DI_fromNode.width = ".3";
  _DI_fromNode.height = ".3";
  var _DO_ = [,,];
  _DO_.length = 0;
  _DI_fromNode.links = _DO_;
  _DF_left.prin = _DI_fromNode;
  var _DQ_newPaxs = [,];
  _DQ_newPaxs.length = 0;
  _DF_left.auxs = _DQ_newPaxs;

  _9_.set("nd74", _DF_left);

  _9_.set("nd79", _3C_node);

  _9_.set("nd80", _3K_node);

  var _DT_term = (__constructor.prototype = _2d_, new __constructor());

  _DT_term.key = "nd83";
  _DT_term.shape = null;
  _DT_term.text = null;
  _DT_term.colour = null;
  _DT_term.name = void 0;
  _DT_term.graph = _6_graph;
  _DT_term.group = null;
  _DT_term.width = null;
  _DT_term.height = null;
  var _DU_ = [];
  _DT_term.links = _DU_;
  var _DV_ = [];
  _DT_term.nodes = _DV_;
  _DT_term.prin = _3S_provContent;
  _DT_term.auxs = _3Z_;

  _9_.set("nd83", _DT_term);

  var _DX_left = (__constructor.prototype = _2d_, new __constructor());

  _DX_left.key = "nd85";
  _DX_left.shape = null;
  _DX_left.text = null;
  _DX_left.colour = null;
  _DX_left.name = void 0;
  _DX_left.graph = _6_graph;
  _DX_left.group = null;
  _DX_left.width = null;
  _DX_left.height = null;
  var _DY_ = [];
  _DX_left.links = _DY_;
  var _DZ_ = [];
  _DX_left.nodes = _DZ_;

  var _Da_fromNode = (__constructor.prototype = _Di_, new __constructor());

  _Da_fromNode.key = "nd84";
  _Da_fromNode.shape = null;
  _Da_fromNode.text = "\xA1";
  _Da_fromNode.colour = "cyan";
  _Da_fromNode.name = 1;
  _Da_fromNode.graph = _6_graph;
  _Da_fromNode.group = _B_wrapper;
  _Da_fromNode.width = ".3";
  _Da_fromNode.height = ".3";
  var _Dg_ = [,,,];
  _Dg_.length = 0;
  _Da_fromNode.links = _Dg_;
  _DX_left.prin = _Da_fromNode;
  _DX_left.auxs = _3Z_;

  _9_.set("nd85", _DX_left);

  var _Dk_right = (__constructor.prototype = _2d_, new __constructor());

  _Dk_right.key = "nd87";
  _Dk_right.shape = null;
  _Dk_right.text = null;
  _Dk_right.colour = null;
  _Dk_right.name = void 0;
  _Dk_right.graph = _6_graph;
  _Dk_right.group = null;
  _Dk_right.width = null;
  _Dk_right.height = null;
  var _Dl_ = [];
  _Dk_right.links = _Dl_;
  var _Dm_ = [];
  _Dk_right.nodes = _Dm_;

  var _Dn_toNode = (__constructor.prototype = _Au_, new __constructor());

  _Dn_toNode.key = "nd86";
  _Dn_toNode.shape = null;
  _Dn_toNode.text = "V";
  _Dn_toNode.colour = "cyan";
  _Dn_toNode.name = "x";
  _Dn_toNode.graph = _6_graph;

  var _Ds__95node = (__constructor.prototype = _2R_, new __constructor());

  _Ds__95node.key = "nd4";
  _Ds__95node.shape = null;
  _Ds__95node.text = null;
  _Ds__95node.colour = null;
  _Ds__95node.name = void 0;
  _Ds__95node.graph = _6_graph;
  _Ds__95node.group = _B_wrapper;
  _Ds__95node.width = null;
  _Ds__95node.height = null;
  var _Du_ = [,,,,,,,,,,,,,,,,,,,,,,,];
  _Du_.length = 0;
  _Ds__95node.links = _Du_;
  var _Dw_ = [,,,,,,,,,,,,,,,,,,,,,];
  _Dw_.length = 0;
  _Ds__95node.nodes = _Dw_;
  _Dn_toNode.group = _Ds__95node;
  _Dn_toNode.width = ".3";
  _Dn_toNode.height = ".3";
  var _E0_ = [,,];
  _E0_.length = 0;
  _Dn_toNode.links = _E0_;
  _Dk_right.prin = _Dn_toNode;
  var _E2_ = [_Dn_toNode];
  _Dk_right.auxs = _E2_;

  _9_.set("nd87", _Dk_right);

  var _E4_left = (__constructor.prototype = _2d_, new __constructor());

  _E4_left.key = "nd88";
  _E4_left.shape = null;
  _E4_left.text = null;
  _E4_left.colour = null;
  _E4_left.name = void 0;
  _E4_left.graph = _6_graph;
  _E4_left.group = null;
  _E4_left.width = null;
  _E4_left.height = null;
  var _E5_ = [];
  _E4_left.links = _E5_;
  var _E6_ = [];
  _E4_left.nodes = _E6_;
  _E4_left.prin = _33_fromNode;
  var _E7_newAuxs = [_Dn_toNode];
  _E4_left.auxs = _E7_newAuxs;

  _9_.set("nd88", _E4_left);

  _9_.set("nd89", _3a_node);

  _9_.set("nd90", _3i_node);

  var _E9_term = (__constructor.prototype = _2d_, new __constructor());

  _E9_term.key = "nd93";
  _E9_term.shape = null;
  _E9_term.text = null;
  _E9_term.colour = null;
  _E9_term.name = void 0;
  _E9_term.graph = _6_graph;
  _E9_term.group = null;
  _E9_term.width = null;
  _E9_term.height = null;
  var _EA_ = [];
  _E9_term.links = _EA_;
  var _EB_ = [];
  _E9_term.nodes = _EB_;
  _E9_term.prin = _3q_provContent;
  _E9_term.auxs = _3x_;

  _9_.set("nd93", _E9_term);

  var _ED_right = (__constructor.prototype = _2d_, new __constructor());

  _ED_right.key = "nd95";
  _ED_right.shape = null;
  _ED_right.text = null;
  _ED_right.colour = null;
  _ED_right.name = void 0;
  _ED_right.graph = _6_graph;
  _ED_right.group = null;
  _ED_right.width = null;
  _ED_right.height = null;
  var _EE_ = [];
  _ED_right.links = _EE_;
  var _EF_ = [];
  _ED_right.nodes = _EF_;

  var _EG_fromNode = (__constructor.prototype = _Di_, new __constructor());

  _EG_fromNode.key = "nd94";
  _EG_fromNode.shape = null;
  _EG_fromNode.text = "\xA1";
  _EG_fromNode.colour = "cyan";
  _EG_fromNode.name = 0;
  _EG_fromNode.graph = _6_graph;
  _EG_fromNode.group = _B_wrapper;
  _EG_fromNode.width = ".3";
  _EG_fromNode.height = ".3";
  var _EM_ = [,,,];
  _EM_.length = 0;
  _EG_fromNode.links = _EM_;
  _ED_right.prin = _EG_fromNode;
  _ED_right.auxs = _3x_;

  _9_.set("nd95", _ED_right);

  var _EP_left = (__constructor.prototype = _2d_, new __constructor());

  _EP_left.key = "nd96";
  _EP_left.shape = null;
  _EP_left.text = null;
  _EP_left.colour = null;
  _EP_left.name = void 0;
  _EP_left.graph = _6_graph;
  _EP_left.group = null;
  _EP_left.width = null;
  _EP_left.height = null;
  var _EQ_ = [];
  _EP_left.links = _EQ_;
  var _ER_ = [];
  _EP_left.nodes = _ER_;
  _EP_left.prin = _2t_fromNode;
  var _ES_newAuxs = [_Dn_toNode];
  _EP_left.auxs = _ES_newAuxs;

  _9_.set("nd96", _EP_left);

  _9_.set("nd99", _4E_node);

  _9_.set("nd100", _4M_node);

  var _EU_term = (__constructor.prototype = _2d_, new __constructor());

  _EU_term.key = "nd103";
  _EU_term.shape = null;
  _EU_term.text = null;
  _EU_term.colour = null;
  _EU_term.name = void 0;
  _EU_term.graph = _6_graph;
  _EU_term.group = null;
  _EU_term.width = null;
  _EU_term.height = null;
  var _EV_ = [];
  _EU_term.links = _EV_;
  var _EW_ = [];
  _EU_term.nodes = _EW_;
  _EU_term.prin = _4U_provContent;
  _EU_term.auxs = _4b_;

  _9_.set("nd103", _EU_term);

  var _EY_left = (__constructor.prototype = _2d_, new __constructor());

  _EY_left.key = "nd105";
  _EY_left.shape = null;
  _EY_left.text = null;
  _EY_left.colour = null;
  _EY_left.name = void 0;
  _EY_left.graph = _6_graph;
  _EY_left.group = null;
  _EY_left.width = null;
  _EY_left.height = null;
  var _EZ_ = [];
  _EY_left.links = _EZ_;
  var _Ea_ = [];
  _EY_left.nodes = _Ea_;

  var _Eb_fromNode = (__constructor.prototype = _Di_, new __constructor());

  _Eb_fromNode.key = "nd104";
  _Eb_fromNode.shape = null;
  _Eb_fromNode.text = "\xA1";
  _Eb_fromNode.colour = "cyan";
  _Eb_fromNode.name = 1;
  _Eb_fromNode.graph = _6_graph;
  _Eb_fromNode.group = _B_wrapper;
  _Eb_fromNode.width = ".3";
  _Eb_fromNode.height = ".3";
  var _Eh_ = [,,,];
  _Eh_.length = 0;
  _Eb_fromNode.links = _Eh_;
  _EY_left.prin = _Eb_fromNode;
  _EY_left.auxs = _4b_;

  _9_.set("nd105", _EY_left);

  var _Ek_right = (__constructor.prototype = _2d_, new __constructor());

  _Ek_right.key = "nd107";
  _Ek_right.shape = null;
  _Ek_right.text = null;
  _Ek_right.colour = null;
  _Ek_right.name = void 0;
  _Ek_right.graph = _6_graph;
  _Ek_right.group = null;
  _Ek_right.width = null;
  _Ek_right.height = null;
  var _El_ = [];
  _Ek_right.links = _El_;
  var _Em_ = [];
  _Ek_right.nodes = _Em_;

  var _En_toNode = (__constructor.prototype = _Au_, new __constructor());

  _En_toNode.key = "nd106";
  _En_toNode.shape = null;
  _En_toNode.text = "V";
  _En_toNode.colour = "cyan";
  _En_toNode.name = "x";
  _En_toNode.graph = _6_graph;
  _En_toNode.group = _Ds__95node;
  _En_toNode.width = ".3";
  _En_toNode.height = ".3";
  var _Eu_ = [,,];
  _Eu_.length = 0;
  _En_toNode.links = _Eu_;
  _Ek_right.prin = _En_toNode;
  var _Ew_ = [_En_toNode];
  _Ek_right.auxs = _Ew_;

  _9_.set("nd107", _Ek_right);

  var _Ey_left = (__constructor.prototype = _2d_, new __constructor());

  _Ey_left.key = "nd108";
  _Ey_left.shape = null;
  _Ey_left.text = null;
  _Ey_left.colour = null;
  _Ey_left.name = void 0;
  _Ey_left.graph = _6_graph;
  _Ey_left.group = null;
  _Ey_left.width = null;
  _Ey_left.height = null;
  var _Ez_ = [];
  _Ey_left.links = _Ez_;
  var _F0_ = [];
  _Ey_left.nodes = _F0_;
  _Ey_left.prin = _46_prev;
  var _F1_newAuxs = [_En_toNode];
  _Ey_left.auxs = _F1_newAuxs;

  _9_.set("nd108", _Ey_left);

  _9_.set("nd109", _4c_node);

  _9_.set("nd110", _4k_node);

  var _F3_term = (__constructor.prototype = _2d_, new __constructor());

  _F3_term.key = "nd113";
  _F3_term.shape = null;
  _F3_term.text = null;
  _F3_term.colour = null;
  _F3_term.name = void 0;
  _F3_term.graph = _6_graph;
  _F3_term.group = null;
  _F3_term.width = null;
  _F3_term.height = null;
  var _F4_ = [];
  _F3_term.links = _F4_;
  var _F5_ = [];
  _F3_term.nodes = _F5_;
  _F3_term.prin = _4s_provContent;
  _F3_term.auxs = _4z_;

  _9_.set("nd113", _F3_term);

  var _F7_right = (__constructor.prototype = _2d_, new __constructor());

  _F7_right.key = "nd115";
  _F7_right.shape = null;
  _F7_right.text = null;
  _F7_right.colour = null;
  _F7_right.name = void 0;
  _F7_right.graph = _6_graph;
  _F7_right.group = null;
  _F7_right.width = null;
  _F7_right.height = null;
  var _F8_ = [];
  _F7_right.links = _F8_;
  var _F9_ = [];
  _F7_right.nodes = _F9_;

  var _FA_fromNode = (__constructor.prototype = _Di_, new __constructor());

  _FA_fromNode.key = "nd114";
  _FA_fromNode.shape = null;
  _FA_fromNode.text = "\xA1";
  _FA_fromNode.colour = "cyan";
  _FA_fromNode.name = 0;
  _FA_fromNode.graph = _6_graph;
  _FA_fromNode.group = _B_wrapper;
  _FA_fromNode.width = ".3";
  _FA_fromNode.height = ".3";
  var _FG_ = [,,,];
  _FG_.length = 0;
  _FA_fromNode.links = _FG_;
  _F7_right.prin = _FA_fromNode;
  _F7_right.auxs = _4z_;

  _9_.set("nd115", _F7_right);

  var _FJ_right = (__constructor.prototype = _2d_, new __constructor());

  _FJ_right.key = "nd116";
  _FJ_right.shape = null;
  _FJ_right.text = null;
  _FJ_right.colour = null;
  _FJ_right.name = void 0;
  _FJ_right.graph = _6_graph;
  _FJ_right.group = null;
  _FJ_right.width = null;
  _FJ_right.height = null;
  var _FK_ = [];
  _FJ_right.links = _FK_;
  var _FL_ = [];
  _FJ_right.nodes = _FL_;
  _FJ_right.prin = _3y_fromNode;
  var _FM_newAuxs = [_En_toNode];
  _FJ_right.auxs = _FM_newAuxs;

  _9_.set("nd116", _FJ_right);

  var _FO_right = (__constructor.prototype = _2d_, new __constructor());

  _FO_right.key = "nd118";
  _FO_right.shape = null;
  _FO_right.text = null;
  _FO_right.colour = null;
  _FO_right.name = void 0;
  _FO_right.graph = _6_graph;
  _FO_right.group = null;
  _FO_right.width = null;
  _FO_right.height = null;
  var _FP_ = [];
  _FO_right.links = _FP_;
  var _FQ_ = [];
  _FO_right.nodes = _FQ_;
  _FO_right.prin = _2n_toNode;

  var _FS_fromNode = (__constructor.prototype = _58_, new __constructor());

  _FS_fromNode.key = "nd117";
  _FS_fromNode.shape = null;
  _FS_fromNode.text = "C";
  _FS_fromNode.colour = "cyan";
  _FS_fromNode.name = "x";
  _FS_fromNode.graph = _6_graph;
  _FS_fromNode.group = _B_wrapper;
  _FS_fromNode.width = ".3";
  _FS_fromNode.height = ".3";
  var _FY_ = [,,,];
  _FY_.length = 0;
  _FS_fromNode.links = _FY_;
  var _FR_newAuxs = [_FS_fromNode,,];
  _FR_newAuxs.length = 1;
  _FO_right.auxs = _FR_newAuxs;

  _9_.set("nd118", _FO_right);

  var _Fc_term = (__constructor.prototype = _2d_, new __constructor());

  _Fc_term.key = "nd120";
  _Fc_term.shape = null;
  _Fc_term.text = null;
  _Fc_term.colour = null;
  _Fc_term.name = void 0;
  _Fc_term.graph = _6_graph;
  _Fc_term.group = null;
  _Fc_term.width = null;
  _Fc_term.height = null;
  var _Fd_ = [];
  _Fc_term.links = _Fd_;
  var _Fe_ = [];
  _Fc_term.nodes = _Fe_;

  var _Ff_toNode = (__constructor.prototype = _6J_, new __constructor());

  _Ff_toNode.key = "nd7";
  _Ff_toNode.shape = null;
  _Ff_toNode.text = "@";
  _Ff_toNode.colour = "yellow";
  _Ff_toNode.name = void 0;
  _Ff_toNode.graph = _6_graph;
  _Ff_toNode.group = _B_wrapper;
  _Ff_toNode.width = null;
  _Ff_toNode.height = null;
  var _Fj_ = [,,,];
  _Fj_.length = 0;
  _Ff_toNode.links = _Fj_;
  _Fc_term.prin = _Ff_toNode;
  var _Fl_newAuxs = [_50_right,,];
  _Fl_newAuxs.length = 1;
  _Fc_term.auxs = _Fl_newAuxs;

  _9_.set("nd120", _Fc_term);

  var _Fo_left = (__constructor.prototype = _2d_, new __constructor());

  _Fo_left.key = "nd121";
  _Fo_left.shape = null;
  _Fo_left.text = null;
  _Fo_left.colour = null;
  _Fo_left.name = void 0;
  _Fo_left.graph = _6_graph;
  _Fo_left.group = null;
  _Fo_left.width = null;
  _Fo_left.height = null;
  var _Fp_ = [];
  _Fo_left.links = _Fp_;
  var _Fq_ = [];
  _Fo_left.nodes = _Fq_;

  var _Fr_fromNode = (__constructor.prototype = _2Z_, new __constructor());

  _Fr_fromNode.key = "nd5";
  _Fr_fromNode.shape = null;
  _Fr_fromNode.text = "!";
  _Fr_fromNode.colour = "cyan";
  _Fr_fromNode.name = void 0;
  _Fr_fromNode.graph = _6_graph;
  _Fr_fromNode.group = _B_wrapper;
  _Fr_fromNode.width = ".3";
  _Fr_fromNode.height = ".3";
  var _Fx_ = [,,];
  _Fx_.length = 0;
  _Fr_fromNode.links = _Fx_;
  _Fo_left.prin = _Fr_fromNode;
  var _Fz_newPaxs = [];
  _Fo_left.auxs = _Fz_newPaxs;

  _9_.set("nd121", _Fo_left);

  _9_.set("nd123", _2A_node);

  _9_.set("nd124", _2I_node);

  var _G1_term = (__constructor.prototype = _2d_, new __constructor());

  _G1_term.key = "nd127";
  _G1_term.shape = null;
  _G1_term.text = null;
  _G1_term.colour = null;
  _G1_term.name = void 0;
  _G1_term.graph = _6_graph;
  _G1_term.group = null;
  _G1_term.width = null;
  _G1_term.height = null;
  var _G2_ = [];
  _G1_term.links = _G2_;
  var _G3_ = [];
  _G1_term.nodes = _G3_;
  _G1_term.prin = _2T_node;
  _G1_term.auxs = _2b_;

  _9_.set("nd127", _G1_term);

  var _G5_right = (__constructor.prototype = _2d_, new __constructor());

  _G5_right.key = "nd129";
  _G5_right.shape = null;
  _G5_right.text = null;
  _G5_right.colour = null;
  _G5_right.name = void 0;
  _G5_right.graph = _6_graph;
  _G5_right.group = null;
  _G5_right.width = null;
  _G5_right.height = null;
  var _G6_ = [];
  _G5_right.links = _G6_;
  var _G7_ = [];
  _G5_right.nodes = _G7_;

  var _GH_ = (__constructor.prototype = _29_, new __constructor());

  _Ip_Ref.prototype = _GH_;

  _$5_Object_46setPrototypeOf(_Ip_Ref, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ip_Ref, _$4_Object_46defineProperty(_GH_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iq_, _$4_Object_46defineProperty(_GH_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ir_, _$4_Object_46defineProperty(_GH_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Is_, _$4_Object_46defineProperty(_GH_, "deleteAndPreserveInLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _It_, _$4_Object_46defineProperty(_GH_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _G8_toNode = (__constructor.prototype = _GH_, new __constructor());

  _G8_toNode.key = "nd128";
  _G8_toNode.shape = "diamond";
  _G8_toNode.text = "";
  _G8_toNode.colour = "indianred1";
  _G8_toNode.name = void 0;
  _G8_toNode.graph = _6_graph;
  _G8_toNode.group = _B_wrapper;
  _G8_toNode.width = ".3";
  _G8_toNode.height = ".3";
  var _GF_ = [,,];
  _GF_.length = 0;
  _G8_toNode.links = _GF_;
  _G5_right.prin = _G8_toNode;
  _G5_right.auxs = _2b_;

  _9_.set("nd129", _G5_right);

  var _GJ_term = (__constructor.prototype = _2d_, new __constructor());

  _GJ_term.key = "nd130";
  _GJ_term.shape = null;
  _GJ_term.text = null;
  _GJ_term.colour = null;
  _GJ_term.name = void 0;
  _GJ_term.graph = _6_graph;
  _GJ_term.group = null;
  _GJ_term.width = null;
  _GJ_term.height = null;
  var _GK_ = [];
  _GJ_term.links = _GK_;
  var _GL_ = [];
  _GJ_term.nodes = _GL_;

  var _GM_toNode = (__constructor.prototype = _6J_, new __constructor());

  _GM_toNode.key = "nd2";
  _GM_toNode.shape = null;
  _GM_toNode.text = "@";
  _GM_toNode.colour = "yellow";
  _GM_toNode.name = void 0;
  _GM_toNode.graph = _6_graph;
  _GM_toNode.group = _B_wrapper;
  _GM_toNode.width = null;
  _GM_toNode.height = null;
  var _GQ_ = [,,,];
  _GQ_.length = 0;
  _GM_toNode.links = _GQ_;
  _GJ_term.prin = _GM_toNode;
  var _GS_newAuxs = [];
  _GJ_term.auxs = _GS_newAuxs;

  _9_.set("nd130", _GJ_term);

  _9_.set("nd145", _5i_vecWrapper);

  _9_.set("nd146", _5m_box);

  _81_.group = _7y_node;
  _8C_.group = _89_node;
  _85_outLink.group = _7y_node;
  _7V_.group = _7S_node;
  _7a_.group = _7S_node;
  _7e_.group = _7S_node;
  _7J_.group = _7G_node;
  _7i_.group = _7S_node;
  _7l_.group = _7S_node;
  _7N_.group = _7G_node;
  _6Z_.group = _6W_node;
  _9T_.group = _9Q_node;
  _6e_.group = _6W_node;
  _6i_.group = _6W_node;
  _6m_.group = _6W_node;
  _6N_.group = _6K_node;
  _6p_.group = _6W_node;
  _6s_.group = _6W_node;
  _6x_.group = _6W_node;
  _71_.group = _6W_node;
  _6R_outLink.group = _6K_node;
  _1S_link.group = _B_wrapper;
  _1X_link.group = _B_wrapper;
  _1a_link.group = _B_wrapper;
  _1e_link.group = _B_wrapper;
  _1B_link.group = _B_wrapper;
  _3F_link.group = _3C_node;
  _P_link.group = _B_wrapper;
  _3d_link.group = _3a_node;
  _T_link.group = _B_wrapper;
  _Y_link.group = _B_wrapper;
  _4H_link.group = _4E_node;
  _c_link.group = _B_wrapper;
  _4f_link.group = _4c_node;
  _g_link.group = _B_wrapper;
  _l_link.group = _B_wrapper;
  _p_link.group = _B_wrapper;
  _t_link.group = _B_wrapper;
  _w_link.group = _B_wrapper;
  _10_link.group = _B_wrapper;
  _13_link.group = _B_wrapper;
  _17_nextLink.group = _B_wrapper;
  _2D_link.group = _2A_node;
  _F_link.group = _B_wrapper;
  _L_link.group = _B_wrapper;
  _5p_nextLink.group = _5m_box;
  _1F_link.group = _B_wrapper;
  _1K_link.group = _B_wrapper;
  _1O_link.group = _B_wrapper;
  _1i_link.group = _B_wrapper;
  _1n_link.group = _B_wrapper;
  _1q_link.group = _B_wrapper;
  _1v_nextLink.group = _B_wrapper;
  _22_fromNode.group = _B_wrapper;
  _6E_prev.group = _B_wrapper;
  _9z_node.group = _6K_node;
  _Hi_Term.prototype = _2d_;
  _77_node.group = _6W_node;
  _7C_node.group = _6W_node;
  _91_node.group = _7G_node;
  _7q_node.group = _7S_node;
  _7u_node.group = _7S_node;
  _8U_node.group = _7y_node;
  _8I_fromNode.group = _89_node;
  _8N_node.group = _89_node;
  _8a_node.group = _7y_node;
  _8j_node.group = _7S_node;
  _8q_node.group = _7S_node;
  _Ha_BoxWrapper.prototype = _2c_;
  _HK_Box.prototype = _2R_;
  _8v_node.group = _7S_node;
  _97_node.group = _7G_node;
  _9E_node.group = _6W_node;
  _9K_fromNode.group = _6W_node;
  _9g_node.group = _9Q_node;
  _9c_node.group = _9Y_node;
  _9n_node.group = _6W_node;
  _9t_node.group = _6W_node;
  _A5_fromNode.group = _6K_node;
  _AD_node.group = _B_wrapper;
  _AJ_otherNode.group = _B_wrapper;
  _2n_toNode.group = _B_wrapper;
  _2t_fromNode.group = _B_wrapper;
  _33_fromNode.group = _B_wrapper;
  _3S_provContent.group = _3C_node;
  _3O_node.group = _3K_node;
  _3q_provContent.group = _3a_node;
  _3m_node.group = _3i_node;
  _3y_fromNode.group = _B_wrapper;
  _46_prev.group = _B_wrapper;
  _4U_provContent.group = _4E_node;
  _4Q_node.group = _4M_node;
  _4s_provContent.group = _4c_node;
  _4o_node.group = _4k_node;
  _50_right.group = _B_wrapper;
  _2T_node.group = _2A_node;
  _2M_node.group = _2I_node;
  _2e_toNode.group = _B_wrapper;
  _2k_toNode.group = _B_wrapper;
  _59_fromNode.group = _B_wrapper;
  _5F_weak.group = _B_wrapper;
  _5M_fromNode.group = _B_wrapper;
  _5Q_weak.group = _B_wrapper;
  _5W_weak.group = _B_wrapper;
  _5c_weak.group = _B_wrapper;
  _66_toNode.group = _5i_vecWrapper;
  _5u_toNode.group = _5m_box;
  _5z_toNode.group = _5m_box;
  _AP_rightNode.group = _B_wrapper;
  _AT_prev.group = _B_wrapper;
  _AZ_toNode.group = _B_wrapper;
  _Ad_prev.group = _B_wrapper;
  _HM_Group.prototype = _2S_;

  _$5_Object_46setPrototypeOf(_HM_Group, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iu_, _$4_Object_46defineProperty(_GV_, "clear", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iv_, _$4_Object_46defineProperty(_GV_, "addNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iw_, _$4_Object_46defineProperty(_GV_, "removeNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ix_, _$4_Object_46defineProperty(_GV_, "findNodeByKey", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iy_, _$4_Object_46defineProperty(_GV_, "addLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Iz_, _$4_Object_46defineProperty(_GV_, "removeLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _K9_, _$4_Object_46defineProperty(_J4_MachineToken, "CompData", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _KA_, _$4_Object_46defineProperty(_J4_MachineToken, "RewriteFlag", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J1_, _$4_Object_46defineProperty(_Gj_, "setLink", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J2_, _$4_Object_46defineProperty(_Gj_, "reset", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J3_, _$4_Object_46defineProperty(_Gj_, "delete", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J5_, _$4_Object_46defineProperty(_Gl_, "collect", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J6_, _$4_Object_46defineProperty(_Gl_, "collectInGroup", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J7_, _$4_Object_46defineProperty(_Gl_, "collectFromBottom", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _J9_, _$4_Object_46defineProperty(_Gr_, "isPlay", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JA_, _$4_Object_46defineProperty(_Gr_, "setPlay", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JB_, _$4_Object_46defineProperty(_Gr_, "isPlaying", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JC_, _$4_Object_46defineProperty(_Gr_, "setPlaying", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JD_, _$4_Object_46defineProperty(_Gr_, "isFinished", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JE_, _$4_Object_46defineProperty(_Gr_, "setFinished", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Lz_, _$4_Object_46defineProperty(_Kv_, "_nextChar", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _Nh_Token.EOF = "EOF";
  _Nh_Token.LAMBDA = "LAMBDA";
  _Nh_Token.LPAREN = "LPAREN";
  _Nh_Token.RPAREN = "RPAREN";
  _Nh_Token.LCID = "LCID";
  _Nh_Token.DOT = "DOT";
  _Nh_Token.COMMA = "COMMA";
  _Nh_Token.APP = "APP";
  _Nh_Token.LET = "LET";
  _Nh_Token.DEFINE = "DEFINE";
  _Nh_Token.IN = "IN";
  _Nh_Token.REC = "REC";
  _Nh_Token.INT = "INT";
  _Nh_Token.TRUE = "TRUE";
  _Nh_Token.FALSE = "FALSE";
  _Nh_Token.NOT = "NOT";
  _Nh_Token.AND = "AND";
  _Nh_Token.OR = "OR";
  _Nh_Token.PLUS = "PLUS";
  _Nh_Token.SUB = "SUB";
  _Nh_Token.MULT = "MULT";
  _Nh_Token.DIV = "DIV";
  _Nh_Token.LTE = "LTE";
  _Nh_Token.IF = "IF";
  _Nh_Token.THEN = "THEN";
  _Nh_Token.ELSE = "ELSE";
  _Nh_Token.SET = "SET";
  _Nh_Token.CHANGE = "CHANGE";
  _Nh_Token.TO = "TO";
  _Nh_Token.PROP = "PROP";
  _Nh_Token.DEP = "DEP";
  _Nh_Token.DEREF = "DEREF";
  _Nh_Token.ABS = "ABS";
  _Nh_Token.CELL = "CELL";
  _Nh_Token.PC = "PC";
  _Nh_Token.SYMPLUS = "SYMPLUS";
  _Nh_Token.SYMMULT = "SYMMULT";
  _Nh_Token.SYMDOT = "SYMDOT";
  _Nh_Token.SET_P = "SET_P";
  _Nh_Token.FOLD = "FOLD";
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M0_, _$4_Object_46defineProperty(_Kv_, "_nextToken", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M1_, _$4_Object_46defineProperty(_Kv_, "token", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M2_, _$4_Object_46defineProperty(_Kv_, "lookahead", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M3_, _$4_Object_46defineProperty(_Kv_, "fail", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M4_, _$4_Object_46defineProperty(_Kv_, "next", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M5_, _$4_Object_46defineProperty(_Kv_, "match", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M6_, _$4_Object_46defineProperty(_Kv_, "skip", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M7_, _$4_Object_46defineProperty(_Kx_, "parse", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  var _KB_PatternType = {
    Id: 0,
    Tuple: 1
  };
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M8_, _$4_Object_46defineProperty(_Kx_, "term", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _M9_, _$4_Object_46defineProperty(_Kx_, "isBinaryOp", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _L4_ = (__constructor.prototype = _L5_, new __constructor());

  _L8_UnaryOp.prototype = _L4_;

  _$5_Object_46setPrototypeOf(_L8_UnaryOp, _MD_Operation);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _L8_UnaryOp, _$4_Object_46defineProperty(_L4_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _L3_ = (__constructor.prototype = _L4_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _L2_BinaryOp, _$4_Object_46defineProperty(_L3_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _L2_BinaryOp.prototype = _L3_;

  _$5_Object_46setPrototypeOf(_L2_BinaryOp, _L8_UnaryOp);

  var _L7_ = (__constructor.prototype = _L3_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _L6_SymmetricBinaryOp, _$4_Object_46defineProperty(_L7_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _L6_SymmetricBinaryOp.prototype = _L7_;

  _$5_Object_46setPrototypeOf(_L6_SymmetricBinaryOp, _L2_BinaryOp);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MA_, _$4_Object_46defineProperty(_Kx_, "parseBinop", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MB_, _$4_Object_46defineProperty(_Kx_, "application", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  var _Mt_UnOpType = {
    Not: 0
  };
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MC_, _$4_Object_46defineProperty(_Kx_, "atom", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JF_, _$4_Object_46defineProperty(_Gr_, "compile", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _LA_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _L9_UnOp, _$4_Object_46defineProperty(_LA_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _ME_, _$4_Object_46defineProperty(_LA_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MF_, _$4_Object_46defineProperty(_LA_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MG_, _$4_Object_46defineProperty(_LA_, "unOpApply", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MH_, _$4_Object_46defineProperty(_LA_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _L9_UnOp.prototype = _LA_;

  _$5_Object_46setPrototypeOf(_L9_UnOp, _HG_Node);

  var _LD_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LC_If, _$4_Object_46defineProperty(_LD_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MI_, _$4_Object_46defineProperty(_LD_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MJ_, _$4_Object_46defineProperty(_LD_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MK_, _$4_Object_46defineProperty(_LD_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LC_If.prototype = _LD_;

  _$5_Object_46setPrototypeOf(_LC_If, _HG_Node);

  var _LL_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LK_Dep, _$4_Object_46defineProperty(_LL_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MO_, _$4_Object_46defineProperty(_LL_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MP_, _$4_Object_46defineProperty(_LL_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MQ_, _$4_Object_46defineProperty(_LL_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LK_Dep.prototype = _LL_;

  _$5_Object_46setPrototypeOf(_LK_Dep, _HG_Node);

  var _LO_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LN_Deref, _$4_Object_46defineProperty(_LO_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MR_, _$4_Object_46defineProperty(_LO_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MS_, _$4_Object_46defineProperty(_LO_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LN_Deref.prototype = _LO_;

  _$5_Object_46setPrototypeOf(_LN_Deref, _HG_Node);

  var _LS_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LR_Set, _$4_Object_46defineProperty(_LS_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MT_, _$4_Object_46defineProperty(_LS_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MU_, _$4_Object_46defineProperty(_LS_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MV_, _$4_Object_46defineProperty(_LS_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LR_Set.prototype = _LS_;

  _$5_Object_46setPrototypeOf(_LR_Set, _HG_Node);

  var _LV_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _LU_SetParam, _$4_Object_46defineProperty(_LV_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MW_, _$4_Object_46defineProperty(_LV_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MX_, _$4_Object_46defineProperty(_LV_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MY_, _$4_Object_46defineProperty(_LV_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _LU_SetParam.prototype = _LV_;

  _$5_Object_46setPrototypeOf(_LU_SetParam, _HG_Node);

  var _Lb_ = (__constructor.prototype = _29_, new __constructor());

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _La_Fold, _$4_Object_46defineProperty(_Lb_, "constructor", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _MZ_, _$4_Object_46defineProperty(_Lb_, "transition", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Ma_, _$4_Object_46defineProperty(_Lb_, "rewrite", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Mb_, _$4_Object_46defineProperty(_Lb_, "unfolding", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _Mc_, _$4_Object_46defineProperty(_Lb_, "copy", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  _La_Fold.prototype = _Lb_;

  _$5_Object_46setPrototypeOf(_La_Fold, _HG_Node);

  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JG_, _$4_Object_46defineProperty(_Gr_, "toGraph", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JH_, _$4_Object_46defineProperty(_Gr_, "deleteVarNode", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JI_, _$4_Object_46defineProperty(_Gr_, "startPropagation", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JJ_, _$4_Object_46defineProperty(_Gr_, "shuffle", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JK_, _$4_Object_46defineProperty(_Gr_, "batchPass", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JL_, _$4_Object_46defineProperty(_Gr_, "pass", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JM_, _$4_Object_46defineProperty(_Gr_, "tokenPass", $$0_enumerable_58false_44configurable_58true_44writable_58true);
  $$0_enumerable_58false_44configurable_58true_44writable_58true.value = _JN_, _$4_Object_46defineProperty(_Gr_, "getData", $$0_enumerable_58false_44configurable_58true_44writable_58true);

  var _5_ = (__constructor.prototype = _Gr_, new __constructor());

  _5_.graph = _6_graph;

  var _GW_ = (__constructor.prototype = _Gj_, new __constructor());

  _GW_.machine = _5_;
  _GW_.forward = false;
  _GW_.rewrite = false;
  _GW_.transited = true;
  _GW_.link = _1v_nextLink;
  _GW_.rewriteFlag = "\u25A1";
  var _Gb_data = [0, "-"];
  var _Ge_data = [0, "nd131"];
  var _Gf_data = ["[0,0,1,0]", "nd152"];
  var _Gg_data = ["[1,0,1,0]", "nd148"];
  var _GY_ = ["*", "*", "P", "*", _Gb_data, "*", _Ge_data, "*", _Gf_data, _Gg_data];
  _GW_.dataStack = _GY_;
  var _Gh_ = [,,];
  _Gh_.length = 0;
  _GW_.boxStack = _Gh_;
  _GW_.isMain = true;
  _5_.token = _GW_;

  var _Gk_ = (__constructor.prototype = _Gl_, new __constructor());

  _Gk_.graph = _6_graph;
  _Gk_.noMore = false;
  _5_.gc = _Gk_;
  _5_.count = 0;
  var _Gn_ = [];
  _5_.evalTokens = _Gn_;
  var _Go_ = ["nd131"];
  _5_.cells = _Go_;
  _5_.evaluating = false;

  var _Gp_ = new _$3_Map();

  _5_.newValues = _Gp_;
  _5_.hasUpdate = false;
  _5_.play = true;
  _5_.playing = true;
  _5_.finished = false;
  _5_.readyEvalTokens = 0;
  _6_graph.machine = _5_;
  var _JP_ = _$0_global;

  var _3_ = (err, result) => {
    if (err) {
      throw err;
    }

    if (result) {
      console.log(result.toString());
    }

    module.exports = result;
  };

  _0_(_1_trampoline, _2_autoPlay, _3_);
}).call(global);